/*
* jQuery Mobile Framework Git Build: SHA1: 0b3b56ef669b8545a312c02e69a153bb65114c0f <> Date: Sat Jun 23 13:40:40 2012 +0100
* http://jquerymobile.com
*
* Copyright 2011 (c) jQuery Project
* Dual licensed under the MIT or GPL Version 2 licenses.
* http://jquery.org/license
*
*/
(function(e,t,n){typeof define=="function"&&define.amd?define(["jquery"],function(r){return n(r,e,t),r.mobile}):n(e.jQuery,e,t)})(this,document,function(e,t,n,r){(function(e,t,r){var i={};e.mobile=e.extend({},{version:"1.2.0-pre",ns:"",subPageUrlKey:"ui-page",activePageClass:"ui-page-active",activeBtnClass:"ui-btn-active",focusClass:"ui-focus",ajaxEnabled:!0,hashListeningEnabled:!0,linkBindingEnabled:!0,defaultPageTransition:"fade",maxTransitionWidth:!1,minScrollBack:250,touchOverflowEnabled:!1,defaultDialogTransition:"pop",pageLoadErrorMessage:"Error Loading Page",pageLoadErrorMessageTheme:"e",autoInitializePage:!0,pushStateEnabled:!0,ignoreContentEnabled:!1,orientationChangeEnabled:!0,buttonMarkup:{hoverDelay:200},keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91},silentScroll:function(r){e.type(r)!=="number"&&(r=e.mobile.defaultHomeScroll),e.event.special.scrollstart.enabled=!1,setTimeout(function(){t.scrollTo(0,r),e(n).trigger("silentscroll",{x:0,y:r})},20),setTimeout(function(){e.event.special.scrollstart.enabled=!0},150)},nsNormalizeDict:i,nsNormalize:function(t){if(!t)return;return i[t]||(i[t]=e.camelCase(e.mobile.ns+t))},getInheritedTheme:function(e,t){var n=e[0],r="",i=/ui-(bar|body|overlay)-([a-z])\b/,s,o;while(n){s=n.className||"";if(s&&(o=i.exec(s))&&(r=o[2]))break;n=n.parentNode}return r||t||"a"},closestPageData:function(e){return e.closest(':jqmData(role="page"), :jqmData(role="dialog")').data("page")},enhanceable:function(e){return this.haveParents(e,"enhance")},hijackable:function(e){return this.haveParents(e,"ajax")},haveParents:function(t,n){if(!e.mobile.ignoreContentEnabled)return t;var r=t.length,i=e(),s,o,u;for(var a=0;a<r;a++){o=t.eq(a),u=!1,s=t[a];while(s){var f=s.getAttribute?s.getAttribute("data-"+e.mobile.ns+n):"";if(f==="false"){u=!0;break}s=s.parentNode}u||(i=i.add(o))}return i},getScreenHeight:function(){return t.innerHeight||e(t).height()}},e.mobile),e.fn.jqmData=function(t,n){var r;return typeof t!="undefined"&&(t&&(t=e.mobile.nsNormalize(t)),r=this.data.apply(this,arguments.length<2?[t]:[t,n])),r},e.jqmData=function(t,n,r){var i;return typeof n!="undefined"&&(i=e.data(t,n?e.mobile.nsNormalize(n):n,r)),i},e.fn.jqmRemoveData=function(t){return this.removeData(e.mobile.nsNormalize(t))},e.jqmRemoveData=function(t,n){return e.removeData(t,e.mobile.nsNormalize(n))},e.fn.removeWithDependents=function(){e.removeWithDependents(this)},e.removeWithDependents=function(t){var n=e(t);(n.jqmData("dependents")||e()).remove(),n.remove()},e.fn.addDependents=function(t){e.addDependents(e(this),t)},e.addDependents=function(t,n){var r=e(t).jqmData("dependents")||e();e(t).jqmData("dependents",e.merge(r,n))},e.fn.getEncodedText=function(){return e("<div/>").text(e(this).text()).html()},e.fn.jqmEnhanceable=function(){return e.mobile.enhanceable(this)},e.fn.jqmHijackable=function(){return e.mobile.hijackable(this)};var s=e.find,o=/:jqmData\(([^)]*)\)/g;e.find=function(t,n,r,i){return t=t.replace(o,"[data-"+(e.mobile.ns||"")+"$1]"),s.call(this,t,n,r,i)},e.extend(e.find,s),e.find.matches=function(t,n){return e.find(t,null,null,n)},e.find.matchesSelector=function(t,n){return e.find(n,null,null,[t]).length>0}})(e,this),function(t,n){var r=Array.prototype.slice,i=t.cleanData;t.cleanData=function(e){for(var n=0,r;(r=e[n])!=null;n++)try{t(r).triggerHandler("remove")}catch(s){}i(e)},t.widget=function(e,n,r){var i,s,o,u,a=e.split(".")[0];e=e.split(".")[1],i=a+"-"+e,r||(r=n,n=t.Widget),t.expr[":"][i]=function(e){return!!t.data(e,i)},t[a]=t[a]||{},s=t[a][e],o=t[a][e]=function(e,t){if(!this._createWidget)return new o(e,t);arguments.length&&this._createWidget(e,t)},t.extend(o,s,{version:r.version,_proto:t.extend({},r),_childConstructors:[]}),u=new n,u.options=t.widget.extend({},u.options),t.each(r,function(e,i){t.isFunction(i)&&(r[e]=function(){var t=function(){return n.prototype[e].apply(this,arguments)},r=function(t){return n.prototype[e].apply(this,t)};return function(){var e=this._super,n=this._superApply,s;return this._super=t,this._superApply=r,s=i.apply(this,arguments),this._super=e,this._superApply=n,s}}())}),o.prototype=t.widget.extend(u,{widgetEventPrefix:e},r,{constructor:o,namespace:a,widgetName:e,widgetBaseClass:i,widgetFullName:i}),s?(t.each(s._childConstructors,function(e,n){var r=n.prototype;t.widget(r.namespace+"."+r.widgetName,o,n._proto)}),delete s._childConstructors):n._childConstructors.push(o),t.widget.bridge(e,o)},t.widget.extend=function(e){var i=r.call(arguments,1),s=0,o=i.length,u,a;for(;s<o;s++)for(u in i[s])a=i[s][u],i[s].hasOwnProperty(u)&&a!==n&&(e[u]=t.isPlainObject(a)?t.widget.extend({},e[u],a):a);return e},t.widget.bridge=function(e,i){var s=i.prototype.widgetFullName;t.fn[e]=function(o){var u=typeof o=="string",a=r.call(arguments,1),f=this;return o=!u&&a.length?t.widget.extend.apply(null,[o].concat(a)):o,u?this.each(function(){var r=t.data(this,s);if(!r)return t.error("cannot call methods on "+e+" prior to initialization; "+"attempted to call method '"+o+"'");if(!t.isFunction(r[o])||o.charAt(0)==="_")return t.error("no such method '"+o+"' for "+e+" widget instance");var i=r[o].apply(r,a);if(i!==r&&i!==n)return f=i&&i.jquery?f.pushStack(i.get()):i,!1}):this.each(function(){var e=t.data(this,s);e?e.option(o||{})._init():new i(o,this)}),f}},t.Widget=function(e,t){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,n){n=t(n||this.defaultElement||this)[0],this.element=t(n),this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this.bindings=t(),this.hoverable=t(),this.focusable=t(),n!==this&&(t.data(n,this.widgetName,this),t.data(n,this.widgetFullName,this),this._bind({remove:"destroy"}),this.document=t(n.style?n.ownerDocument:n.document||n),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind("."+this.widgetName).removeData(this.widgetName).removeData(this.widgetFullName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind("."+this.widgetName),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(e,r){var i=e,s,o,u;if(arguments.length===0)return t.widget.extend({},this.options);if(typeof e=="string"){i={},s=e.split("."),e=s.shift();if(s.length){o=i[e]=t.widget.extend({},this.options[e]);for(u=0;u<s.length-1;u++)o[s[u]]=o[s[u]]||{},o=o[s[u]];e=s.pop();if(r===n)return o[e]===n?null:o[e];o[e]=r}else{if(r===n)return this.options[e]===n?null:this.options[e];i[e]=r}}return this._setOptions(i),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,e==="disabled"&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_bind:function(n,r){r?(n=t(n),this.bindings=this.bindings.add(n)):(r=n,n=this.element);var i=this;t.each(r,function(r,s){function o(){if(i.options.disabled===!0||t(this).hasClass("ui-state-disabled"))return;return(typeof s=="string"?i[s]:s).apply(i,arguments)}typeof s!="string"&&(o.guid=s.guid=s.guid||o.guid||e.guid++);var u=r.match(/^(\w+)\s*(.*)$/),a=u[1]+"."+i.widgetName,f=u[2];f?i.widget().delegate(f,a,o):n.bind(a,o)})},_delay:function(e,t){function n(){return(typeof e=="string"?r[e]:e).apply(r,arguments)}var r=this;return setTimeout(n,t||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._bind(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._bind(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,n,r){var i,s,o=this.options[e];r=r||{},n=t.Event(n),n.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),n.target=this.element[0],s=n.originalEvent;if(s)for(i in s)i in n||(n[i]=s[i]);return this.element.trigger(n,r),!(t.isFunction(o)&&o.apply(this.element[0],[n].concat(r))===!1||n.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,n){t.Widget.prototype["_"+e]=function(r,i,s){typeof i=="string"&&(i={effect:i});var o,u=i?i===!0||typeof i=="number"?n:i.effect||n:e;i=i||{},typeof i=="number"&&(i={duration:i}),o=!t.isEmptyObject(i),i.complete=s,i.delay&&r.delay(i.delay),o&&t.effects&&(t.effects.effect[u]||t.uiBackCompat!==!1&&t.effects[u])?r[e](i):u!==e&&r[u]?r[u](i.duration,i.easing,s):r.queue(function(n){t(this)[e](),s&&s.call(r[0]),n()})}}),t.uiBackCompat!==!1&&(t.Widget.prototype._getCreateOptions=function(){return t.metadata&&t.metadata.get(this.element[0])[this.widgetName]})}(e),function(e,t){e.widget("mobile.widget",{_createWidget:function(){e.Widget.prototype._createWidget.apply(this,arguments),this._trigger("init")},_getCreateOptions:function(){var n=this.element,r={};return e.each(this.options,function(e){var i=n.jqmData(e.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()}));i!==t&&(r[e]=i)}),r},enhanceWithin:function(t,n){this.enhance(e(this.options.initSelector,e(t)),n)},enhance:function(t,n){var r,i,s=e(t),o=this;s=e.mobile.enhanceable(s),n&&s.length&&(r=e.mobile.closestPageData(s),i=r&&r.keepNativeSelector()||"",s=s.not(i)),s[this.widgetName]()},raise:function(e){throw"Widget ["+this.widgetName+"]: "+e}})}(e),function(e,t){e.extend(e.mobile,{loadingMessageTextVisible:r,loadingMessageTheme:r,loadingMessage:r,showPageLoadingMsg:function(t,n,r){e.mobile.loading("show",t,n,r)},hidePageLoadingMsg:function(){e.mobile.loading("hide")},loading:function(){this.loaderWidget.loader.apply(this.loaderWidget,arguments)}});var n="ui-loader",i=e("html"),s=e(t);e.widget("mobile.loader",{options:{theme:"a",textVisible:!1,html:"",text:"loading"},defaultHtml:"<div class='"+n+"'>"+"<span class='ui-icon ui-icon-loading'></span>"+"<h1></h1>"+"</div>",fakeFixLoader:function(){var t=e("."+e.mobile.activeBtnClass).first();this.element.css({top:e.support.scrollTop&&s.scrollTop()+s.height()/2||t.length&&t.offset().top||100})},checkLoaderPosition:function(){var t=this.element.offset(),n=s.scrollTop(),r=e.mobile.getScreenHeight();if(t.top<n||t.top-n>r)this.element.addClass("ui-loader-fakefix"),this.fakeFixLoader(),s.unbind("scroll",this.checkLoaderPosition).bind("scroll",this.fakeFixLoader)},resetHtml:function(){this.element.html(e(this.defaultHtml).html())},show:function(t,o,u){var a,f,l,c;this.resetHtml(),e.type(t)==="object"?(c=e.extend({},this.options,t),t=c.theme||e.mobile.loadingMessageTheme):(c=this.options,t=t||e.mobile.loadingMessageTheme||c.theme),f=o||e.mobile.loadingMessage||c.text,i.addClass("ui-loading");if(e.mobile.loadingMessage!==!1||c.html)e.mobile.loadingMessageTextVisible!==r?a=e.mobile.loadingMessageTextVisible:a=c.textVisible,this.element.attr("class",n+" ui-corner-all ui-body-"+t+" ui-loader-"+(a||o||t.text?"verbose":"default")+(c.textonly||u?" ui-loader-textonly":"")),c.html?this.element.html(c.html):this.element.find("h1").text(f),this.element.appendTo(e.mobile.pageContainer),this.checkLoaderPosition(),s.bind("scroll",e.proxy(this.checkLoaderPosition,this))},hide:function(){i.removeClass("ui-loading"),e.mobile.loadingMessage&&this.element.removeClass("ui-loader-fakefix"),e(t).unbind("scroll",e.proxy(this.fakeFixLoader,this)),e(t).unbind("scroll",e.proxy(this.checkLoaderPosition,this))}}),s.bind("pagecontainercreate",function(){e.mobile.loaderWidget=e.mobile.loaderWidget||e(e.mobile.loader.prototype.defaultHtml).loader()})}(e,this),function(e,t,n,r){function x(e){while(e&&typeof e.originalEvent!="undefined")e=e.originalEvent;return e}function T(t,n){var i=t.type,s,o,a,l,c,h,p,d,v;t=e.Event(t),t.type=n,s=t.originalEvent,o=e.event.props,i.search(/^(mouse|click)/)>-1&&(o=f);if(s)for(p=o.length,l;p;)l=o[--p],t[l]=s[l];i.search(/mouse(down|up)|click/)>-1&&!t.which&&(t.which=1);if(i.search(/^touch/)!==-1){a=x(s),i=a.touches,c=a.changedTouches,h=i&&i.length?i[0]:c&&c.length?c[0]:r;if(h)for(d=0,v=u.length;d<v;d++)l=u[d],t[l]=h[l]}return t}function N(t){var n={},r,s;while(t){r=e.data(t,i);for(s in r)r[s]&&(n[s]=n.hasVirtualBinding=!0);t=t.parentNode}return n}function C(t,n){var r;while(t){r=e.data(t,i);if(r&&(!n||r[n]))return t;t=t.parentNode}return null}function k(){g=!1}function L(){g=!0}function A(){E=0,v.length=0,m=!1,L()}function O(){k()}function M(){_(),c=setTimeout(function(){c=0,A()},e.vmouse.resetTimerDuration)}function _(){c&&(clearTimeout(c),c=0)}function D(t,n,r){var i;if(r&&r[t]||!r&&C(n.target,t))i=T(n,t),e(n.target).trigger(i);return i}function P(t){var n=e.data(t.target,s);if(!m&&(!E||E!==n)){var r=D("v"+t.type,t);r&&(r.isDefaultPrevented()&&t.preventDefault(),r.isPropagationStopped()&&t.stopPropagation(),r.isImmediatePropagationStopped()&&t.stopImmediatePropagation())}}function H(t){var n=x(t).touches,r,i;if(n&&n.length===1){r=t.target,i=N(r);if(i.hasVirtualBinding){E=w++,e.data(r,s,E),_(),O(),d=!1;var o=x(t).touches[0];h=o.pageX,p=o.pageY,D("vmouseover",t,i),D("vmousedown",t,i)}}}function B(e){if(g)return;d||D("vmousecancel",e,N(e.target)),d=!0,M()}function j(t){if(g)return;var n=x(t).touches[0],r=d,i=e.vmouse.moveDistanceThreshold,s=N(t.target);d=d||Math.abs(n.pageX-h)>i||Math.abs(n.pageY-p)>i,d&&!r&&D("vmousecancel",t,s),D("vmousemove",t,s),M()}function F(e){if(g)return;L();var t=N(e.target),n;D("vmouseup",e,t);if(!d){var r=D("vclick",e,t);r&&r.isDefaultPrevented()&&(n=x(e).changedTouches[0],v.push({touchID:E,x:n.clientX,y:n.clientY}),m=!0)}D("vmouseout",e,t),d=!1,M()}function I(t){var n=e.data(t,i),r;if(n)for(r in n)if(n[r])return!0;return!1}function q(){}function R(t){var n=t.substr(1);return{setup:function(r,s){I(this)||e.data(this,i,{});var o=e.data(this,i);o[t]=!0,l[t]=(l[t]||0)+1,l[t]===1&&b.bind(n,P),e(this).bind(n,q),y&&(l.touchstart=(l.touchstart||0)+1,l.touchstart===1&&b.bind("touchstart",H).bind("touchend",F).bind("touchmove",j).bind("scroll",B))},teardown:function(r,s){--l[t],l[t]||b.unbind(n,P),y&&(--l.touchstart,l.touchstart||b.unbind("touchstart",H).unbind("touchmove",j).unbind("touchend",F).unbind("scroll",B));var o=e(this),u=e.data(this,i);u&&(u[t]=!1),o.unbind(n,q),I(this)||o.removeData(i)}}}var i="virtualMouseBindings",s="virtualTouchID",o="vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel".split(" "),u="clientX clientY pageX pageY screenX screenY".split(" "),a=e.event.mouseHooks?e.event.mouseHooks.props:[],f=e.event.props.concat(a),l={},c=0,h=0,p=0,d=!1,v=[],m=!1,g=!1,y="addEventListener"in n,b=e(n),w=1,E=0,S;e.vmouse={moveDistanceThreshold:10,clickDistanceThreshold:10,resetTimerDuration:1500};for(var U=0;U<o.length;U++)e.event.special[o[U]]=R(o[U]);y&&n.addEventListener("click",function(t){var n=v.length,r=t.target,i,o,u,a,f,l;if(n){i=t.clientX,o=t.clientY,S=e.vmouse.clickDistanceThreshold,u=r;while(u){for(a=0;a<n;a++){f=v[a],l=0;if(u===r&&Math.abs(f.x-i)<S&&Math.abs(f.y-o)<S||e.data(u,s)===f.touchID){t.preventDefault(),t.stopPropagation();return}}u=u.parentNode}}},!0)}(e,t,n),function(e,t,r){function f(t,n,r){var i=r.type;r.type=n,e.event.handle.call(t,r),r.type=i}e.each("touchstart touchmove touchend tap taphold swipe swipeleft swiperight scrollstart scrollstop".split(" "),function(t,n){e.fn[n]=function(e){return e?this.bind(n,e):this.trigger(n)},e.attrFn[n]=!0});var i="ontouchend"in n,s="touchmove scroll",o=i?"touchstart":"mousedown",u=i?"touchend":"mouseup",a=i?"touchmove":"mousemove";e.event.special.scrollstart={enabled:!0,setup:function(){function o(e,n){r=n,f(t,r?"scrollstart":"scrollstop",e)}var t=this,n=e(t),r,i;n.bind(s,function(t){if(!e.event.special.scrollstart.enabled)return;r||o(t,!0),clearTimeout(i),i=setTimeout(function(){o(t,!1)},50)})}},e.event.special.tap={tapholdThreshold:750,setup:function(){var t=this,r=e(t);r.bind("vmousedown",function(i){function a(){clearTimeout(u)}function l(){a(),r.unbind("vclick",c).unbind("vmouseup",a),e(n).unbind("vmousecancel",l)}function c(e){l(),s===e.target&&f(t,"tap",e)}if(i.which&&i.which!==1)return!1;var s=i.target,o=i.originalEvent,u;r.bind("vmouseup",a).bind("vclick",c),e(n).bind("vmousecancel",l),u=setTimeout(function(){f(t,"taphold",e.Event("taphold",{target:s}))},e.event.special.tap.tapholdThreshold)})}},e.event.special.swipe={scrollSupressionThreshold:10,durationThreshold:1e3,horizontalDistanceThreshold:30,verticalDistanceThreshold:75,setup:function(){var t=this,n=e(t);n.bind(o,function(t){function f(t){if(!s)return;var n=t.originalEvent.touches?t.originalEvent.touches[0]:t;o={time:(new Date).getTime(),coords:[n.pageX,n.pageY]},Math.abs(s.coords[0]-o.coords[0])>e.event.special.swipe.scrollSupressionThreshold&&t.preventDefault()}var i=t.originalEvent.touches?t.originalEvent.touches[0]:t,s={time:(new Date).getTime(),coords:[i.pageX,i.pageY],origin:e(t.target)},o;n.bind(a,f).one(u,function(t){n.unbind(a,f),s&&o&&o.time-s.time<e.event.special.swipe.durationThreshold&&Math.abs(s.coords[0]-o.coords[0])>e.event.special.swipe.horizontalDistanceThreshold&&Math.abs(s.coords[1]-o.coords[1])<e.event.special.swipe.verticalDistanceThreshold&&s.origin.trigger("swipe").trigger(s.coords[0]>o.coords[0]?"swipeleft":"swiperight"),s=o=r})})}},e.each({scrollstop:"scrollstart",taphold:"tap",swipeleft:"swipe",swiperight:"swipe"},function(t,n){e.event.special[t]={setup:function(){e(this).bind(n,e.noop)}}})}(e,this),function(e,n){e.extend(e.support,{orientation:"orientation"in t&&"onorientationchange"in t})}(e),function(e){e.event.special.throttledresize={setup:function(){e(this).bind("resize",n)},teardown:function(){e(this).unbind("resize",n)}};var t=250,n=function(){s=(new Date).getTime(),o=s-r,o>=t?(r=s,e(this).trigger("throttledresize")):(i&&clearTimeout(i),i=setTimeout(n,t-o))},r=0,i,s,o}(e),function(e,t){function d(){var e=o();e!==u&&(u=e,r.trigger(i))}var r=e(t),i="orientationchange",s,o,u,a,f,l={0:!0,180:!0};if(e.support.orientation){var c=t.innerWidth||e(t).width(),h=t.innerHeight||e(t).height(),p=50;a=c>h&&c-h>p,f=l[t.orientation];if(a&&f||!a&&!f)l={"-90":!0,90:!0}}e.event.special.orientationchange=e.extend({},e.event.special.orientationchange,{setup:function(){if(e.support.orientation&&!e.event.special.orientationchange.disabled)return!1;u=o(),r.bind("throttledresize",d)},teardown:function(){if(e.support.orientation&&!e.event.special.orientationchange.disabled)return!1;r.unbind("throttledresize",d)},add:function(e){var t=e.handler;e.handler=function(e){return e.orientation=o(),t.apply(this,arguments)}}}),e.event.special.orientationchange.orientation=o=function(){var r=!0,i=n.documentElement;return e.support.orientation?r=l[t.orientation]:r=i&&i.clientWidth/i.clientHeight<1.1,r?"portrait":"landscape"},e.fn[i]=function(e){return e?this.bind(i,e):this.trigger(i)},e.attrFn[i]=!0}(e,this),function(e,r){var i=e(t),s=e("html");e.mobile.media=function(){var t={},r=e("<div id='jquery-mediatest'></div>"),i=e("<body>").append(r);return function(e){if(!(e in t)){var o=n.createElement("style"),u="@media "+e+" { #jquery-mediatest { position:absolute; } }";o.type="text/css",o.styleSheet?o.styleSheet.cssText=u:o.appendChild(n.createTextNode(u)),s.prepend(i).prepend(o),t[e]=r.css("position")==="absolute",i.add(o).remove()}return t[e]}}()}(e),function(e,r){function l(e){var t=e.charAt(0).toUpperCase()+e.substr(1),n=(e+" "+o.join(t+" ")+t).split(" ");for(var i in n)if(s[n[i]]!==r)return!0}function c(e,t,r){var i=n.createElement("div"),s=function(e){return e.charAt(0).toUpperCase()+e.substr(1)},u=function(e){return"-"+e.charAt(0).toLowerCase()+e.substr(1)+"-"},a=function(n){var r=u(n)+e+": "+t+";",o=s(n),a=o+s(e);i.setAttribute("style",r),!i.style[a]||(l=!0)},f=r?[r]:o,l;for(var c=0;c<f.length;c++)a(f[c]);return!!l}function h(){var t="transform-3d";return c("perspective","10px","moz")||e.mobile.media("(-"+o.join("-"+t+"),(-")+"-"+t+"),("+t+")")}function p(){var t=location.protocol+"//"+location.host+location.pathname+"ui-dir/",n=e("head base"),r=null,s="",o,u;return n.length?s=n.attr("href"):n=r=e("<base>",{href:t}).appendTo("head"),o=e("<a href='testurl' />").prependTo(i),u=o[0].href,n[0].href=s||location.pathname,r&&r.remove(),u.indexOf(t)===0}function d(){var e=n.createElement("x"),r=n.documentElement,i=t.getComputedStyle,s;return"pointerEvents"in e.style?(e.style.pointerEvents="auto",e.style.pointerEvents="x",r.appendChild(e),s=i&&i(e,"").pointerEvents==="auto",r.removeChild(e),!!s):!1}var i=e("<body>").prependTo("html"),s=i[0].style,o=["Webkit","Moz","O"],u="palmGetResource"in t,a=t.operamini&&{}.toString.call(t.operamini)==="[object OperaMini]",f=t.blackberry;e.extend(e.mobile,{browser:{}}),e.mobile.browser.ie=function(){var e=3,t=n.createElement("div"),r=t.all||[];do t.innerHTML="<!--[if gt IE "+ ++e+"]><br><![endif]-->";while(r[0]);return e>4?e:!e}(),e.extend(e.support,{cssTransitions:"WebKitTransitionEvent"in t||c("transition","height 100ms linear"),pushState:"pushState"in history&&"replaceState"in history,mediaquery:e.mobile.media("only all"),cssPseudoElement:!!l("content"),touchOverflow:!!l("overflowScrolling"),cssTransform3d:h(),boxShadow:!!l("boxShadow")&&!f,scrollTop:("pageXOffset"in t||"scrollTop"in n.documentElement||"scrollTop"in i[0])&&!u&&!a,dynamicBaseTag:p(),cssPointerEvents:d()}),i.remove();var v=function(){var e=t.navigator.userAgent;return e.indexOf("Nokia")>-1&&(e.indexOf("Symbian/3")>-1||e.indexOf("Series60/5")>-1)&&e.indexOf("AppleWebKit")>-1&&e.match(/(BrowserNG|NokiaBrowser)\/7\.[0-3]/)}();e.mobile.gradeA=function(){return e.support.mediaquery||e.mobile.browser.ie&&e.mobile.browser.ie>=7},e.mobile.ajaxBlacklist=t.blackberry&&!t.WebKitPoint||a||v,v&&e(function(){e("head link[rel='stylesheet']").attr("rel","alternate stylesheet").attr("rel","stylesheet")}),e.support.boxShadow||e("html").addClass("ui-mobile-nosupport-boxshadow")}(e),function(e,t){e.widget("mobile.page",e.mobile.widget,{options:{theme:"c",domCache:!1,keepNativeDefault:":jqmData(role='none'), :jqmData(role='nojs')"},_create:function(){var e=this;if(e._trigger("beforecreate")===!1)return!1;e.element.attr("tabindex","0").addClass("ui-page ui-body-"+e.options.theme).bind("pagebeforehide",function(){e.removeContainerBackground()}).bind("pagebeforeshow",function(){e.setContainerBackground()})},removeContainerBackground:function(){e.mobile.pageContainer.removeClass("ui-overlay-"+e.mobile.getInheritedTheme(this.element.parent()))},setContainerBackground:function(t){this.options.theme&&e.mobile.pageContainer.addClass("ui-overlay-"+(t||this.options.theme))},keepNativeSelector:function(){var t=this.options,n=t.keepNative&&e.trim(t.keepNative);return n&&t.keepNative!==t.keepNativeDefault?[t.keepNative,t.keepNativeDefault].join(", "):t.keepNativeDefault}})}(e),function(e,t,r){function l(e){return e=e||location.href,"#"+e.replace(/^[^#]*#?(.*)$/,"$1")}var i="hashchange",s=n,o,u=e.event.special,a=s.documentMode,f="on"+i in t&&(a===r||a>7);e.fn[i]=function(e){return e?this.bind(i,e):this.trigger(i)},e.fn[i].delay=50,u[i]=e.extend(u[i],{setup:function(){if(f)return!1;e(o.start)},teardown:function(){if(f)return!1;e(o.stop)}}),o=function(){function p(){var n=l(),r=h(u);n!==u?(c(u=n,r),e(t).trigger(i)):r!==u&&(location.href=location.href.replace(/#.*/,"")+r),o=setTimeout(p,e.fn[i].delay)}var n={},o,u=l(),a=function(e){return e},c=a,h=a;return n.start=function(){o||p()},n.stop=function(){o&&clearTimeout(o),o=r},e.browser.msie&&!f&&function(){var t,r;n.start=function(){t||(r=e.fn[i].src,r=r&&r+l(),t=e('<iframe tabindex="-1" title="empty"/>').hide().one("load",function(){r||c(l()),p()}).attr("src",r||"javascript:0").insertAfter("body")[0].contentWindow,s.onpropertychange=function(){try{event.propertyName==="title"&&(t.document.title=s.title)}catch(e){}})},n.stop=a,h=function(){return l(t.location.href)},c=function(n,r){var o=t.document,u=e.fn[i].domain;n!==r&&(o.title=s.title,o.open(),u&&o.write('<script>document.domain="'+u+'"</script>'),o.close(),t.location.hash=n)}}(),n}()}(e,this),function(e,t,n){var r=function(r){return r===n&&(r=!0),function(n,i,s,o){var u=new e.Deferred,a=i?" reverse":"",f=e.mobile.urlHistory.getActive(),l=f.lastScroll||e.mobile.defaultHomeScroll,c=e.mobile.getScreenHeight(),h=e.mobile.maxTransitionWidth!==!1&&e(t).width()>e.mobile.maxTransitionWidth,p=!e.support.cssTransitions||h||!n||n==="none"||Math.max(e(t).scrollTop(),l)>e.mobile.getMaxScrollForTransition(),d=" ui-page-pre-in",v=function(){e.mobile.pageContainer.toggleClass("ui-mobile-viewport-transitioning viewport-"+n)},m=function(){e.event.special.scrollstart.enabled=!1,t.scrollTo(0,l),setTimeout(function(){e.event.special.scrollstart.enabled=!0},150)},g=function(){o.removeClass(e.mobile.activePageClass+" out in reverse "+n).height("")},y=function(){r?o.animationComplete(b):b(),o.height(c+e(t).scrollTop()).addClass(n+" out"+a)},b=function(){o&&r&&g(),w()},w=function(){s.css("z-index",-10),s.addClass(e.mobile.activePageClass+d),e.mobile.focusPage(s),s.height(c+l),m(),s.css("z-index",""),p||s.animationComplete(E),s.removeClass(d).addClass(n+" in"+a),p&&E()},E=function(){r||o&&g(),s.removeClass("out in reverse "+n).height(""),v(),e(t).scrollTop()!==l&&m(),u.resolve(n,i,s,o,!0)};return v(),o&&!p?y():b(),u.promise()}},i=r(),s=r(!1);e.mobile.defaultTransitionHandler=i,e.mobile.transitionHandlers={"default":e.mobile.defaultTransitionHandler,sequential:i,simultaneous:s},e.mobile.transitionFallbacks={},e.mobile._maybeDegradeTransition=function(t){return t&&!e.support.cssTransform3d&&e.mobile.transitionFallbacks[t]&&(t=e.mobile.transitionFallbacks[t]),t},e.mobile=e.extend({},{getMaxScrollForTransition:function(){return e.mobile.getScreenHeight()*3}},e.mobile)}(e,this),function(e,r){function w(t){!!a&&(!a.closest("."+e.mobile.activePageClass).length||t)&&a.removeClass(e.mobile.activeBtnClass),a=null}function E(){h=!1,c.length>0&&e.mobile.changePage.apply(null,c.pop())}function N(t,n,r,i){n&&n.data("page")._trigger("beforehide",null,{nextPage:t}),t.data("page")._trigger("beforeshow",null,{prevPage:n||e("")}),e.mobile.hidePageLoadingMsg(),r=e.mobile._maybeDegradeTransition(r);var s=e.mobile.transitionHandlers[r||"default"]||e.mobile.defaultTransitionHandler,o=s(r,i,t,n);return o.done(function(){n&&n.data("page")._trigger("hide",null,{nextPage:t}),t.data("page")._trigger("show",null,{prevPage:n||e("")})}),o}function C(){var t=e("."+e.mobile.activePageClass),n=parseFloat(t.css("padding-top")),r=parseFloat(t.css("padding-bottom")),i=parseFloat(t.css("border-top-width")),s=parseFloat(t.css("border-bottom-width"));t.css("min-height",y()-n-r-i-s)}function k(t,n){n&&t.attr("data-"+e.mobile.ns+"role",n),t.page()}function L(e){while(e){if(typeof e.nodeName=="string"&&e.nodeName.toLowerCase()==="a")break;e=e.parentNode}return e}function A(t){var n=e(t).closest(".ui-page").jqmData("url"),r=m.hrefNoHash;if(!n||!u.isPath(n))n=r;return u.makeUrlAbsolute(n,r)}var i=e(t),s=e("html"),o=e("head"),u={urlParseRE:/^(((([^:\/#\?]+:)?(?:(\/\/)((?:(([^:@\/#\?]+)(?:\:([^:@\/#\?]+))?)@)?(([^:\/#\?\]\[]+|\[[^\/\]@#?]+\])(?:\:([0-9]+))?))?)?)?((\/?(?:[^\/\?#]+\/+)*)([^\?#]*)))?(\?[^#]+)?)(#.*)?/,parseUrl:function(t){if(e.type(t)==="object")return t;var n=u.urlParseRE.exec(t||"")||[];return{href:n[0]||"",hrefNoHash:n[1]||"",hrefNoSearch:n[2]||"",domain:n[3]||"",protocol:n[4]||"",doubleSlash:n[5]||"",authority:n[6]||"",username:n[8]||"",password:n[9]||"",host:n[10]||"",hostname:n[11]||"",port:n[12]||"",pathname:n[13]||"",directory:n[14]||"",filename:n[15]||"",search:n[16]||"",hash:n[17]||""}},makePathAbsolute:function(e,t){if(e&&e.charAt(0)==="/")return e;e=e||"",t=t?t.replace(/^\/|(\/[^\/]*|[^\/]+)$/g,""):"";var n=t?t.split("/"):[],r=e.split("/");for(var i=0;i<r.length;i++){var s=r[i];switch(s){case".":break;case"..":n.length&&n.pop();break;default:n.push(s)}}return"/"+n.join("/")},isSameDomain:function(e,t){return u.parseUrl(e).domain===u.parseUrl(t).domain},isRelativeUrl:function(e){return u.parseUrl(e).protocol===""},isAbsoluteUrl:function(e){return u.parseUrl(e).protocol!==""},makeUrlAbsolute:function(e,t){if(!u.isRelativeUrl(e))return e;var n=u.parseUrl(e),r=u.parseUrl(t),i=n.protocol||r.protocol,s=n.protocol?n.doubleSlash:n.doubleSlash||r.doubleSlash,o=n.authority||r.authority,a=n.pathname!=="",f=u.makePathAbsolute(n.pathname||r.filename,r.pathname),l=n.search||!a&&r.search||"",c=n.hash;return i+s+o+f+l+c},addSearchParams:function(t,n){var r=u.parseUrl(t),i=typeof n=="object"?e.param(n):n,s=r.search||"?";return r.hrefNoSearch+s+(s.charAt(s.length-1)!=="?"?"&":"")+i+(r.hash||"")},convertUrlToDataUrl:function(e){var n=u.parseUrl(e);return u.isEmbeddedPage(n)?n.hash.split(p)[0].replace(/^#/,""):u.isSameDomain(n,m)?n.hrefNoHash.replace(m.domain,"").split(p)[0]:t.decodeURIComponent(e)},get:function(e){return e===r&&(e=location.hash),u.stripHash(e).replace(/[^\/]*\.[^\/*]+$/,"")},getFilePath:function(t){var n="&"+e.mobile.subPageUrlKey;return t&&t.split(n)[0].split(p)[0]},set:function(e){location.hash=e},isPath:function(e){return/\//.test(e)},clean:function(e){return e.replace(m.domain,"")},stripHash:function(e){return e.replace(/^#/,"")},cleanHash:function(e){return u.stripHash(e.replace(/\?.*$/,"").replace(p,""))},isHashValid:function(e){return/^#[^#]+$/.test(e)},isExternal:function(e){var t=u.parseUrl(e);return t.protocol&&t.domain!==v.domain?!0:!1},hasProtocol:function(e){return/^(:?\w+:)/.test(e)},isFirstPageUrl:function(t){var n=u.parseUrl(u.makeUrlAbsolute(t,m)),i=n.hrefNoHash===v.hrefNoHash||g&&n.hrefNoHash===m.hrefNoHash,s=e.mobile.firstPage,o=s&&s[0]?s[0].id:r;return i&&(!n.hash||n.hash==="#"||o&&n.hash.replace(/^#/,"")===o)},isEmbeddedPage:function(e){var t=u.parseUrl(e);return t.protocol!==""?t.hash&&(t.hrefNoHash===v.hrefNoHash||g&&t.hrefNoHash===m.hrefNoHash):/^#/.test(t.href)},isPermittedCrossDomainRequest:function(t,n){return e.mobile.allowCrossDomainPages&&t.protocol==="file:"&&n.search(/^https?:/)!==-1}},a=null,f={stack:[],activeIndex:0,getActive:function(){return f.stack[f.activeIndex]},getPrev:function(){return f.stack[f.activeIndex-1]},getNext:function(){return f.stack[f.activeIndex+1]},addNew:function(e,t,n,r,i){f.getNext()&&f.clearForward(),f.stack.push({url:e,transition:t,title:n,pageUrl:r,role:i}),f.activeIndex=f.stack.length-1},clearForward:function(){f.stack=f.stack.slice(0,f.activeIndex+1)},directHashChange:function(t){var n,i,s,o=this.getActive();e.each(f.stack,function(e,r){t.currentUrl===r.url&&(n=e<f.activeIndex,i=!n,s=e)}),this.activeIndex=s!==r?s:this.activeIndex,n?(t.either||t.isBack)(!0):i&&(t.either||t.isForward)(!1)},ignoreNextHashChange:!1},l="[tabindex],a,button:visible,select:visible,input",c=[],h=!1,p="&ui-state=dialog",d=o.children("base"),v=u.parseUrl(location.href),m=d.length?u.parseUrl(u.makeUrlAbsolute(d.attr("href"),v.href)):v,g=v.hrefNoHash!==m.hrefNoHash,y=e.mobile.getScreenHeight,b=e.support.dynamicBaseTag?{element:d.length?d:e("<base>",{href:m.hrefNoHash}).prependTo(o),set:function(e){b.element.attr("href",u.makeUrlAbsolute(e,m))},reset:function(){b.element.attr("href",m.hrefNoHash)}}:r;e.mobile.focusPage=function(e){var t=e.find("[autofocus]"),n=e.find(".ui-title:eq(0)");if(t.length){t.focus();return}n.length?n.focus():e.focus()};var S=!0,x,T;x=function(){if(!S)return;var t=e.mobile.urlHistory.getActive();if(t){var n=i.scrollTop();t.lastScroll=n<e.mobile.minScrollBack?e.mobile.defaultHomeScroll:n}},T=function(){setTimeout(x,100)},i.bind(e.support.pushState?"popstate":"hashchange",function(){S=!1}),i.one(e.support.pushState?"popstate":"hashchange",function(){S=!0}),i.one("pagecontainercreate",function(){e.mobile.pageContainer.bind("pagechange",function(){S=!0,i.unbind("scrollstop",T),i.bind("scrollstop",
T)})}),i.bind("scrollstop",T),e.mobile._maybeDegradeTransition=e.mobile._maybeDegradeTransition||function(e){return e},e.fn.animationComplete=function(t){return e.support.cssTransitions?e(this).one("webkitAnimationEnd animationend",t):(setTimeout(t,0),e(this))},e.mobile.path=u,e.mobile.base=b,e.mobile.urlHistory=f,e.mobile.dialogHashKey=p,e.mobile.allowCrossDomainPages=!1,e.mobile.getDocumentUrl=function(t){return t?e.extend({},v):v.href},e.mobile.getDocumentBase=function(t){return t?e.extend({},m):m.href},e.mobile._bindPageRemove=function(){var t=e(this);!t.data("page").options.domCache&&t.is(":jqmData(external-page='true')")&&t.bind("pagehide.remove",function(){var t=e(this),n=new e.Event("pageremove");t.trigger(n),n.isDefaultPrevented()||t.removeWithDependents()})},e.mobile.loadPage=function(t,n){var i=e.Deferred(),s=e.extend({},e.mobile.loadPage.defaults,n),o=null,a=null,f=function(){var t=e.mobile.activePage&&A(e.mobile.activePage);return t||m.hrefNoHash},l=u.makeUrlAbsolute(t,f());s.data&&s.type==="get"&&(l=u.addSearchParams(l,s.data),s.data=r),s.data&&s.type==="post"&&(s.reloadPage=!0);var c=u.getFilePath(l),h=u.convertUrlToDataUrl(l);s.pageContainer=s.pageContainer||e.mobile.pageContainer,o=s.pageContainer.children(":jqmData(url='"+h+"')"),o.length===0&&h&&!u.isPath(h)&&(o=s.pageContainer.children("#"+h).attr("data-"+e.mobile.ns+"url",h).jqmData("url",h));if(o.length===0)if(e.mobile.firstPage&&u.isFirstPageUrl(c))e.mobile.firstPage.parent().length&&(o=e(e.mobile.firstPage));else if(u.isEmbeddedPage(c))return i.reject(l,n),i.promise();b&&b.reset();if(o.length){if(!s.reloadPage)return k(o,s.role),i.resolve(l,n,o),i.promise();a=o}var p=s.pageContainer,d=new e.Event("pagebeforeload"),g={url:t,absUrl:l,dataUrl:h,deferred:i,options:s};p.trigger(d,g);if(d.isDefaultPrevented())return i.promise();if(s.showLoadMsg)var y=setTimeout(function(){e.mobile.showPageLoadingMsg()},s.loadMsgDelay),w=function(){clearTimeout(y),e.mobile.hidePageLoadingMsg()};return!e.mobile.allowCrossDomainPages&&!u.isSameDomain(v,l)?i.reject(l,n):e.ajax({url:c,type:s.type,data:s.data,dataType:"html",success:function(r,f,p){var d=e("<div></div>"),v=r.match(/<title[^>]*>([^<]*)/)&&RegExp.$1,m=new RegExp("(<[^>]+\\bdata-"+e.mobile.ns+"role=[\"']?page[\"']?[^>]*>)"),y=new RegExp("\\bdata-"+e.mobile.ns+"url=[\"']?([^\"'>]*)[\"']?");m.test(r)&&RegExp.$1&&y.test(RegExp.$1)&&RegExp.$1&&(t=c=u.getFilePath(e("<div>"+RegExp.$1+"</div>").text())),b&&b.set(c),d.get(0).innerHTML=r,o=d.find(":jqmData(role='page'), :jqmData(role='dialog')").first(),o.length||(o=e("<div data-"+e.mobile.ns+"role='page'>"+r.split(/<\/?body[^>]*>/gmi)[1]+"</div>")),v&&!o.jqmData("title")&&(~v.indexOf("&")&&(v=e("<div>"+v+"</div>").text()),o.jqmData("title",v));if(!e.support.dynamicBaseTag){var E=u.get(c);o.find("[src], link[href], a[rel='external'], :jqmData(ajax='false'), a[target]").each(function(){var t=e(this).is("[href]")?"href":e(this).is("[src]")?"src":"action",n=e(this).attr(t);n=n.replace(location.protocol+"//"+location.host+location.pathname,""),/^(\w+:|#|\/)/.test(n)||e(this).attr(t,E+n)})}o.attr("data-"+e.mobile.ns+"url",u.convertUrlToDataUrl(c)).attr("data-"+e.mobile.ns+"external-page",!0).appendTo(s.pageContainer),o.one("pagecreate",e.mobile._bindPageRemove),k(o,s.role),l.indexOf("&"+e.mobile.subPageUrlKey)>-1&&(o=s.pageContainer.children(":jqmData(url='"+h+"')")),s.showLoadMsg&&w(),g.xhr=p,g.textStatus=f,g.page=o,s.pageContainer.trigger("pageload",g),i.resolve(l,n,o,a)},error:function(t,r,o){b&&b.set(u.get()),g.xhr=t,g.textStatus=r,g.errorThrown=o;var a=new e.Event("pageloadfailed");s.pageContainer.trigger(a,g);if(a.isDefaultPrevented())return;s.showLoadMsg&&(w(),e.mobile.showPageLoadingMsg(e.mobile.pageLoadErrorMessageTheme,e.mobile.pageLoadErrorMessage,!0),setTimeout(e.mobile.hidePageLoadingMsg,1500)),i.reject(l,n)}}),i.promise()},e.mobile.loadPage.defaults={type:"get",data:r,reloadPage:!1,role:r,showLoadMsg:!1,pageContainer:r,loadMsgDelay:50},e.mobile.changePage=function(t,i){if(h){c.unshift(arguments);return}var s=e.extend({},e.mobile.changePage.defaults,i);s.pageContainer=s.pageContainer||e.mobile.pageContainer,s.fromPage=s.fromPage||e.mobile.activePage;var o=s.pageContainer,a=new e.Event("pagebeforechange"),l={toPage:t,options:s};o.trigger(a,l);if(a.isDefaultPrevented())return;t=l.toPage,h=!0;if(typeof t=="string"){e.mobile.loadPage(t,s).done(function(t,n,r,i){h=!1,n.duplicateCachedPage=i,e.mobile.changePage(r,n)}).fail(function(e,t){h=!1,w(!0),E(),s.pageContainer.trigger("pagechangefailed",l)});return}t[0]===e.mobile.firstPage[0]&&!s.dataUrl&&(s.dataUrl=v.hrefNoHash);var d=s.fromPage,m=s.dataUrl&&u.convertUrlToDataUrl(s.dataUrl)||t.jqmData("url"),g=m,y=u.getFilePath(m),b=f.getActive(),S=f.activeIndex===0,x=0,T=n.title,C=s.role==="dialog"||t.jqmData("role")==="dialog";if(d&&d[0]===t[0]&&!s.allowSamePageTransition){h=!1,o.trigger("pagechange",l),s.fromHashChange&&f.directHashChange({currentUrl:m,isBack:function(){},isForward:function(){}});return}k(t,s.role),s.fromHashChange&&f.directHashChange({currentUrl:m,isBack:function(){x=-1},isForward:function(){x=1}});try{n.activeElement&&n.activeElement.nodeName.toLowerCase()!=="body"?e(n.activeElement).blur():e("input:focus, textarea:focus, select:focus").blur()}catch(L){}var A=!1;C&&b&&(b.url&&b.url.indexOf(p)>-1&&!e.mobile.activePage.is(".ui-dialog")&&(s.changeHash=!1,A=!0),m=(b.url||"")+p,f.activeIndex===0&&m===f.initialDst&&(m+=p)),s.changeHash!==!1&&m&&(f.ignoreNextHashChange=!0,u.set(m));var O=b?t.jqmData("title")||t.children(":jqmData(role='header')").find(".ui-title").getEncodedText():T;!!O&&T===n.title&&(T=O),t.jqmData("title")||t.jqmData("title",T),s.transition=s.transition||(x&&!S?b.transition:r)||(C?e.mobile.defaultDialogTransition:e.mobile.defaultPageTransition),!x&&!A&&f.addNew(m,s.transition,T,g,s.role),n.title=f.getActive().title,e.mobile.activePage=t,s.reverse=s.reverse||x<0,N(t,d,s.transition,s.reverse).done(function(n,r,i,u,a){w(),s.duplicateCachedPage&&s.duplicateCachedPage.remove(),a||e.mobile.focusPage(t),E(),o.trigger("pagechange",l)})},e.mobile.changePage.defaults={transition:r,reverse:!1,changeHash:!0,fromHashChange:!1,role:r,duplicateCachedPage:r,pageContainer:r,showLoadMsg:!0,dataUrl:r,fromPage:r,allowSamePageTransition:!1},e.mobile.navreadyDeferred=e.Deferred(),e.mobile.navreadyDeferred.done(function(){e(n).delegate("form","submit",function(t){var n=e(this);if(!e.mobile.ajaxEnabled||n.is(":jqmData(ajax='false')")||!n.jqmHijackable().length)return;var r=n.attr("method"),i=n.attr("target"),s=n.attr("action");s||(s=A(n),s===m.hrefNoHash&&(s=v.hrefNoSearch)),s=u.makeUrlAbsolute(s,A(n));if(u.isExternal(s)&&!u.isPermittedCrossDomainRequest(v,s)||i)return;e.mobile.changePage(s,{type:r&&r.length&&r.toLowerCase()||"get",data:n.serialize(),transition:n.jqmData("transition"),reverse:n.jqmData("direction")==="reverse",reloadPage:!0}),t.preventDefault()}),e(n).bind("vclick",function(t){if(t.which>1||!e.mobile.linkBindingEnabled)return;var n=L(t.target);if(!e(n).jqmHijackable().length)return;n&&u.parseUrl(n.getAttribute("href")||"#").hash!=="#"&&(w(!0),a=e(n).closest(".ui-btn").not(".ui-disabled"),a.addClass(e.mobile.activeBtnClass))}),e(n).bind("click",function(n){if(!e.mobile.linkBindingEnabled)return;var i=L(n.target),s=e(i),o;if(!i||n.which>1||!s.jqmHijackable().length)return;o=function(){t.setTimeout(function(){w(!0)},200)};if(s.is(":jqmData(rel='back')"))return t.history.back(),!1;var a=A(s),f=u.makeUrlAbsolute(s.attr("href")||"#",a);if(!e.mobile.ajaxEnabled&&!u.isEmbeddedPage(f)){o();return}if(f.search("#")!==-1){f=f.replace(/[^#]*#/,"");if(!f){n.preventDefault();return}u.isPath(f)?f=u.makeUrlAbsolute(f,a):f=u.makeUrlAbsolute("#"+f,v.hrefNoHash)}var l=s.is("[rel='external']")||s.is(":jqmData(ajax='false')")||s.is("[target]"),c=l||u.isExternal(f)&&!u.isPermittedCrossDomainRequest(v,f);if(c){o();return}var h=s.jqmData("transition"),p=s.jqmData("direction")==="reverse"||s.jqmData("back"),d=s.attr("data-"+e.mobile.ns+"rel")||r;d==="popup"?e.mobile.popup.handleLink(s):e.mobile.changePage(f,{transition:h,reverse:p,role:d}),n.preventDefault()}),e(n).delegate(".ui-page","pageshow.prefetch",function(){var t=[];e(this).find("a:jqmData(prefetch)").each(function(){var n=e(this),r=n.attr("href");r&&e.inArray(r,t)===-1&&(t.push(r),e.mobile.loadPage(r,{role:n.attr("data-"+e.mobile.ns+"rel")}))})}),e.mobile._handleHashChange=function(n){var i=u.stripHash(n),s=e.mobile.urlHistory.stack.length===0?"none":r,o={transition:s,changeHash:!1,fromHashChange:!0};0===f.stack.length&&(f.initialDst=i);if(!e.mobile.hashListeningEnabled||f.ignoreNextHashChange){f.ignoreNextHashChange=!1;return}if(f.stack.length>1&&i.indexOf(p)>-1&&f.initialDst!==i){if(!e.mobile.activePage.is(".ui-dialog")){f.directHashChange({currentUrl:i,isBack:function(){t.history.back()},isForward:function(){t.history.forward()}});return}f.directHashChange({currentUrl:i,either:function(t){var n=e.mobile.urlHistory.getActive();i=n.pageUrl,e.extend(o,{role:n.role,transition:n.transition,reverse:t})}})}i?(i=typeof i=="string"&&!u.isPath(i)?u.makeUrlAbsolute("#"+i,m):i,e.mobile.changePage(i,o)):e.mobile.changePage(e.mobile.firstPage,o)},i.bind("hashchange",function(t,n){e.mobile._handleHashChange(location.hash)}),e(n).bind("pageshow",C),e(t).bind("throttledresize",C)})}(e),function(e,t){var i={},s=i,o=e(t),u=e.mobile.path.parseUrl(location.href),a=e.Deferred(),f=e.Deferred();e(n).ready(e.proxy(f,"resolve")),e(n).one("mobileinit",e.proxy(a,"resolve")),e.extend(i,{initialFilePath:function(){return u.pathname+u.search}(),hashChangeTimeout:200,hashChangeEnableTimer:r,initialHref:u.hrefNoHash,state:function(){return{hash:location.hash||"#"+s.initialFilePath,title:n.title,initialHref:s.initialHref}},resetUIKeys:function(t){var n=e.mobile.dialogHashKey,r="&"+e.mobile.subPageUrlKey,i=t.indexOf(n);return i>-1?t=t.slice(0,i)+"#"+t.slice(i):t.indexOf(r)>-1&&(t=t.split(r).join("#"+r)),t},nextHashChangePrevented:function(t){e.mobile.urlHistory.ignoreNextHashChange=t,s.onHashChangeDisabled=t},onHashChange:function(t){if(s.onHashChangeDisabled)return;var r,i,o=location.hash,u=e.mobile.path.isPath(o),a=u?location.href:e.mobile.getDocumentUrl();o=u?o.replace("#",""):o,i=s.state(),r=e.mobile.path.makeUrlAbsolute(o,a),u&&(r=s.resetUIKeys(r)),history.replaceState(i,n.title,r)},onPopState:function(t){var n=t.originalEvent.state,r,i,o;n&&(clearTimeout(s.hashChangeEnableTimer),s.nextHashChangePrevented(!1),e.mobile._handleHashChange(n.hash),s.nextHashChangePrevented(!0),s.hashChangeEnableTimer=setTimeout(function(){s.nextHashChangePrevented(!1)},s.hashChangeTimeout))},init:function(){o.bind("hashchange",s.onHashChange),o.bind("popstate",s.onPopState),location.hash===""&&history.replaceState(s.state(),n.title,location.href)}}),e.when(f,a,e.mobile.navreadyDeferred).done(function(){e.mobile.pushStateEnabled&&e.support.pushState&&i.init()})}(e,this),function(e,t,n){e.mobile.transitionFallbacks.flip="fade"}(e,this),function(e,t,n){e.mobile.transitionFallbacks.flow="fade"}(e,this),function(e,t,n){e.mobile.transitionFallbacks.pop="fade"}(e,this),function(e,t,n){e.mobile.transitionHandlers.slide=e.mobile.transitionHandlers.simultaneous,e.mobile.transitionFallbacks.slide="fade"}(e,this),function(e,t,n){e.mobile.transitionFallbacks.slidedown="fade"}(e,this),function(e,t,n){e.mobile.transitionFallbacks.slidefade="fade"}(e,this),function(e,t,n){e.mobile.transitionFallbacks.slideup="fade"}(e,this),function(e,t,n){e.mobile.transitionFallbacks.turn="fade"}(e,this),function(e,t){e.mobile.page.prototype.options.degradeInputs={color:!1,date:!1,datetime:!1,"datetime-local":!1,email:!1,month:!1,number:!1,range:"number",search:"text",tel:!1,time:!1,url:!1,week:!1},e(n).bind("pagecreate create",function(t){var n=e.mobile.closestPageData(e(t.target)),r;if(!n)return;r=n.options,e(t.target).find("input").not(n.keepNativeSelector()).each(function(){var t=e(this),n=this.getAttribute("type"),i=r.degradeInputs[n]||"text";if(r.degradeInputs[n]){var s=e("<div>").html(t.clone()).html(),o=s.indexOf(" type=")>-1,u=o?/\s+type=["']?\w+['"]?/:/\/?>/,a=' type="'+i+'" data-'+e.mobile.ns+'type="'+n+'"'+(o?"":">");t.replaceWith(s.replace(u,a))}})})}(e),function(e,t,r){e.widget("mobile.dialog",e.mobile.widget,{options:{closeBtnText:"Close",overlayTheme:"a",initSelector:":jqmData(role='dialog')"},_create:function(){var t=this,n=this.element,r=e("<a href='#' data-"+e.mobile.ns+"icon='delete' data-"+e.mobile.ns+"iconpos='notext'>"+this.options.closeBtnText+"</a>"),i=e("<div/>",{role:"dialog","class":"ui-dialog-contain ui-corner-all ui-overlay-shadow"});n.addClass("ui-dialog ui-overlay-"+this.options.overlayTheme),n.wrapInner(i).children().find(":jqmData(role='header')").prepend(r).end().children(":first-child").addClass("ui-corner-top").end().children(":last-child").addClass("ui-corner-bottom"),r.bind("click",function(){t.close()}),n.bind("vclick submit",function(t){var n=e(t.target).closest(t.type==="vclick"?"a":"form"),r;n.length&&!n.jqmData("transition")&&(r=e.mobile.urlHistory.getActive()||{},n.attr("data-"+e.mobile.ns+"transition",r.transition||e.mobile.defaultDialogTransition).attr("data-"+e.mobile.ns+"direction","reverse"))}).bind("pagehide",function(n,r){t._isClosed=!1,e(this).find("."+e.mobile.activeBtnClass).not(".ui-slider-bg").removeClass(e.mobile.activeBtnClass)}).bind("pagebeforeshow",function(){t.options.overlayTheme&&t.element.page("removeContainerBackground").page("setContainerBackground",t.options.overlayTheme)})},close:function(){this._isClosed||(this._isClosed=!0,e.mobile.hashListeningEnabled?t.history.back():e.mobile.changePage(e.mobile.urlHistory.getPrev().url))}}),e(n).delegate(e.mobile.dialog.prototype.options.initSelector,"pagecreate",function(){e.mobile.dialog.prototype.enhance(this)})}(e,this),function(e,t){e.mobile.page.prototype.options.backBtnText="Back",e.mobile.page.prototype.options.addBackBtn=!1,e.mobile.page.prototype.options.backBtnTheme=null,e.mobile.page.prototype.options.headerTheme="a",e.mobile.page.prototype.options.footerTheme="a",e.mobile.page.prototype.options.contentTheme=null,e(n).bind("pagecreate",function(t){var n=e(t.target),r=n.data("page").options,i=n.jqmData("role"),s=r.theme;e(":jqmData(role='header'), :jqmData(role='footer'), :jqmData(role='content')",n).jqmEnhanceable().each(function(){var t=e(this),u=t.jqmData("role"),a=t.jqmData("theme"),f=a||r.contentTheme||i==="dialog"&&s,l,c,h,p;t.addClass("ui-"+u);if(u==="header"||u==="footer"){var d=a||(u==="header"?r.headerTheme:r.footerTheme)||s;t.addClass("ui-bar-"+d).attr("role",u==="header"?"banner":"contentinfo"),u==="header"&&(l=t.children("a"),c=l.hasClass("ui-btn-left"),h=l.hasClass("ui-btn-right"),c=c||l.eq(0).not(".ui-btn-right").addClass("ui-btn-left").length,h=h||l.eq(1).addClass("ui-btn-right").length),r.addBackBtn&&u==="header"&&e(".ui-page").length>1&&n.jqmData("url")!==e.mobile.path.stripHash(location.hash)&&!c&&(p=e("<a href='javascript:void(0);' class='ui-btn-left' data-"+e.mobile.ns+"rel='back' data-"+e.mobile.ns+"icon='arrow-l'>"+r.backBtnText+"</a>").attr("data-"+e.mobile.ns+"theme",r.backBtnTheme||d).prependTo(t)),t.children("h1, h2, h3, h4, h5, h6").addClass("ui-title").attr({role:"heading","aria-level":"1"})}else u==="content"&&(f&&t.addClass("ui-body-"+f),t.attr("role","main"))})})}(e),function(e,t){e.fn.fieldcontain=function(e){return this.addClass("ui-field-contain ui-body ui-br").contents().filter(function(){return this.nodeType===3&&!/\S/.test(this.nodeValue)}).remove()},e(n).bind("pagecreate create",function(t){e(":jqmData(role='fieldcontain')",t.target).jqmEnhanceable().fieldcontain()})}(e),function(e,t){e.fn.grid=function(t){return this.each(function(){var n=e(this),r=e.extend({grid:null},t),i=n.children(),s={solo:1,a:2,b:3,c:4,d:5},o=r.grid,u;if(!o)if(i.length<=5)for(var a in s)s[a]===i.length&&(o=a);else o="a",n.addClass("ui-grid-duo");u=s[o],n.addClass("ui-grid-"+o),i.filter(":nth-child("+u+"n+1)").addClass("ui-block-a"),u>1&&i.filter(":nth-child("+u+"n+2)").addClass("ui-block-b"),u>2&&i.filter(":nth-child(3n+3)").addClass("ui-block-c"),u>3&&i.filter(":nth-child(4n+4)").addClass("ui-block-d"),u>4&&i.filter(":nth-child(5n+5)").addClass("ui-block-e")})}}(e),function(e,t){e(n).bind("pagecreate create",function(t){e(":jqmData(role='nojs')",t.target).addClass("ui-nojs")})}(e),function(e,t){function r(e){var t;while(e){t=typeof e.className=="string"&&e.className+" ";if(t&&t.indexOf("ui-btn ")>-1&&t.indexOf("ui-disabled ")<0)break;e=e.parentNode}return e}e.fn.buttonMarkup=function(r){var s=this,o=function(t,n){f.setAttribute("data-"+e.mobile.ns+t,n),a.jqmData(t,n)};r=r&&e.type(r)==="object"?r:{};for(var u=0;u<s.length;u++){var a=s.eq(u),f=a[0],l=e.extend({},e.fn.buttonMarkup.defaults,{icon:r.icon!==t?r.icon:a.jqmData("icon"),iconpos:r.iconpos!==t?r.iconpos:a.jqmData("iconpos"),theme:r.theme!==t?r.theme:a.jqmData("theme")||e.mobile.getInheritedTheme(a,"c"),inline:r.inline!==t?r.inline:a.jqmData("inline"),shadow:r.shadow!==t?r.shadow:a.jqmData("shadow"),corners:r.corners!==t?r.corners:a.jqmData("corners"),iconshadow:r.iconshadow!==t?r.iconshadow:a.jqmData("iconshadow"),mini:r.mini!==t?r.mini:a.jqmData("mini")},r),c="ui-btn-inner",h="ui-btn-text",p,d,v,m,g,y;e.each(l,o),a.jqmData("rel")==="popup"&&a.attr("href")&&(f.setAttribute("aria-haspopup",!0),f.setAttribute("aria-owns",f.getAttribute("href"))),y=e.data(f.tagName==="INPUT"||f.tagName==="BUTTON"?f.parentNode:f,"buttonElements"),y?(f=y.outer,a=e(f),v=y.inner,m=y.text,e(y.icon).remove(),y.icon=null):(v=n.createElement(l.wrapperEls),m=n.createElement(l.wrapperEls)),g=l.icon?n.createElement("span"):null,i&&!y&&i(),l.theme||(l.theme=e.mobile.getInheritedTheme(a,"c")),p="ui-btn ui-btn-up-"+l.theme,p+=l.shadow?" ui-shadow":"",p+=l.corners?" ui-btn-corner-all":"",l.mini!==t&&(p+=l.mini===!0?" ui-mini":" ui-fullsize"),l.inline!==t&&(p+=l.inline===!0?" ui-btn-inline":" ui-btn-block"),l.icon&&(l.icon="ui-icon-"+l.icon,l.iconpos=l.iconpos||"left",d="ui-icon "+l.icon,l.iconshadow&&(d+=" ui-icon-shadow")),l.iconpos&&(p+=" ui-btn-icon-"+l.iconpos,l.iconpos==="notext"&&!a.attr("title")&&a.attr("title",a.getEncodedText())),c+=l.corners?" ui-btn-corner-all":"",l.iconpos&&l.iconpos==="notext"&&!a.attr("title")&&a.attr("title",a.getEncodedText()),y&&a.removeClass(y.bcls||""),a.removeClass("ui-link").addClass(p),v.className=c,m.className=h,y||v.appendChild(m);if(g){g.className=d;if(!y||!y.icon)g.appendChild(n.createTextNode("")),v.appendChild(g)}while(f.firstChild&&!y)m.appendChild(f.firstChild);y||f.appendChild(v),y={bcls:p,outer:f,inner:v,text:m,icon:g},e.data(f,"buttonElements",y),e.data(v,"buttonElements",y),e.data(m,"buttonElements",y),g&&e.data(g,"buttonElements",y)}return this},e.fn.buttonMarkup.defaults={corners:!0,shadow:!0,iconshadow:!0,wrapperEls:"span"};var i=function(){var t=e.mobile.buttonMarkup.hoverDelay,s,o;e(n).bind({"vmousedown vmousecancel vmouseup vmouseover vmouseout focus blur scrollstart":function(n){var i,u=e(r(n.target)),a=n.originalEvent&&/^touch/.test(n.originalEvent.type),f=n.type;if(u.length){i=u.attr("data-"+e.mobile.ns+"theme");if(f==="vmousedown")a?s=setTimeout(function(){u.removeClass("ui-btn-up-"+i).addClass("ui-btn-down-"+i)},t):u.removeClass("ui-btn-up-"+i).addClass("ui-btn-down-"+i);else if(f==="vmousecancel"||f==="vmouseup")u.removeClass("ui-btn-down-"+i).addClass("ui-btn-up-"+i);else if(f==="vmouseover"||f==="focus")a?o=setTimeout(function(){u.removeClass("ui-btn-up-"+i).addClass("ui-btn-hover-"+i)},t):u.removeClass("ui-btn-up-"+i).addClass("ui-btn-hover-"+i);else if(f==="vmouseout"||f==="blur"||f==="scrollstart")u.removeClass("ui-btn-hover-"+i+" ui-btn-down-"+i).addClass("ui-btn-up-"+i),s&&clearTimeout(s),o&&clearTimeout(o)}},"focusin focus":function(t){e(r(t.target)).addClass(e.mobile.focusClass)},"focusout blur":function(t){e(r(t.target)).removeClass(e.mobile.focusClass)}}),i=null};e(n).bind("pagecreate create",function(t){e(":jqmData(role='button'), .ui-bar > a, .ui-header > a, .ui-footer > a, .ui-bar > :jqmData(role='controlgroup') > a",t.target).not("button, input, .ui-btn, :jqmData(role='none'), :jqmData(role='nojs')").buttonMarkup()})}(e),function(e,t){e.widget("mobile.collapsible",e.mobile.widget,{options:{expandCueText:" click to expand contents",collapseCueText:" click to collapse contents",collapsed:!0,heading:"h1,h2,h3,h4,h5,h6,legend",theme:null,contentTheme:null,mini:!1,initSelector:":jqmData(role='collapsible')"},_create:function(){var t=this.element,n=this.options,r=t.addClass("ui-collapsible"),i=t.children(n.heading).first(),s=t.jqmData("collapsed-icon")||n.collapsedIcon,o=t.jqmData("expanded-icon")||n.expandedIcon,u=r.wrapInner("<div class='ui-collapsible-content'></div>").children(".ui-collapsible-content"),a=t.closest(":jqmData(role='collapsible-set')").addClass("ui-collapsible-set");i.is("legend")&&(i=e("<div role='heading'>"+i.html()+"</div>").insertBefore(i),i.next().remove()),a.length&&(n.theme||(n.theme=a.jqmData("theme")||e.mobile.getInheritedTheme(a,"c")),n.contentTheme||(n.contentTheme=a.jqmData("content-theme")),n.collapsedIcon||(n.collapsedIcon=a.jqmData("collapsed-icon")),n.expandedIcon||(n.expandedIcon=a.jqmData("expanded-icon")),n.iconPos||(n.iconPos=a.jqmData("iconpos")),n.mini||(n.mini=a.jqmData("mini"))),u.addClass(n.contentTheme?"ui-body-"+n.contentTheme:""),s=t.jqmData("collapsed-icon")||n.collapsedIcon||"plus",o=t.jqmData("expanded-icon")||n.expandedIcon||"minus",i.insertBefore(u).addClass("ui-collapsible-heading").append("<span class='ui-collapsible-heading-status'></span>").wrapInner("<a href='#' class='ui-collapsible-heading-toggle'></a>").find("a").first().buttonMarkup({shadow:!1,corners:!1,iconpos:t.jqmData("iconpos")||n.iconPos||"left",icon:s,mini:n.mini,theme:n.theme}).add(".ui-btn-inner",t).addClass("ui-corner-top ui-corner-bottom"),r.bind("expand collapse",function(t){if(!t.isDefaultPrevented()){var f=e(this),l=t.type==="collapse",c=n.contentTheme;t.preventDefault(),i.toggleClass("ui-collapsible-heading-collapsed",l).find(".ui-collapsible-heading-status").text(l?n.expandCueText:n.collapseCueText).end().find(".ui-icon").toggleClass("ui-icon-"+o,!l).toggleClass("ui-icon-"+s,l).end().find("a").first().removeClass(e.mobile.activeBtnClass),f.toggleClass("ui-collapsible-collapsed",l),u.toggleClass("ui-collapsible-content-collapsed",l).attr("aria-hidden",l),c&&(!a.length||r.jqmData("collapsible-last"))&&(i.find("a").first().add(i.find(".ui-btn-inner")).toggleClass("ui-corner-bottom",l),u.toggleClass("ui-corner-bottom",!l)),u.trigger("updatelayout")}}).trigger(n.collapsed?"collapse":"expand"),i.bind("tap",function(t){i.find("a").first().addClass(e.mobile.activeBtnClass)}).bind("click",function(e){var t=i.is(".ui-collapsible-heading-collapsed")?"expand":"collapse";r.trigger(t),e.preventDefault(),e.stopPropagation()})}}),e(n).bind("pagecreate create",function(t){e.mobile.collapsible.prototype.enhanceWithin(t.target)})}(e),function(e,t){e.widget("mobile.collapsibleset",e.mobile.widget,{options:{initSelector:":jqmData(role='collapsible-set')"},_create:function(){var n=this.element.addClass("ui-collapsible-set"),r=this.options;r.theme||(r.theme=e.mobile.getInheritedTheme(n,"c")),r.contentTheme||(r.contentTheme=n.jqmData("content-theme")),r.corners||(r.corners=n.jqmData("corners")===t?!0:!1),n.jqmData("collapsiblebound")||n.jqmData("collapsiblebound",!0).bind("expand collapse",function(t){var n=t.type==="collapse",r=e(t.target).closest(".ui-collapsible"),i=r.data("collapsible");r.jqmData("collapsible-last")&&(r.find(i.options.heading).first().find("a").first().toggleClass("ui-corner-bottom",n).find(".ui-btn-inner").toggleClass("ui-corner-bottom",n),r.find(".ui-collapsible-content").toggleClass("ui-corner-bottom",!n))}).bind("expand",function(t){var n=e(t.target).closest(".ui-collapsible");n.parent().is(":jqmData(role='collapsible-set')")&&n.siblings(".ui-collapsible").trigger("collapse")})},_init:function(){var e=this.element,t=e.children(":jqmData(role='collapsible')"),n=t.filter(":jqmData(collapsed='false')");this.refresh(),n.trigger("expand")},refresh:function(){var t=this.element,n=this.options,r=t.children(":jqmData(role='collapsible')");e.mobile.collapsible.prototype.enhance(r.not(".ui-collapsible")),r.each(function(){e(this).find(e.mobile.collapsible.prototype.options.heading).find("a").first().removeClass("ui-corner-top ui-corner-bottom").find(".ui-btn-inner").removeClass("ui-corner-top ui-corner-bottom")}),r.first().find("a").first().addClass(n.corners?"ui-corner-top":"").find(".ui-btn-inner").addClass("ui-corner-top"),r.last().jqmData("collapsible-last",!0).find("a").first().addClass(n.corners?"ui-corner-bottom":"").find(".ui-btn-inner").addClass("ui-corner-bottom")}}),e(n).bind("pagecreate create",function(t){e.mobile.collapsibleset.prototype.enhanceWithin(t.target)})}(e),function(e,t){e.widget("mobile.navbar",e.mobile.widget,{options:{iconpos:"top",grid:null,initSelector:":jqmData(role='navbar')"},_create:function(){var n=this.element,r=n.find("a"),i=r.filter(":jqmData(icon)").length?this.options.iconpos:t;n.addClass("ui-navbar ui-mini").attr("role","navigation").find("ul").jqmEnhanceable().grid({grid:this.options.grid}),r.buttonMarkup({corners:!1,shadow:!1,inline:!0,iconpos:i}),n.delegate("a","vclick",function(t){e(t.target).hasClass("ui-disabled")||(r.removeClass(e.mobile.activeBtnClass),e(this).addClass(e.mobile.activeBtnClass))}),n.closest(".ui-page").bind("pagebeforeshow",function(){r.filter(".ui-state-persist").addClass(e.mobile.activeBtnClass)})}}),e(n).bind("pagecreate create",function(t){e.mobile.navbar.prototype.enhanceWithin(t.target)})}(e),function(e,t){var r={};e.widget("mobile.listview",e.mobile.widget,{options:{theme:null,countTheme:"c",headerTheme:"b",dividerTheme:"b",splitIcon:"arrow-r",splitTheme:"b",inset:!1,initSelector:":jqmData(role='listview')"},_create:function(){var e=this,t="";t+=e.options.inset?" ui-listview-inset ui-corner-all ui-shadow ":"",e.element.addClass(function(e,n){return n+" ui-listview "+t}),e.refresh(!0)},_removeCorners:function(e,t){var n="ui-corner-top ui-corner-tr ui-corner-tl",r="ui-corner-bottom ui-corner-br ui-corner-bl";e=e.add(e.find(".ui-btn-inner, .ui-li-link-alt, .ui-li-thumb")),t==="top"?e.removeClass(n):t==="bottom"?e.removeClass(r):e.removeClass(n+" "+r)},_refreshCorners:function(e){var t,n,r,i;this.options.inset&&(t=this.element.children("li"),n=e?t.not(".ui-screen-hidden"):t.filter(":visible"),this._removeCorners(t),r=n.first().addClass("ui-corner-top"),r.add(r.find(".ui-btn-inner").not(".ui-li-link-alt span:first-child")).addClass("ui-corner-top").end().find(".ui-li-link-alt, .ui-li-link-alt span:first-child").addClass("ui-corner-tr").end().find(".ui-li-thumb").not(".ui-li-icon").addClass("ui-corner-tl"),i=n.last().addClass("ui-corner-bottom"),i.add(i.find(".ui-btn-inner")).find(".ui-li-link-alt").addClass("ui-corner-br").end().find(".ui-li-thumb").not(".ui-li-icon").addClass("ui-corner-bl")),e||this.element.trigger("updatelayout")},_findFirstElementByTagName:function(e,t,n,r){var i={};i[n]=i[r]=!0;while(e){if(i[e.nodeName])return e;e=e[t]}return null},_getChildrenByTagName:function(t,n,r){var i=[],s={};s[n]=s[r]=!0,t=t.firstChild;while(t)s[t.nodeName]&&i.push(t),t=t.nextSibling;return e(i)},_addThumbClasses:function(t){var n,r,i=t.length;for(n=0;n<i;n++)r=e(this._findFirstElementByTagName(t[n].firstChild,"nextSibling","img","IMG")),r.length&&(r.addClass("ui-li-thumb"),e(this._findFirstElementByTagName(r[0].parentNode,"parentNode","li","LI")).addClass(r.is(".ui-li-icon")?"ui-li-has-icon":"ui-li-has-thumb"))},refresh:function(t){this.parentPage=this.element.closest(".ui-page"),this._createSubPages();var r=this.options,i=this.element,s=this,o=i.jqmData("dividertheme")||r.dividerTheme,u=i.jqmData("splittheme"),a=i.jqmData("spliticon"),f=this._getChildrenByTagName(i[0],"li","LI"),l=e.support.cssPseudoElement||!e.nodeName(i[0],"ol")?0:1,c={},h,p,d,v,m,g,y,b,w,E,S;l&&i.find(".ui-li-dec").remove(),r.theme||(r.theme=e.mobile.getInheritedTheme(this.element,"c"));for(var x=0,T=f.length;x<T;x++){h=f.eq(x),p="ui-li";if(t||!h.hasClass("ui-li")){d=h.jqmData("theme")||r.theme,v=this._getChildrenByTagName(h[0],"a","A");var N=h.jqmData("role")==="list-divider";v.length&&!N?(b=h.jqmData("icon"),h.buttonMarkup({wrapperEls:"div",shadow:!1,corners:!1,iconpos:"right",icon:v.length>1||b===!1?!1:b||"arrow-r",theme:d}),b!==!1&&v.length===1&&h.addClass("ui-li-has-arrow"),v.first().removeClass("ui-link").addClass("ui-link-inherit"),v.length>1&&(p+=" ui-li-has-alt",m=v.last(),g=u||m.jqmData("theme")||r.splitTheme,S=m.jqmData("icon"),m.appendTo(h).attr("title",m.getEncodedText()).addClass("ui-li-link-alt").empty().buttonMarkup({shadow:!1,corners:!1,theme:d,icon:!1,iconpos:"notext"}).find(".ui-btn-inner").append(e(n.createElement("span")).buttonMarkup({shadow:!0,corners:!0,theme:g,iconpos:"notext",icon:S||b||a||r.splitIcon})))):N?(p+=" ui-li-divider ui-bar-"+o,h.attr("role","heading"),l&&(l=1)):p+=" ui-li-static ui-body-"+d}l&&p.indexOf("ui-li-divider")<0&&(y=h.is(".ui-li-static:first")?h:h.find(".ui-link-inherit"),y.addClass("ui-li-jsnumbering").prepend("<span class='ui-li-dec'>"+l++ +". </span>")),c[p]||(c[p]=[]),c[p].push(h[0])}for(p in c)e(c[p]).addClass(p).children(".ui-btn-inner").addClass(p);i.find("h1, h2, h3, h4, h5, h6").addClass("ui-li-heading").end().find("p, dl").addClass("ui-li-desc").end().find(".ui-li-aside").each(function(){var t=e(this);t.prependTo(t.parent())}).end().find(".ui-li-count").each(function(){e(this).closest("li").addClass("ui-li-has-count")}).addClass("ui-btn-up-"+(i.jqmData("counttheme")||this.options.countTheme)+" ui-btn-corner-all"),this._addThumbClasses(f),this._addThumbClasses(i.find(".ui-link-inherit")),this._refreshCorners(t),this._trigger("afterrefresh")},_idStringEscape:function(e){return e.replace(/[^a-zA-Z0-9]/g,"-")},_createSubPages:function(){var t=this.element,n=t.closest(".ui-page"),i=n.jqmData("url"),s=i||n[0][e.expando],o=t.attr("id"),u=this.options,a="data-"+e.mobile.ns,f=this,l=n.find(":jqmData(role='footer')").jqmData("id"),c;typeof r[s]=="undefined"&&(r[s]=-1),o=o||++r[s],e(t.find("li>ul, li>ol").toArray().reverse()).each(function(n){var r=this,s=e(this),f=s.attr("id")||o+"-"+n,h=s.parent(),p=e(s.prevAll().toArray().reverse()),d=p.length?p:e("<span>"+e.trim(h.contents()[0].nodeValue)+"</span>"),v=d.first().getEncodedText(),m=(i||"")+"&"+e.mobile.subPageUrlKey+"="+f,g=s.jqmData("theme")||u.theme,y=s.jqmData("counttheme")||t.jqmData("counttheme")||u.countTheme,b,w;c=!0,b=s.detach().wrap("<div "+a+"role='page' "+a+"url='"+m+"' "+a+"theme='"+g+"' "+a+"count-theme='"+y+"'><div "+a+"role='content'></div></div>").parent().before("<div "+a+"role='header' "+a+"theme='"+u.headerTheme+"'><div class='ui-title'>"+v+"</div></div>").after(l?e("<div "+a+"role='footer' "+a+"id='"+l+"'>"):"").parent().appendTo(e.mobile.pageContainer),b.page(),w=h.find("a:first"),w.length||(w=e("<a/>").html(d||v).prependTo(h.empty())),w.attr("href","#"+m)}).listview();if(c&&n.is(":jqmData(external-page='true')")&&n.data("page").options.domCache===!1){var h=function(t,r){var s=r.nextPage,o,u=new e.Event("pageremove");r.nextPage&&(o=s.jqmData("url"),o.indexOf(i+"&"+e.mobile.subPageUrlKey)!==0&&(f.childPages().remove(),n.trigger(u),u.isDefaultPrevented()||n.removeWithDependents()))};n.unbind("pagehide.remove").bind("pagehide.remove",h)}},childPages:function(){var t=this.parentPage.jqmData("url");return e(":jqmData(url^='"+t+"&"+e.mobile.subPageUrlKey+"')")}}),e(n).bind("pagecreate create",function(t){e.mobile.listview.prototype.enhanceWithin(t.target)})}(e),function(e,t){e.mobile.listview.prototype.options.autodividers=!1,e.mobile.listview.prototype.options.autodividersSelector=function(e){var t=e.find("a").text()||e.text()||null;return t?(t=t.slice(0,1).toUpperCase(),t):null},e(n).delegate("ul,ol","listviewcreate",function(){var t=e(this),r=t.data("listview");if(!r.options.autodividers)return;var i=function(){t.find("li:jqmData(role=list-divider)").remove();var i=t.find("li"),s=null,o,u;for(var a=0;a<i.length;a++){o=i[a],u=r.options.autodividersSelector(e(o));if(u&&s!==u){var f=n.createElement("li");f.appendChild(n.createTextNode(u)),f.setAttribute("data-"+e.mobile.ns+"role","list-divider"),o.parentNode.insertBefore(f,o)}s=u}},s=function(){t.unbind("listviewafterrefresh",s),i(),r.refresh(),t.bind("listviewafterrefresh",s)};s()})}(e),function(e,t){e.widget("mobile.checkboxradio",e.mobile.widget,{options:{theme:null,initSelector:"input[type='checkbox'],input[type='radio']"},_create:function(){var r=this,i=this.element,s=function(e,t){return e.jqmData(t)||e.closest("form,fieldset").jqmData(t)},o=e(i).closest("label"),u=o.length?o:e(i).closest("form,fieldset,:jqmData(role='page'),:jqmData(role='dialog')").find("label").filter("[for='"+i[0].id+"']"),a=i[0].type,f=s(i,"mini"
),l=a+"-on",c=a+"-off",h=i.parents(":jqmData(type='horizontal')").length?t:c,p=s(i,"iconpos"),d=h?"":" "+e.mobile.activeBtnClass,v="ui-"+l+d,m="ui-"+c,g="ui-icon-"+l,y="ui-icon-"+c;if(a!=="checkbox"&&a!=="radio")return;e.extend(this,{label:u,inputtype:a,checkedClass:v,uncheckedClass:m,checkedicon:g,uncheckedicon:y}),this.options.theme||(this.options.theme=e.mobile.getInheritedTheme(this.element,"c")),u.buttonMarkup({theme:this.options.theme,icon:h,shadow:!1,mini:f,iconpos:p});var b=n.createElement("div");b.className="ui-"+a,i.add(u).wrapAll(b),u.bind({vmouseover:function(t){e(this).parent().is(".ui-disabled")&&t.stopPropagation()},vclick:function(e){if(i.is(":disabled")){e.preventDefault();return}return r._cacheVals(),i.prop("checked",a==="radio"&&!0||!i.prop("checked")),i.triggerHandler("click"),r._getInputSet().not(i).prop("checked",!1),r._updateAll(),!1}}),i.bind({vmousedown:function(){r._cacheVals()},vclick:function(){var t=e(this);t.is(":checked")?(t.prop("checked",!0),r._getInputSet().not(t).prop("checked",!1)):t.prop("checked",!1),r._updateAll()},focus:function(){u.addClass(e.mobile.focusClass)},blur:function(){u.removeClass(e.mobile.focusClass)}}),this.refresh()},_cacheVals:function(){this._getInputSet().each(function(){e(this).jqmData("cacheVal",this.checked)})},_getInputSet:function(){return this.inputtype==="checkbox"?this.element:this.element.closest("form,fieldset,:jqmData(role='page'),:jqmData(role='dialog')").find("input[name='"+this.element[0].name+"'][type='"+this.inputtype+"']")},_updateAll:function(){var t=this;this._getInputSet().each(function(){var n=e(this);(this.checked||t.inputtype==="checkbox")&&n.trigger("change")}).checkboxradio("refresh")},refresh:function(){var e=this.element[0],t=this.label,n=t.find(".ui-icon");e.checked?(t.addClass(this.checkedClass).removeClass(this.uncheckedClass),n.addClass(this.checkedicon).removeClass(this.uncheckedicon)):(t.removeClass(this.checkedClass).addClass(this.uncheckedClass),n.removeClass(this.checkedicon).addClass(this.uncheckedicon)),e.disabled?this.disable():this.enable()},disable:function(){this.element.prop("disabled",!0).parent().addClass("ui-disabled")},enable:function(){this.element.prop("disabled",!1).parent().removeClass("ui-disabled")}}),e(n).bind("pagecreate create",function(t){e.mobile.checkboxradio.prototype.enhanceWithin(t.target,!0)})}(e),function(e,t){e.widget("mobile.button",e.mobile.widget,{options:{theme:null,icon:null,iconpos:null,corners:!0,shadow:!0,iconshadow:!0,initSelector:"button, [type='button'], [type='submit'], [type='reset']"},_create:function(){var r=this.element,i,s=this.options,o,u,a=s.inline||r.jqmData("inline"),f=s.mini||r.jqmData("mini"),l="",c;if(r[0].tagName==="A"){r.hasClass("ui-btn")||r.buttonMarkup();return}this.options.theme||(this.options.theme=e.mobile.getInheritedTheme(this.element,"c")),!~r[0].className.indexOf("ui-btn-left")||(l="ui-btn-left"),!~r[0].className.indexOf("ui-btn-right")||(l="ui-btn-right");if(r.attr("type")==="submit"||r.attr("type")==="reset")l+="ui-submit";e("label[for='"+r.attr("id")+"']").addClass("ui-submit"),this.button=e("<div></div>")[r.html()?"html":"text"](r.html()||r.val()).insertBefore(r).buttonMarkup({theme:s.theme,icon:s.icon,iconpos:s.iconpos,inline:a,corners:s.corners,shadow:s.shadow,iconshadow:s.iconshadow,mini:f}).addClass(l).append(r.addClass("ui-btn-hidden")),i=this.button,o=r.attr("type"),u=r.attr("name"),o!=="button"&&o!=="reset"&&u&&r.bind("vclick",function(){c===t&&(c=e("<input>",{type:"hidden",name:r.attr("name"),value:r.attr("value")}).insertBefore(r),e(n).one("submit",function(){c.remove(),c=t}))}),r.bind({focus:function(){i.addClass(e.mobile.focusClass)},blur:function(){i.removeClass(e.mobile.focusClass)}}),this.refresh()},enable:function(){return this.element.attr("disabled",!1),this.button.removeClass("ui-disabled").attr("aria-disabled",!1),this._setOption("disabled",!1)},disable:function(){return this.element.attr("disabled",!0),this.button.addClass("ui-disabled").attr("aria-disabled",!0),this._setOption("disabled",!0)},refresh:function(){var t=this.element;t.prop("disabled")?this.disable():this.enable(),e(this.button.data("buttonElements").text)[t.html()?"html":"text"](t.html()||t.val())}}),e(n).bind("pagecreate create",function(t){e.mobile.button.prototype.enhanceWithin(t.target,!0)})}(e),function(e,t){e.fn.controlgroup=function(t){function n(e,t){e.removeClass("ui-btn-corner-all ui-corner-top ui-corner-bottom ui-corner-left ui-corner-right ui-controlgroup-last ui-shadow").eq(0).addClass(t[0]).end().last().addClass(t[1]).addClass("ui-controlgroup-last")}return this.each(function(){var r=e(this),i=e.extend({direction:r.jqmData("type")||"vertical",shadow:!1,excludeInvisible:!0,mini:r.jqmData("mini")},t),s=r.children("legend"),o=i.direction==="horizontal"?["ui-corner-left","ui-corner-right"]:["ui-corner-top","ui-corner-bottom"],u=r.find("input").first().attr("type");r.wrapInner("<div class='ui-controlgroup-controls'></div>"),s.length&&(e("<div role='heading' class='ui-controlgroup-label'>"+s.html()+"</div>").insertBefore(r.children(0)),s.remove()),r.addClass("ui-corner-all ui-controlgroup ui-controlgroup-"+i.direction),n(r.find(".ui-btn"+(i.excludeInvisible?":visible":"")).not(".ui-slider-handle"),o),n(r.find(".ui-btn-inner"),o),i.shadow&&r.addClass("ui-shadow"),i.mini&&r.addClass("ui-mini")})}}(e),function(e,t){e(n).bind("pagecreate create",function(t){e(t.target).find("a").jqmEnhanceable().not(".ui-btn, .ui-link-inherit, :jqmData(role='none'), :jqmData(role='nojs')").addClass("ui-link")})}(e),function(e,r){function i(e,t,n,r){var i=r;return e<t?i=n+(e-t)/2:i=Math.min(Math.max(n,r-t/2),n+e-t),i}e.widget("mobile.popup",e.mobile.widget,{options:{theme:null,overlayTheme:null,shadow:!0,corners:!0,transition:e.mobile.defaultDialogTransition,initSelector:":jqmData(role='popup')"},_create:function(){var n={screen:e("<div class='ui-screen-hidden ui-popup-screen fade'></div>"),placeholder:e("<div style='display: none;'><!-- placeholder --></div>"),container:e("<div class='ui-popup-container ui-selectmenu-hidden'></div>")},i=function(e){e.preventDefault(),e.stopImmediatePropagation(),u.close()},s=this.element.closest(".ui-page"),o=this.element.attr("id"),u=this;s.length===0&&(s=e("body")),s.append(n.screen),n.container.insertAfter(n.screen),n.placeholder.insertAfter(this.element),o&&n.placeholder.html("<!-- placeholder for "+o+" -->"),n.container.append(this.element),e.extend(this,{_page:s,_ui:n,_fallbackTransition:"",_currentTransition:!1,_prereqs:null,_isOpen:!1,_globalHandlers:[{src:e(t),handler:{resize:function(e){u._isOpen&&u._resizeScreen()},keyup:function(t){u._isOpen&&t.keyCode===e.mobile.keyCode.ESCAPE&&i(t)}}}]}),e.each(this.options,function(e,t){u.options[e]=r,u._setOption(e,t,!0)}),n.screen.bind("vclick",function(e){i(e)}),e.each(this._globalHandlers,function(e,t){t.src.bind(t.handler)})},_resizeScreen:function(){this._ui.screen.height(Math.max(e(t).height(),this._page.height()))},_applyTheme:function(e,t){var n=(e.attr("class")||"").split(" "),r=!0,i=null,s,o=String(t);while(n.length>0){i=n.pop(),s=i.match(/^ui-body-([a-z])$/);if(s&&s.length>1){i=s[1];break}i=null}t!==i&&(e.removeClass("ui-body-"+i),t!==null&&t!=="none"&&e.addClass("ui-body-"+o))},_setTheme:function(e){this._applyTheme(this._ui.container,e)},_setOverlayTheme:function(t){this._applyTheme(this._ui.screen,t),e.mobile.browser.ie&&this._ui.screen.toggleClass("ui-popup-screen-background-hack",this._ui.screen.css("background-color")==="transparent"&&this._ui.screen.css("background-image")==="none"&&this._ui.screen.css("background")===r)},_setShadow:function(e){this._ui.container.toggleClass("ui-overlay-shadow",e)},_setCorners:function(e){this._ui.container.toggleClass("ui-corner-all",e)},_applyTransition:function(t){this._ui.container.removeClass(this._fallbackTransition),t&&t!=="none"&&(this._fallbackTransition=e.mobile._maybeDegradeTransition(t),this._ui.container.addClass(this._fallbackTransition))},_setTransition:function(e){this._currentTransition||this._applyTransition(e)},_setOption:function(t,n){var i="_set"+t.replace(/^[a-z]/,function(e){return e.toUpperCase()});this[i]!==r?(this[i](n),this.options[t]=n,this.element.attr("data-"+(e.mobile.ns||"")+t.replace(/([A-Z])/,"-$1").toLowerCase(),n)):e.mobile.widget.prototype._setOption.apply(this,arguments)},_placementCoords:function(n,r){var s={l:10,t:30,r:10,b:30},o={l:s.l,t:e(t).scrollTop()+s.t,cx:e(t).width()-s.l-s.r,cy:e(t).height()-s.t-s.b},u;return this._ui.container.css("max-width",o.cx),u={cx:this._ui.container.outerWidth(!0),cy:this._ui.container.outerHeight(!0)},{x:i(o.cx,u.cx,o.l,n),y:i(o.cy,u.cy,o.t,r)}},_immediate:function(){this._prereqs&&e.each(this._prereqs,function(e,t){t.resolve()})},_createPrereqs:function(t,n,r){var i=this,s;s={screen:e.Deferred(function(e){e.then(function(){s===i._prereqs&&t()})}),container:e.Deferred(function(e){e.then(function(){s===i._prereqs&&n()})})},e.when(s.screen,s.container).done(function(){s===i._prereqs&&(i._prereqs=null,r())}),i._prereqs=s},_animate:function(e){var t=this;t.options.overlayTheme&&e.additionalCondition?t._ui.screen.removeClass(e.classToRemove).addClass(e.screenClassToAdd).animationComplete(function(){e.prereqs.screen.resolve()}):e.prereqs.screen.resolve(),e.transition&&e.transition!=="none"?(e.applyTransition&&t._applyTransition(e.transition),t._ui.container.addClass(e.containerClassToAdd).removeClass(e.classToRemove).animationComplete(function(){e.prereqs.container.resolve()})):e.prereqs.container.resolve()},_open:function(n,i,s){var o=this,u=o._placementCoords(r===n?t.innerWidth/2:n,r===i?t.innerHeight/2:i);o._createPrereqs(e.noop,function(){o._applyTransition("none"),o._ui.container.removeClass("in"),o._resizeScreen()},function(){o._isOpen=!0,o._ui.container.attr("tabindex","0").focus(),o.element.trigger("opened")}),s?(o._currentTransition=s,o._applyTransition(s)):s=o.options.transition,o.options.theme||o._setTheme(o._page.jqmData("theme")||e.mobile.getInheritedTheme(o._page,"c")),o._resizeScreen(),o._ui.screen.removeClass("ui-screen-hidden"),o._ui.container.removeClass("ui-selectmenu-hidden").offset({left:u.x,top:u.y}),o._animate({additionalCondition:!0,transition:s,classToRemove:"",screenClassToAdd:"in",containerClassToAdd:"in",applyTransition:!1,prereqs:o._prereqs})},_close:function(){var e=this,t=e._currentTransition?e._currentTransition:e.options.transition;this._isOpen=!1,e._createPrereqs(function(){e._ui.screen.removeClass("out").addClass("ui-screen-hidden")},function(){e._ui.container.removeClass("reverse out").addClass("ui-selectmenu-hidden").removeAttr("style")},function(){e._ui.container.removeAttr("tabindex"),e.element.trigger("closed")}),e._animate({additionalCondition:e._ui.screen.hasClass("in"),transition:t,classToRemove:"in",screenClassToAdd:"out",containerClassToAdd:"reverse out",applyTransition:!0,prereqs:e._prereqs})},_destroy:function(){this.element.insertAfter(this._ui.placeholder),this._ui.screen.remove(),this._ui.container.remove(),this._ui.placeholder.remove(),e.each(this._globalHandlers,function(t,n){e.each(n.handler,function(e,t){n.src.unbind(e,t)})})},open:function(t,n,r){e.mobile.popup.popupManager.push(this,arguments)},close:function(){e.mobile.popup.popupManager.pop(this)}}),e.mobile.popup.popupManager={_actionQueue:[],_inProgress:!1,_haveNavHook:!1,_currentlyOpenPopup:null,_myOwnHashChange:!1,_myUrl:"",_navHook:function(n){function s(){e(t).one("hashchange.popup",function(){r._onHashChange()}),n()}var r=this,i;r._myUrl=e.mobile.activePage.jqmData("url"),e.mobile.pageContainer.one("pagebeforechange.popup",function(e,t){var n,i;typeof t.toPage=="string"?n=t.toPage:n=t.toPage.jqmData("url"),n&&(i=n.pathname+n.search+n.hash,r._myUrl!==i&&r._onHashChange(!0))});if(e.mobile.hashListeningEnabled){var o=e.mobile.urlHistory.getActive(),u,a=e.mobile.activePage.is(".ui-dialog"),f=o.url.indexOf(e.mobile.dialogHashKey)>-1&&!a;e.mobile.urlHistory.activeIndex===0?u=e.mobile.defaultDialogTransition:u=o.transition,f?s():(e(t).one("hashchange.popupBinder",function(){s()}),i=o.url+e.mobile.dialogHashKey,e.mobile.urlHistory.activeIndex===0&&i===e.mobile.urlHistory.initialDst&&(i+=e.mobile.dialogHashKey),e.mobile.urlHistory.ignoreNextHashChange=a,e.mobile.path.set(i),e.mobile.urlHistory.addNew(i,u,o.title,o.pageUrl,o.role))}else n()},_navUnhook:function(n){n&&e(t).unbind("hashchange.popupBinder hashchange.popup"),e.mobile.hashListeningEnabled&&!n?t.history.back():this._onHashChange(),e.mobile.activePage.unbind("pagebeforechange.popup")},_inArray:function(t){var n=this,r=-1;return e.each(n._actionQueue,function(e,n){return n.open===t.open&&n.popup===t.popup?(r=e,!1):!0}),r},_completeAction:function(){var e=this,t=e._actionQueue.shift();e._currentlyOpenPopup=t.open?t.popup:null,e._actionQueue.length===0&&!t.open&&e._haveNavHook?(e._haveNavHook=!1,e._myOwnHashChange=!0,e._navUnhook(t.abort)):e._inProgress=!1,e._actionQueue.length>0&&e._runSingleAction()},_continueWithAction:function(){var n=this,i,s,o,u=!1;if(n._actionQueue[0].open){if(n._currentlyOpenPopup){n._actionQueue.unshift({open:!1,popup:n._currentlyOpenPopup}),n._inProgress=!1,n._runSingleAction();return}i="opened",s="_open",o=n._actionQueue[0].args}else i="closed",s="_close",o=[];n._yScroll!==r&&n._actionQueue[0].open&&n._yScroll!==e(t).scrollTop()&&t.scrollTo(0,n._yScroll),n._yScroll=e(t).scrollTop(),n._actionQueue[0].waitingForPopup=!0,n._actionQueue[0].popup.element.one(i,function(){n._completeAction(),u=!0}),n._actionQueue[0].popup[s].apply(n._actionQueue[0].popup,o),!u&&n._actionQueue[0].abort&&n._actionQueue[0].popup._immediate()},_runSingleAction:function(){var e=this;e._inProgress||(e._inProgress=!0,e._haveNavHook||!e._actionQueue[0].open?e._continueWithAction():e._navHook(function(){e._haveNavHook=!0,e._continueWithAction()}))},push:function(e,t){var n=this,r={open:!0,popup:e,args:t},i=n._inArray(r);if(-1===i)if(n._currentlyOpenPopup===e){var s={open:!1,popup:e},o=n._inArray(s);o!==-1&&(0===o&&n._inProgress?n._actionQueue.push(r):n._actionQueue.splice(o,1),n._runSingleAction())}else n._actionQueue.push(r),n._runSingleAction()},pop:function(e){var t=this,n={open:!1,popup:e},r=t._inArray(n);if(-1===r){var i={open:!0,popup:e},s=t._inArray(i);s!==-1?0===s?(t._actionQueue.splice(1,0,n),t._runSingleAction()):t._actionQueue.splice(s,1):t._currentlyOpenPopup===e&&(t._actionQueue.length===0?(t._actionQueue.push(n),t._runSingleAction()):(t._actionQueue.splice(t._inProgress?1:0,0,n),t._runSingleAction()))}},_onHashChange:function(t){this._haveNavHook=!1,this._yScroll=r,e(this).trigger("done");if(this._myOwnHashChange)this._myOwnHashChange=!1,this._inProgress=!1;else{var n=this._currentlyOpenPopup;this._inProgress?(this._actionQueue=[this._actionQueue[0]],this._actionQueue[0].open?(n=this._actionQueue[0].popup,t&&this._actionQueue[0].waitingForPopup&&this._actionQueue[0].popup._immediate()):n=null):this._actionQueue=[],n&&this._actionQueue.push({open:!1,popup:n})}this._actionQueue.length>0&&(e.each(this._actionQueue,function(e,n){n.abort=t}),this._runSingleAction())}},e.mobile.popup.handleLink=function(t){var n=t.closest(":jqmData(role='page')"),r=n.length===0?e("body"):n,i=e(t.attr("href"),r[0]),s;i.data("popup")&&(s=t.offset(),i.popup("open",s.left+t.outerWidth()/2,s.top+t.outerHeight()/2,t.jqmData("transition")),t.parents(".ui-popup-container").length===0&&e(e.mobile.popup.popupManager).one("done",function(){t.focus()})),setTimeout(function(){t.removeClass(e.mobile.activeBtnClass)},300)},e(n).bind("pagecreate create",function(t){e.mobile.popup.prototype.enhanceWithin(t.target,!0)})}(e),function(e){var t=e("meta[name=viewport]"),n=t.attr("content"),r=n+",maximum-scale=1, user-scalable=no",i=n+",maximum-scale=10, user-scalable=yes",s=/(user-scalable[\s]*=[\s]*no)|(maximum-scale[\s]*=[\s]*1)[$,\s]/.test(n);e.mobile.zoom=e.extend({},{enabled:!s,locked:!1,disable:function(n){!s&&!e.mobile.zoom.locked&&(t.attr("content",r),e.mobile.zoom.enabled=!1,e.mobile.zoom.locked=n||!1)},enable:function(n){!s&&(!e.mobile.zoom.locked||n===!0)&&(t.attr("content",i),e.mobile.zoom.enabled=!0,e.mobile.zoom.locked=!1)},restore:function(){s||(t.attr("content",n),e.mobile.zoom.enabled=!0)}})}(e),function(e,r){e.widget("mobile.textinput",e.mobile.widget,{options:{theme:null,preventFocusZoom:/iPhone|iPad|iPod/.test(navigator.platform)&&navigator.userAgent.indexOf("AppleWebKit")>-1,initSelector:"input[type='text'], input[type='search'], :jqmData(type='search'), input[type='number'], :jqmData(type='number'), input[type='password'], input[type='email'], input[type='url'], input[type='tel'], textarea, input[type='time'], input[type='date'], input[type='month'], input[type='week'], input[type='datetime'], input[type='datetime-local'], input[type='color'], input:not([type])",clearSearchButtonText:"clear text"},_create:function(){function c(){setTimeout(function(){l.toggleClass("ui-input-clear-hidden",!r.val())},0)}var r=this.element,i=this.options,s=i.theme||e.mobile.getInheritedTheme(this.element,"c"),o=" ui-body-"+s,u=r.jqmData("mini")===!0,a=u?" ui-mini":"",f,l;e("label[for='"+r.attr("id")+"']").addClass("ui-input-text"),f=r.addClass("ui-input-text ui-body-"+s),typeof r[0].autocorrect!="undefined"&&!e.support.touchOverflow&&(r[0].setAttribute("autocorrect","off"),r[0].setAttribute("autocomplete","off")),r.is("[type='search'],:jqmData(type='search')")?(f=r.wrap("<div class='ui-input-search ui-shadow-inset ui-btn-corner-all ui-btn-shadow ui-icon-searchfield"+o+a+"'></div>").parent(),l=e("<a href='#' class='ui-input-clear' title='"+i.clearSearchButtonText+"'>"+i.clearSearchButtonText+"</a>").bind("click",function(e){r.val("").focus().trigger("change"),l.addClass("ui-input-clear-hidden"),e.preventDefault()}).appendTo(f).buttonMarkup({icon:"delete",iconpos:"notext",corners:!0,shadow:!0,mini:u}),c(),r.bind("paste cut keyup focus change blur",c)):r.addClass("ui-corner-all ui-shadow-inset"+o+a),r.focus(function(){f.addClass(e.mobile.focusClass)}).blur(function(){f.removeClass(e.mobile.focusClass)}).bind("focus",function(){i.preventFocusZoom&&e.mobile.zoom.disable(!0)}).bind("blur",function(){i.preventFocusZoom&&e.mobile.zoom.enable(!0)});if(r.is("textarea")){var h=15,p=100,d=function(){var e=r[0].scrollHeight,t=r[0].clientHeight;t<e&&r.height(e+h)},v;r.keyup(function(){clearTimeout(v),v=setTimeout(d,p)}),e(n).one("pagechange",d),e.trim(r.val())&&e(t).load(d)}},disable:function(){(this.element.attr("disabled",!0).is("[type='search'],:jqmData(type='search')")?this.element.parent():this.element).addClass("ui-disabled")},enable:function(){(this.element.attr("disabled",!1).is("[type='search'],:jqmData(type='search')")?this.element.parent():this.element).removeClass("ui-disabled")}}),e(n).bind("pagecreate create",function(t){e.mobile.textinput.prototype.enhanceWithin(t.target,!0)})}(e),function(e,t){e.mobile.listview.prototype.options.filter=!1,e.mobile.listview.prototype.options.filterPlaceholder="Filter items...",e.mobile.listview.prototype.options.filterTheme="c",e.mobile.listview.prototype.options.filterCallback=function(e,t,n){return e.toString().toLowerCase().indexOf(t)===-1},e(n).delegate(":jqmData(role='listview')","listviewcreate",function(){var t=e(this),n=t.data("listview");if(!n.options.filter)return;var r=e("<form>",{"class":"ui-listview-filter ui-bar-"+n.options.filterTheme,role:"search"}),i=e("<input>",{placeholder:n.options.filterPlaceholder}).attr("data-"+e.mobile.ns+"type","search").jqmData("lastval","").bind("keyup change",function(){var r=e(this),i=this.value.toLowerCase(),s=null,o=r.jqmData("lastval")+"",u=!1,a="",f;r.jqmData("lastval",i),i.length<o.length||i.indexOf(o)!==0?s=t.children():s=t.children(":not(.ui-screen-hidden)");if(i){for(var l=s.length-1;l>=0;l--)f=e(s[l]),a=f.jqmData("filtertext")||f.text(),f.is("li:jqmData(role=list-divider)")?(f.toggleClass("ui-filter-hidequeue",!u),u=!1):n.options.filterCallback(a,i,f)?f.toggleClass("ui-filter-hidequeue",!0):u=!0;s.filter(":not(.ui-filter-hidequeue)").toggleClass("ui-screen-hidden",!1),s.filter(".ui-filter-hidequeue").toggleClass("ui-screen-hidden",!0).toggleClass("ui-filter-hidequeue",!1)}else s.toggleClass("ui-screen-hidden",!1);n._refreshCorners()}).appendTo(r).textinput();n.options.inset&&r.addClass("ui-listview-filter-inset"),r.bind("submit",function(){return!1}).insertBefore(t)})}(e),function(e,r){e.widget("mobile.slider",e.mobile.widget,{options:{theme:null,trackTheme:null,disabled:!1,initSelector:"input[type='range'], :jqmData(type='range'), :jqmData(role='slider')",mini:!1},_create:function(){var i=this,s=this.element,o=e.mobile.getInheritedTheme(s,"c"),u=this.options.theme||o,a=this.options.trackTheme||o,f=s[0].nodeName.toLowerCase(),l=f==="select"?"ui-slider-switch":"",c=s.attr("id"),h=e("[for='"+c+"']"),p=h.attr("id")||c+"-label",d=h.attr("id",p),v=function(){return f==="input"?parseFloat(s.val()):s[0].selectedIndex},m=f==="input"?parseFloat(s.attr("min")):0,g=f==="input"?parseFloat(s.attr("max")):s.find("option").length-1,y=t.parseFloat(s.attr("step")||1),b=this.options.inline||s.jqmData("inline")===!0?" ui-slider-inline":"",w=this.options.mini||s.jqmData("mini")?" ui-slider-mini":"",E=n.createElement("a"),S=e(E),x=n.createElement("div"),T=e(x),N=s.jqmData("highlight")&&f!=="select"?function(){var t=n.createElement("div");return t.className="ui-slider-bg "+e.mobile.activeBtnClass+" ui-btn-corner-all",e(t).prependTo(T)}():!1,C;E.setAttribute("href","#"),x.setAttribute("role","application"),x.className=["ui-slider ",l," ui-btn-down-",a," ui-btn-corner-all",b,w].join(""),E.className="ui-slider-handle",x.appendChild(E),S.buttonMarkup({corners:!0,theme:u,shadow:!0}).attr({role:"slider","aria-valuemin":m,"aria-valuemax":g,"aria-valuenow":v(),"aria-valuetext":v(),title:v(),"aria-labelledby":p}),e.extend(this,{slider:T,handle:S,valuebg:N,dragging:!1,beforeStart:null,userModified:!1,mouseMoved:!1});if(f==="select"){var k=n.createElement("div");k.className="ui-slider-inneroffset";for(var L=0,A=x.childNodes.length;L<A;L++)k.appendChild(x.childNodes[L]);x.appendChild(k),S.addClass("ui-slider-handle-snapping"),C=s.find("option");for(var O=0,M=C.length;O<M;O++){var _=O?"a":"b",D=O?" "+e.mobile.activeBtnClass:" ui-btn-down-"+a,P=n.createElement("div"),H=n.createElement("span");H.className=["ui-slider-label ui-slider-label-",_,D," ui-btn-corner-all"].join(""),H.setAttribute("role","img"),H.appendChild(n.createTextNode(C[O].innerHTML)),e(H).prependTo(T)}i._labels=e(".ui-slider-label",T)}d.addClass("ui-slider"),s.addClass(f==="input"?"ui-slider-input":"ui-slider-switch").change(function(){i.mouseMoved||i.refresh(v(),!0)}).keyup(function(){i.refresh(v(),!0,!0)}).blur(function(){i.refresh(v(),!0)}),e(n).bind("vmousemove",function(e){if(i.dragging)return i.mouseMoved=!0,f==="select"&&S.removeClass("ui-slider-handle-snapping"),i.refresh(e),i.userModified=i.beforeStart!==s[0].selectedIndex,!1}),T.bind("vmousedown",function(e){return i.dragging=!0,i.userModified=!1,i.mouseMoved=!1,f==="select"&&(i.beforeStart=s[0].selectedIndex),i.refresh(e),!1}).bind("vclick",!1),T.add(n).bind("vmouseup",function(){if(i.dragging)return i.dragging=!1,f==="select"&&(S.addClass("ui-slider-handle-snapping"),i.mouseMoved?i.userModified?i.refresh(i.beforeStart===0?1:0):i.refresh(i.beforeStart):i.refresh(i.beforeStart===0?1:0)),i.mouseMoved=!1,!1}),T.insertAfter(s),f==="select"&&this.handle.bind({focus:function(){T.addClass(e.mobile.focusClass)},blur:function(){T.removeClass(e.mobile.focusClass)}}),this.handle.bind({vmousedown:function(){e(this).focus()},vclick:!1,keydown:function(t){var n=v();if(i.options.disabled)return;switch(t.keyCode){case e.mobile.keyCode.HOME:case e.mobile.keyCode.END:case e.mobile.keyCode.PAGE_UP:case e.mobile.keyCode.PAGE_DOWN:case e.mobile.keyCode.UP:case e.mobile.keyCode.RIGHT:case e.mobile.keyCode.DOWN:case e.mobile.keyCode.LEFT:t.preventDefault(),i._keySliding||(i._keySliding=!0,e(this).addClass("ui-state-active"))}switch(t.keyCode){case e.mobile.keyCode.HOME:i.refresh(m);break;case e.mobile.keyCode.END:i.refresh(g);break;case e.mobile.keyCode.PAGE_UP:case e.mobile.keyCode.UP:case e.mobile.keyCode.RIGHT:i.refresh(n+y);break;case e.mobile.keyCode.PAGE_DOWN:case e.mobile.keyCode.DOWN:case e.mobile.keyCode.LEFT:i.refresh(n-y)}},keyup:function(t){i._keySliding&&(i._keySliding=!1,e(this).removeClass("ui-state-active"))}}),this.refresh(r,r,!0)},refresh:function(t,n,r){(this.options.disabled||this.element.attr("disabled"))&&this.disable();var i=this.element,s,o=i[0].nodeName.toLowerCase(),u=o==="input"?parseFloat(i.attr("min")):0,a=o==="input"?parseFloat(i.attr("max")):i.find("option").length-1,f=o==="input"&&parseFloat(i.attr("step"))>0?parseFloat(i.attr("step")):1;if(typeof t=="object"){var l=t,c=8;if(!this.dragging||l.pageX<this.slider.offset().left-c||l.pageX>this.slider.offset().left+this.slider.width()+c)return;s=Math.round((l.pageX-this.slider.offset().left)/this.slider.width()*100)}else t==null&&(t=o==="input"?parseFloat(i.val()||0):i[0].selectedIndex),s=(parseFloat(t)-u)/(a-u)*100;if(isNaN(s))return;s<0&&(s=0),s>100&&(s=100);var h=s/100*(a-u)+u,p=(h-u)%f,d=h-p;Math.abs(p)*2>=f&&(d+=p>0?f:-f),h=parseFloat(d.toFixed(5)),h<u&&(h=u),h>a&&(h=a),this.handle.css("left",s+"%"),this.handle.attr({"aria-valuenow":o==="input"?h:i.find("option").eq(h).attr("value"),"aria-valuetext":o==="input"?h:i.find("option").eq(h).getEncodedText(),title:o==="input"?h:i.find("option").eq(h).getEncodedText()}),this.valuebg&&this.valuebg.css("width",s+"%");if(this._labels){var v=this.handle.width()/this.slider.width()*100,m=s&&v+(100-v)*s/100,g=s===100?0:Math.min(v+100-m,100);this._labels.each(function(){var t=e(this).is(".ui-slider-label-a");e(this).width((t?m:g)+"%")})}if(!r){var y=!1;o==="input"?(y=i.val()!==h,i.val(h)):(y=i[0].selectedIndex!==h,i[0].selectedIndex=h),!n&&y&&i.trigger("change")}},enable:function(){return this.element.attr("disabled",!1),this.slider.removeClass("ui-disabled").attr("aria-disabled",!1),this._setOption("disabled",!1)},disable:function(){return this.element.attr("disabled",!0),this.slider.addClass("ui-disabled").attr("aria-disabled",!0),this._setOption("disabled",!0)}}),e(n).bind("pagecreate create",function(t){e.mobile.slider.prototype.enhanceWithin(t.target,!0)})}(e),function(e,r){e.widget("mobile.selectmenu",e.mobile.widget,{options:{theme:null,disabled:!1,icon:"arrow-d",iconpos:"right",inline:!1,corners:!0,shadow:!0,iconshadow:!0,overlayTheme:"a",hidePlaceholderMenuItems:!0,closeText:"Close",nativeMenu:!0,preventFocusZoom:/iPhone|iPad|iPod/.test(navigator.platform)&&navigator.userAgent.indexOf("AppleWebKit")>-1,initSelector:"select:not(:jqmData(role='slider'))",mini:!1},_button:function(){return e("<div/>")},_setDisabled:function(e){return this.element.attr("disabled",e),this.button.attr("aria-disabled",e),this._setOption("disabled",e)},_focusButton:function(){var e=this;setTimeout(function(){e.button.focus()},40)},_selectOptions:function(){return this.select.find("option")},_preExtension:function(){var t="";!~this.element[0].className.indexOf("ui-btn-left")||(t=" ui-btn-left"),!~this.element[0].className.indexOf("ui-btn-right")||(t=" ui-btn-right"),this.select=this.element.wrap("<div class='ui-select"+t+"'>"),this.selectID=this.select.attr("id"),this.label=e("label[for='"+this.selectID+"']").addClass("ui-select"),this.isMultiple=this.select[0].multiple,this.options.theme||(this.options.theme=e.mobile.getInheritedTheme(this.select,"c"))},_create:function(){this._preExtension(),this._trigger("beforeCreate"),this.button=this._button();var n=this,r=this.options,i=r.inline||this.select.jqmData("inline"),s=r.mini||this.select.jqmData("mini"),o=r.icon?r.iconpos||this.select.jqmData("iconpos"):!1,u=this.select[0].selectedIndex===-1?0:this.select[0].selectedIndex,a=this.button.insertBefore(this.select).buttonMarkup({theme:r.theme,icon:r.icon,iconpos:o,inline:i,corners:r.corners,shadow:r.shadow,iconshadow:r.iconshadow,mini:s});this.setButtonText(),r.nativeMenu&&t.opera&&t.opera.version&&a.addClass("ui-select-nativeonly"),this.isMultiple&&(this.buttonCount=e("<span>").addClass("ui-li-count ui-btn-up-c ui-btn-corner-all").hide().appendTo(a.addClass("ui-li-has-count"))),(r.disabled||this.element.attr("disabled"))&&this.disable(),this.select.change(function(){n.refresh()}),this.build()},build:function(){var t=this;this.select.appendTo(t.button).bind("vmousedown",function(){t.button.addClass(e.mobile.activeBtnClass)}).bind("focus",function(){t.button.addClass(e.mobile.focusClass)}).bind("blur",function(){t.button.removeClass(e.mobile.focusClass)}).bind("focus vmouseover",function(){t.button.trigger("vmouseover")}).bind("vmousemove",function(){t.button.removeClass(e.mobile.activeBtnClass)}).bind("change blur vmouseout",function(){t.button.trigger("vmouseout").removeClass(e.mobile.activeBtnClass)}).bind("change blur",function(){t.button.removeClass("ui-btn-down-"+t.options.theme)}),t.button.bind("vmousedown",function(){t.options.preventFocusZoom&&e.mobile.zoom.disable(!0)}).bind("mouseup",function(){t.options.preventFocusZoom&&e.mobile.zoom.enable(!0)})},selected:function(){return this._selectOptions().filter(":selected")},selectedIndices:function(){var e=this;return this.selected().map(function(){return e._selectOptions().index(this)}).get()},setButtonText:function(){var t=this,r=this.selected(),i=this.placeholder,s=e(n.createElement("span"));this.button.find(".ui-btn-text").html(function(){return r.length?i=r.map(function(){return e(this).text()}).get().join(", "):i=t.placeholder,s.text(i).addClass(t.select.attr("class")).addClass(r.attr("class"))})},setButtonCount:function(){var e=this.selected();this.isMultiple&&this.buttonCount[e.length>1?"show":"hide"]().text(e.length)},refresh:function(){this.setButtonText(),this.setButtonCount()},open:e.noop,close:e.noop,disable:function(){this._setDisabled(!0),this.button.addClass("ui-disabled")},enable:function(){this._setDisabled(!1),this.button.removeClass("ui-disabled")}}),e(n).bind("pagecreate create",function(t){e.mobile.selectmenu.prototype.enhanceWithin(t.target,!0)})}(e),function(e,r){var i=function(r){var i=r.select,s=r.selectID,o=r.label,u=r.select.closest(".ui-page"),a=r._selectOptions(),f=r.isMultiple=r.select[0].multiple,l=s+"-button",c=s+"-menu",h=e("<div data-"+e.mobile.ns+"role='dialog' data-"+e.mobile.ns+"theme='"+r.options.theme+"' data-"+e.mobile.ns+"overlay-theme='"+r.options.overlayTheme+"'>"+"<div data-"+e.mobile.ns+"role='header'>"+"<div class='ui-title'>"+o.getEncodedText()+"</div>"+"</div>"+"<div data-"+e.mobile.ns+"role='content'></div>"+"</div>"),p=e("<div>",{"class":"ui-selectmenu"}).insertAfter(r.select).popup({theme:"a"}),d=e("<ul>",{"class":"ui-selectmenu-list",id:c,role:"listbox","aria-labelledby":l}).attr("data-"+e.mobile.ns+"theme",r.options.theme).appendTo(p),v=e("<div>",{"class":"ui-header ui-bar-"+r.options.theme}).prependTo(p),m=e("<h1>",{"class":"ui-title"}).appendTo(v),g,y,b;r.isMultiple&&(b=e("<a>",{text:r.options.closeText,href:"#","class":"ui-btn-left"}).attr("data-"+e.mobile.ns+"iconpos","notext").attr("data-"+e.mobile.ns+"icon","delete").appendTo(v).buttonMarkup()),e.extend(r,{select:r.select,selectID:s,buttonId:l,menuId:c,thisPage:u,menuPage:h,label:o,selectOptions:a,isMultiple:f,theme:r.options.theme,listbox:p,list:d,header:v,headerTitle:m,headerClose:b,menuPageContent:g,menuPageClose:y,placeholder:"",build:function(){var t=this;t.refresh(),t.select.attr("tabindex","-1").focus(function(){e(this).blur(),t.button.focus()}),t.button.bind("vclick keydown",function(n){if(n.type==="vclick"||n.keyCode&&(n.keyCode===e.mobile.keyCode.ENTER||n.keyCode===e.mobile.keyCode.SPACE))t.open(),n.preventDefault()}),t.list.attr("role","listbox").bind("focusin",function(t){e(t.target).attr("tabindex","0").trigger("vmouseover")}).bind("focusout",function(t){e(t.target).attr("tabindex","-1").trigger("vmouseout")}).delegate("li:not(.ui-disabled, .ui-li-divider)","click",function(n){var i=t.select[0].selectedIndex,s=t.list.find("li:not(.ui-li-divider)").index(this),o=t._selectOptions().eq(s)[0];o.selected=t.isMultiple?!o.selected:!0,t.isMultiple&&e(this).find(".ui-icon").toggleClass("ui-icon-checkbox-on",o.selected).toggleClass("ui-icon-checkbox-off",!o.selected),(t.isMultiple||i!==s)&&t.select.trigger("change"),t.isMultiple?t.list.find("li:not(.ui-li-divider)").eq(s).addClass("ui-btn-down-"+r.options.theme).find("a").first().focus():t.close(),n.preventDefault()}).keydown(function(t){var n=e(t.target),i=n.closest("li"),s,o;switch(t.keyCode){case 38:return s=i.prev().not(".ui-selectmenu-placeholder"),s.is(".ui-li-divider")&&(s=s.prev()),s.length&&(n.blur().attr("tabindex","-1"),s.addClass("ui-btn-down-"+r.options.theme).find("a").first().focus()),!1;case 40:return o=i.next(),o.is(".ui-li-divider")&&(o=o.next()),o.length&&(n.blur().attr("tabindex","-1"
),o.addClass("ui-btn-down-"+r.options.theme).find("a").first().focus()),!1;case 13:case 32:return n.trigger("click"),!1}}),t.menuPage.bind("pagehide",function(){t.list.appendTo(t.listbox),t._focusButton(),e.mobile._bindPageRemove.call(t.thisPage)}),t.listbox.bind("closed",function(e){t.close()}),t.isMultiple&&t.headerClose.click(function(){if(t.menuType==="overlay")return t.close(),!1}),t.thisPage.addDependents(this.menuPage)},_isRebuildRequired:function(){var e=this.list.find("li"),t=this._selectOptions();return t.text()!==e.text()},selected:function(){return this._selectOptions().filter(":selected:not(:jqmData(placeholder='true'))")},refresh:function(t,n){var r=this,i=this.element,s=this.isMultiple,o;(t||this._isRebuildRequired())&&r._buildList(),indicies=this.selectedIndices(),r.setButtonText(),r.setButtonCount(),r.list.find("li:not(.ui-li-divider)").removeClass(e.mobile.activeBtnClass).attr("aria-selected",!1).each(function(t){if(e.inArray(t,indicies)>-1){var n=e(this);n.attr("aria-selected",!0),r.isMultiple?n.find(".ui-icon").removeClass("ui-icon-checkbox-off").addClass("ui-icon-checkbox-on"):n.is(".ui-selectmenu-placeholder")?n.next().addClass(e.mobile.activeBtnClass):n.addClass(e.mobile.activeBtnClass)}})},close:function(){if(this.options.disabled||!this.isOpen)return;var e=this;e.menuType==="page"?t.history.back():(e.listbox.popup("close"),e.list.appendTo(e.listbox),e._focusButton()),e.isOpen=!1},open:function(){function p(){var t=n.list.find("."+e.mobile.activeBtnClass+" a");t.length===0&&(t=n.list.find("li.ui-btn:not(:jqmData(placeholder='true')) a")),t.first().focus()}if(this.options.disabled)return;var n=this,r=e(t),i=n.list.parent(),s=i.outerHeight(),o=i.outerWidth(),u=e("."+e.mobile.activePageClass),a=r.scrollTop(),f=n.button.offset().top,l=r.height(),c=r.width();n.button.addClass(e.mobile.activeBtnClass),setTimeout(function(){n.button.removeClass(e.mobile.activeBtnClass)},300),s>l-80||!e.support.scrollTop?(n.menuPage.appendTo(e.mobile.pageContainer).page(),n.menuPageContent=h.find(".ui-content"),n.menuPageClose=h.find(".ui-header a"),n.thisPage.unbind("pagehide.remove"),a===0&&f>l&&n.thisPage.one("pagehide",function(){e(this).jqmData("lastScroll",f)}),n.menuPage.one("pageshow",function(){p(),n.isOpen=!0}),n.menuType="page",n.menuPageContent.append(n.list),n.menuPage.find("div .ui-title").text(n.label.text()),e.mobile.changePage(n.menuPage,{transition:e.mobile.defaultDialogTransition})):(n.menuType="overlay",n.listbox.one("opened",p).popup("open",n.button.offset().left+n.button.outerWidth()/2,n.button.offset().top+n.button.outerHeight()/2),n.isOpen=!0)},_buildList:function(){var t=this,r=this.options,i=this.placeholder,s=!0,o=[],u=[],a=t.isMultiple?"checkbox-off":"false";t.list.empty().filter(".ui-listview").listview("destroy");var f=t.select.find("option"),l=f.length,c=this.select[0],h="data-"+e.mobile.ns,p=h+"option-index",d=h+"icon",v=h+"role",m=h+"placeholder",g=n.createDocumentFragment(),y=!1,b;for(var w=0;w<l;w++,y=!1){var E=f[w],S=e(E),x=E.parentNode,T=S.text(),N=n.createElement("a"),C=[];N.setAttribute("href","#"),N.appendChild(n.createTextNode(T));if(x!==c&&x.nodeName.toLowerCase()==="optgroup"){var k=x.getAttribute("label");if(k!==b){var L=n.createElement("li");L.setAttribute(v,"list-divider"),L.setAttribute("role","option"),L.setAttribute("tabindex","-1"),L.appendChild(n.createTextNode(k)),g.appendChild(L),b=k}}s&&(!E.getAttribute("value")||T.length===0||S.jqmData("placeholder"))&&(s=!1,y=!0,E.setAttribute(m,!0),r.hidePlaceholderMenuItems&&C.push("ui-selectmenu-placeholder"),i||(i=t.placeholder=T));var A=n.createElement("li");E.disabled&&(C.push("ui-disabled"),A.setAttribute("aria-disabled",!0)),A.setAttribute(p,w),A.setAttribute(d,a),y&&A.setAttribute(m,!0),A.className=C.join(" "),A.setAttribute("role","option"),N.setAttribute("tabindex","-1"),A.appendChild(N),g.appendChild(A)}t.list[0].appendChild(g),!this.isMultiple&&!i.length?this.header.hide():this.headerTitle.text(this.placeholder),t.list.listview()},_button:function(){return e("<a>",{href:"#",role:"button",id:this.buttonId,"aria-haspopup":"true","aria-owns":this.menuId})}})};e(n).bind("selectmenubeforecreate",function(t){var n=e(t.target).data("selectmenu");!n.options.nativeMenu&&n.element.parents(":jqmData(role='popup')").length===0&&i(n)})}(e),function(e,r){e.widget("mobile.fixedtoolbar",e.mobile.widget,{options:{visibleOnPageShow:!0,disablePageZoom:!0,transition:"slide",fullscreen:!1,tapToggle:!0,tapToggleBlacklist:"a, button, input, select, textarea, .ui-header-fixed, .ui-footer-fixed",hideDuringFocus:"input, textarea, select",updatePagePadding:!0,trackPersistentToolbars:!0,supportBlacklist:function(){var e=t,n=navigator.userAgent,r=navigator.platform,i=n.match(/AppleWebKit\/([0-9]+)/),s=!!i&&i[1],o=n.match(/Fennec\/([0-9]+)/),u=!!o&&o[1],a=n.match(/Opera Mobi\/([0-9]+)/),f=!!a&&a[1];return(r.indexOf("iPhone")>-1||r.indexOf("iPad")>-1||r.indexOf("iPod")>-1)&&s&&s<534||e.operamini&&{}.toString.call(e.operamini)==="[object OperaMini]"||a&&f<7458||n.indexOf("Android")>-1&&s&&s<533||u&&u<6||"palmGetResource"in t&&s&&s<534||n.indexOf("MeeGo")>-1&&n.indexOf("NokiaBrowser/8.5.0")>-1?!0:!1},initSelector:":jqmData(position='fixed')"},_create:function(){var e=this,t=e.options,n=e.element,r=n.is(":jqmData(role='header')")?"header":"footer",i=n.closest(".ui-page");if(t.supportBlacklist()){e.destroy();return}n.addClass("ui-"+r+"-fixed"),t.fullscreen?(n.addClass("ui-"+r+"-fullscreen"),i.addClass("ui-page-"+r+"-fullscreen")):i.addClass("ui-page-"+r+"-fixed"),e._addTransitionClass(),e._bindPageEvents(),e._bindToggleHandlers()},_addTransitionClass:function(){var e=this.options.transition;e&&e!=="none"&&(e==="slide"&&(e=this.element.is(".ui-header")?"slidedown":"slideup"),this.element.addClass(e))},_bindPageEvents:function(){var n=this,r=n.options,i=n.element;i.closest(".ui-page").bind("pagebeforeshow",function(){r.disablePageZoom&&e.mobile.zoom.disable(!0),r.visibleOnPageShow||n.hide(!0)}).bind("webkitAnimationStart animationstart updatelayout",function(){var e=this;r.updatePagePadding&&n.updatePagePadding(e)}).bind("pageshow",function(){var i=this;n.updatePagePadding(i),r.updatePagePadding&&e(t).bind("throttledresize."+n.widgetName,function(){n.updatePagePadding(i)})}).bind("pagebeforehide",function(i,s){r.disablePageZoom&&e.mobile.zoom.enable(!0),r.updatePagePadding&&e(t).unbind("throttledresize."+n.widgetName);if(r.trackPersistentToolbars){var u=e(".ui-footer-fixed:jqmData(id)",this),a=e(".ui-header-fixed:jqmData(id)",this),f=u.length&&s.nextPage&&e(".ui-footer-fixed:jqmData(id='"+u.jqmData("id")+"')",s.nextPage),l=a.length&&s.nextPage&&e(".ui-header-fixed:jqmData(id='"+a.jqmData("id")+"')",s.nextPage);f=f||e();if(f.length||l.length)f.add(l).appendTo(e.mobile.pageContainer),s.nextPage.one("pageshow",function(){f.add(l).appendTo(this)})}})},_visible:!0,updatePagePadding:function(t){var n=this.element,r=n.is(".ui-header");if(this.options.fullscreen)return;t=t||n.closest(".ui-page"),e(t).css("padding-"+(r?"top":"bottom"),n.outerHeight())},_useTransition:function(n){var r=e(t),i=this.element,s=r.scrollTop(),o=i.height(),u=i.closest(".ui-page").height(),a=e.mobile.getScreenHeight(),f=i.is(":jqmData(role='header')")?"header":"footer";return!n&&(this.options.transition&&this.options.transition!=="none"&&(f==="header"&&!this.options.fullscreen&&s>o||f==="footer"&&!this.options.fullscreen&&s+a<u-o)||this.options.fullscreen)},show:function(e){var t="ui-fixed-hidden",n=this.element;this._useTransition(e)?n.removeClass("out "+t).addClass("in"):n.removeClass(t),this._visible=!0},hide:function(e){var t="ui-fixed-hidden",n=this.element,r="out"+(this.options.transition==="slide"?" reverse":"");this._useTransition(e)?n.addClass(r).removeClass("in").animationComplete(function(){n.addClass(t).removeClass(r)}):n.addClass(t).removeClass(r),this._visible=!1},toggle:function(){this[this._visible?"hide":"show"]()},_bindToggleHandlers:function(){var t=this,n=t.options,r=t.element;r.closest(".ui-page").bind("vclick",function(r){n.tapToggle&&!e(r.target).closest(n.tapToggleBlacklist).length&&t.toggle()}).bind("focusin focusout",function(r){screen.width<500&&e(r.target).is(n.hideDuringFocus)&&!e(r.target).closest(".ui-header-fixed, .ui-footer-fixed").length&&t[r.type==="focusin"&&t._visible?"hide":"show"]()})},destroy:function(){this.element.removeClass("ui-header-fixed ui-footer-fixed ui-header-fullscreen ui-footer-fullscreen in out fade slidedown slideup ui-fixed-hidden"),this.element.closest(".ui-page").removeClass("ui-page-header-fixed ui-page-footer-fixed ui-page-header-fullscreen ui-page-footer-fullscreen")}}),e(n).bind("pagecreate create",function(t){e(t.target).jqmData("fullscreen")&&e(e.mobile.fixedtoolbar.prototype.options.initSelector,t.target).not(":jqmData(fullscreen)").jqmData("fullscreen",!0),e.mobile.fixedtoolbar.prototype.enhanceWithin(t.target)})}(e),function(e,t){function a(e){r=e.originalEvent,u=r.accelerationIncludingGravity,i=Math.abs(u.x),s=Math.abs(u.y),o=Math.abs(u.z),!t.orientation&&(i>7||(o>6&&s<8||o<8&&s>6)&&i>5)?n.enabled&&n.disable():n.enabled||n.enable()}if(!(/iPhone|iPad|iPod/.test(navigator.platform)&&navigator.userAgent.indexOf("AppleWebKit")>-1))return;var n=e.mobile.zoom,r,i,s,o,u;e(t).bind("orientationchange.iosorientationfix",n.enable).bind("devicemotion.iosorientationfix",a)}(e,this),function(e,t,r){function u(){i.removeClass("ui-mobile-rendering")}var i=e("html"),s=e("head"),o=e(t);e(t.document).trigger("mobileinit");if(!e.mobile.gradeA())return;e.mobile.ajaxBlacklist&&(e.mobile.ajaxEnabled=!1),i.addClass("ui-mobile ui-mobile-rendering"),setTimeout(u,5e3),e.extend(e.mobile,{initializePage:function(){var t=e(":jqmData(role='page'), :jqmData(role='dialog')");t.length||(t=e("body").wrapInner("<div data-"+e.mobile.ns+"role='page'></div>").children(0)),t.each(function(){var t=e(this);t.jqmData("url")||t.attr("data-"+e.mobile.ns+"url",t.attr("id")||location.pathname+location.search)}),e.mobile.firstPage=t.first(),e.mobile.pageContainer=t.first().parent().addClass("ui-mobile-viewport"),o.trigger("pagecontainercreate"),e.mobile.showPageLoadingMsg(),u(),!e.mobile.hashListeningEnabled||!e.mobile.path.isHashValid(location.hash)||!e(location.hash+':jqmData(role="page")').length&&!e.mobile.path.isPath(location.hash)?e.mobile.changePage(e.mobile.firstPage,{transition:"none",reverse:!0,changeHash:!1,fromHashChange:!0}):o.trigger("hashchange",[!0])}}),e.mobile.navreadyDeferred.resolve(),e(function(){t.scrollTo(0,1),e.mobile.defaultHomeScroll=!e.support.scrollTop||e(t).scrollTop()===1?0:1,e.fn.controlgroup&&e(n).bind("pagecreate create",function(t){e(":jqmData(role='controlgroup')",t.target).jqmEnhanceable().controlgroup({excludeInvisible:!1})}),e.mobile.autoInitializePage&&e.mobile.initializePage(),o.load(e.mobile.silentScroll),e.support.cssPointerEvents||e(n).delegate(".ui-disabled","vclick",function(e){e.preventDefault(),e.stopImmediatePropagation()})})}(e,this)}),function(e,t){Date.prototype.getISO=function(){return String(this.getFullYear())+"-"+(this.getMonth()<9?"0":"")+String(this.getMonth()+1)+"-"+(this.getDate()<10?"0":"")+String(this.getDate())},Date.prototype.getComp=function(){return parseInt(this.getISO().replace(/-/g,""),10)},Date.prototype.copy=function(){return this.copymod()},Date.prototype.copymod=function(e,t){typeof e=="undefined"&&(e=[0,0,0,0,0,0]),typeof t=="undefined"&&(t=[0,0,0,0,0,0]);while(e.length<6)e.push(0);while(t.length<6)t.push(0);return new Date(t[0]>0?t[0]:this.getFullYear()+e[0],t[1]>0?t[1]:this.getMonth()+e[1],t[2]>0?t[2]:this.getDate()+e[2],t[3]>0?t[3]:this.getHours()+e[3],t[4]>0?t[4]:this.getMinutes()+e[4],t[5]>0?t[5]:this.getSeconds()+e[5],0)},Date.prototype.getEpoch=function(){return(this.getTime()-this.getMilliseconds())/1e3},Date.prototype.adjust=function(e,t){switch(e){case"y":this.setFullYear(this.getFullYear()+t);break;case"m":this.setMonth(this.getMonth()+t);break;case"d":this.setDate(this.getDate()+t);break;case"h":this.setHours(this.getHours()+t);break;case"i":this.setMinutes(this.getMinutes()+t);break;case"s":this.setSeconds(this.getSeconds()+t)}return this.getTime()},e.widget("mobile.datebox",e.mobile.widget,{options:{version:"1.0.1-2012022700",theme:!1,defaultTheme:"c",pickPageTheme:"b",pickPageInputTheme:"e",pickPageButtonTheme:"a",pickPageHighButtonTheme:"e",pickPageOHighButtonTheme:"e",pickPageOAHighButtonTheme:"e",pickPageODHighButtonTheme:"e",pickPageTodayButtonTheme:"e",pickPageSlideButtonTheme:"d",pickPageFlipButtonTheme:"b",forceInheritTheme:!1,centerWindow:!1,calHighToday:!0,calHighPicked:!0,transition:"pop",noAnimation:!1,disableManualInput:!1,disabled:!1,wheelExists:!1,swipeEnabled:!0,zindex:"500",debug:!1,clickEvent:"vclick",numberInputEnhance:!0,internalInputType:"text",resizeListener:!0,titleDialogLabel:!1,meridiemLetters:["AM","PM"],timeOutputOverride:!1,timeFormats:{12:"%l:%M %p",24:"%k:%M"},durationFormat:"DD ddd, hh:ii:ss",timeOutput:!1,rolloverMode:{m:!0,d:!0,h:!0,i:!0,s:!0},mode:"datebox",calShowDays:!0,calShowOnlyMonth:!1,useDialogForceTrue:!1,useDialogForceFalse:!0,fullScreen:!1,fullScreenAlways:!1,useDialog:!1,useModal:!1,useInline:!1,useInlineBlind:!1,useClearButton:!1,collapseButtons:!1,noButtonFocusMode:!1,focusMode:!1,noButton:!1,noSetButton:!1,openCallback:!1,openCallbackArgs:[],closeCallback:!1,closeCallbackArgs:[],open:!1,nestedBox:!1,lastDuration:!1,fieldsOrder:!1,fieldsOrderOverride:!1,durationOrder:["d","h","i","s"],defaultDateFormat:"%Y-%m-%d",dateFormat:!1,timeFormatOverride:!1,headerFormat:!1,dateOutput:!1,minuteStep:1,calTodayButton:!1,calWeekMode:!1,calWeekModeFirstDay:1,calWeekModeHighlight:!0,calStartDay:!1,defaultPickerValue:!1,defaultDate:!1,minYear:!1,maxYear:!1,afterToday:!1,beforeToday:!1,maxDays:!1,minDays:!1,highDays:!1,highDates:!1,highDatesAlt:!1,blackDays:!1,blackDates:!1,enableDates:!1,fixDateArrays:!1,durationSteppers:{d:1,h:1,i:1,s:1},useLang:"en",lang:{en:{setDateButtonLabel:"Set Date",setTimeButtonLabel:"Set Time",setDurationButtonLabel:"Set Duration",calTodayButtonLabel:"Jump to Today",titleDateDialogLabel:"Set Date",titleTimeDialogLabel:"Set Time",daysOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysOfWeekShort:["Su","Mo","Tu","We","Th","Fr","Sa"],monthsOfYear:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsOfYearShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],durationLabel:["Days","Hours","Minutes","Seconds"],durationDays:["Day","Days"],timeFormat:24,headerFormat:"%A, %B %-d, %Y",tooltip:"Open Date Picker",nextMonth:"Next Month",prevMonth:"Previous Month",dateFieldOrder:["m","d","y"],timeFieldOrder:["h","i","a"],slideFieldOrder:["y","m","d"],dateFormat:"%Y-%m-%d",useArabicIndic:!1,isRTL:!1,calStartDay:0,clearButton:"Clear"}}},destroy:function(){e(this.pickPage).remove(),e.Widget.prototype.destroy.call(this)},_dateboxHandler:function(t,n){var r=e(this).data("datebox");if(!t.isPropagationStopped())switch(n.method){case"close":r.close(n.fromCloseButton);break;case"open":r.open();break;case"set":e(this).val(n.value),e(this).trigger("change");break;case"doset":e.inArray(r.options.mode,["timebox","durationbox","timeflipbox"])>-1?e(this).trigger("datebox",{method:"set",value:r._formatTime(r.theDate),date:r.theDate}):e(this).trigger("datebox",{method:"set",value:r._formatDate(r.theDate),date:r.theDate});break;case"dooffset":r._offset(n.type,n.amount,!0);break;case"dorefresh":r._update();break;case"doreset":r.hardreset();break;case"doclear":e(this).val("")}},_getCoords:function(t){var n=t,r=t.focusedEl.offset(),i=t.focusedEl.outerHeight(),s=t.focusedEl.outerWidth(),o=e.mobile.activePage.width(),u=e(window).scrollTop(),f=e(window).height(),l=t.pickerContent.innerWidth(),c=t.pickerContent.outerHeight(),h=!1,p=0,d=0,v=0,m=e(document).height(),g={high:e(window).height(),width:e.mobile.activePage.width(),fullTop:e(window).scrollTop(),fullLeft:e(window).scrollLeft()};return t.options.centerWindow?(g.winTop=u+(f/2-c/2),g.winLeft=o/2-l/2):(h=e(".ui-header",e.mobile.activePage),h.length>0&&(h.is(".ui-header-fixed")?d=h.outerHeight()+2:p+=h.outerHeight()+2),h=e(".ui-footer",e.mobile.activePage),h.length>0&&(h.is(".ui-footer-fixed")?v=h.outerHeight()+2:m-=h.outerHeight()+2),g.winLeft=r.left+s/2-l/2,o<450&&(g.winLeft=o/2-l/2),g.winTop=r.top+i/2-c/2,g.winTop+c>m&&(g.winTop+=m-(g.winTop+c)),v>0&&g.winTop+c-u>f-v&&(g.winTop=f-v+u-c),g.winTop<p&&(g.winTop=p),d>0&&g.winTop<u+d?g.winTop=u+d:u>p&&u>g.winTop&&(g.winTop=u+2)),g},_fixArray:function(t){var n=0,r=this,i=new RegExp("^([0-9]+)-([0-9]+)-([0-9]+)$"),s=null;if(e.isArray(t))for(n=0;n<t.length;n++)s=[0],s=i.exec(t[n]),s.length===4&&(t[n]=s[1]+"-"+r._zPad(parseInt(s[2],10))+"-"+r._zPad(parseInt(s[3],10)));return t},_digitReplace:function(e,t){var n=48,r=57,i=1584,s=null,o=null,u="";t===-1&&(n+=i,r+=i,i=-1584);for(s=0;s<e.length;s++)o=e.charCodeAt(s),o>=n&&o<=r?u+=String.fromCharCode(o+i):u+=String.fromCharCode(o);return u},_makeDisplayIndic:function(){var t=this,n=this.options;t.pickerContent.find("*").each(function(){e(this).children().length<1?e(this).text(t._digitReplace(e(this).text())):e(this).hasClass("ui-datebox-slideday")&&e(this).html(t._digitReplace(e(this).html()))}),t.pickerContent.find("input").each(function(){e(this).val(t._digitReplace(e(this).val()))})},_zPad:function(e){return(e<10?"0":"")+String(e)},_makeOrd:function(e){var t=e%10;return e>9&&e<21?"th":t>3?"th":["th","st","nd","rd"][t]},_isInt:function(e){return e.toString().search(/^[0-9]+$/)===0},_getFirstDay:function(e){return e.copymod([0],[0,0,1]).getDay()},_getRecDays:function(e,t,n){t===null&&(t=this.theDate.getMonth()+1),e===null&&(e=this.theDate.getFullYear());var r=this,i=new Date(e,t-1,1,0,0,0,0),s=[],o;i.getDay()>n?i.setDate(8-(i.getDay()-n)):i.getDay()<n&&i.setDate(1+(n-i.getDay())),s[0]=i.getISO();for(o=1;o<6;o++)i.setDate(i.getDate()+7),i.getMonth()+1===t&&(s[o]=i.getISO());return s},_getLastDate:function(e){return 32-e.copymod([0],[0,0,32,13]).getDate()},_getLastDateBefore:function(e){return 32-e.copymod([0,-1],[0,0,32,13]).getDate()},_formatter:function(e,t){var n=this,r=this.options;return e.match(/%/)?e=e.replace(/%(0|-)*([a-z])/gi,function(e,i,s,o,u){switch(s){case"%":return"%";case"a":return r.lang[r.useLang].daysOfWeekShort[t.getDay()];case"A":return r.lang[r.useLang].daysOfWeek[t.getDay()];case"b":return r.lang[r.useLang].monthsOfYearShort[t.getMonth()];case"B":return r.lang[r.useLang].monthsOfYear[t.getMonth()];case"C":return t.getFullYear().toString().substr(0,2);case"d":return i==="-"?t.getDate():n._zPad(t.getDate());case"H":case"k":return i==="-"?t.getHours():n._zPad(t.getHours());case"I":case"l":return i==="-"?t.getHours()===0||t.getHours()===12?12:t.getHours()<12?t.getHours():t.getHours()-12:n._zPad(t.getHours()===0||t.getHours()===12?12:t.getHours()<12?t.getHours():t.getHours()-12);case"m":return i==="-"?t.getMonth()+1:n._zPad(t.getMonth()+1);case"M":return i==="-"?t.getMinutes():n._zPad(t.getMinutes());case"p":return t.getHours()<12?r.meridiemLetters[0].toUpperCase():r.meridiemLetters[1].toUpperCase();case"P":return t.getHours()<12?r.meridiemLetters[0].toLowerCase():r.meridiemLetters[1].toLowerCase();case"s":return t.getEpoch;case"S":return i==="-"?t.getSeconds():n._zPad(t.getSeconds());case"w":return t.getDay();case"y":return t.getFullYear().toString().substr(2,2);case"Y":return t.getFullYear();case"o":return n._makeOrd(t.getDate());default:return e}}):(e=e.replace("HH",this._zPad(t.getHours())),e=e.replace("GG",t.getHours()),e=e.replace("hh",this._zPad(t.getHours()===0||t.getHours()===12?12:t.getHours()<12?t.getHours():t.getHours()-12)),e=e.replace("gg",t.getHours()===0||t.getHours()===12?12:t.getHours()<12?t.getHours():t.getHours()-12),e=e.replace("ii",this._zPad(t.getMinutes())),e=e.replace("ss",this._zPad(t.getSeconds())),e=e.replace("AA",t.getHours()<12?this.options.meridiemLetters[0].toUpperCase():this.options.meridiemLetters[1].toUpperCase()),e=e.replace("aa",t.getHours()<12?this.options.meridiemLetters[0].toLowerCase():this.options.meridiemLetters[1].toLowerCase()),e=e.replace("SS",this._makeOrd(t.getDate())),e=e.replace("YYYY",t.getFullYear()),e=e.replace("mmmm",this.options.lang[this.options.useLang].monthsOfYearShort[t.getMonth()]),e=e.replace("mmm",this.options.lang[this.options.useLang].monthsOfYear[t.getMonth()]),e=e.replace("MM",this._zPad(t.getMonth()+1)),e=e.replace("mm",t.getMonth()+1),e=e.replace("dddd",this.options.lang[this.options.useLang].daysOfWeekShort[t.getDay()]),e=e.replace("ddd",this.options.lang[this.options.useLang].daysOfWeek[t.getDay()]),e=e.replace("DD",this._zPad(t.getDate())),e=e.replace("dd",t.getDate()),e=e.replace("UU",t.getEpoch())),this.options.lang[this.options.useLang].useArabicIndic===!0&&(e=this._digitReplace(e)),e},_formatHeader:function(e){return this.options.headerFormat!==!1?this._formatter(this.options.headerFormat,e):this._formatter(this.options.lang[this.options.useLang].headerFormat,e)},_formatDate:function(e){return this._formatter(this.options.dateOutput,e)},_formatTime:function(e){var t=this,n=[!1,!1,!1],r,i,s,o,u=this.options.durationFormat,a=[0,0,0,0];return this.options.mode==="durationbox"?(r=this.options.durationFormat,r=r.replace(/ddd/g,".+?"),r=r.replace(/DD|ss|hh|ii/g,"([0-9Dhis]+)"),r=new RegExp("^"+r+"$"),i=r.exec(this.options.durationFormat),s=t.theDate.getEpoch()-t.initDate.getEpoch(),o=s,a[0]=parseInt(s/86400,10),s-=a[0]*60*60*24,a[1]=parseInt(s/3600,10),s-=a[1]*60*60,a[2]=parseInt(s/60,10),s-=a[2]*60,a[3]=s,i[0].match(/DD/)||(n[0]=!0,a[1]=a[1]+a[0]*24),i[0].match(/hh/)||(n[1]=!0,a[2]=a[2]+a[1]*60),i[0].match(/ii/)||(n[2]=!0,a[3]=a[3]+a[2]*60),u=u.replace("DD",a[0]),u=u.replace("ddd",a[0]>1?this.options.lang[this.options.useLang].durationDays[1]:this.options.lang[this.options.useLang].durationDays[0]),u=u.replace("hh",t._zPad(a[1])),u=u.replace("ii",t._zPad(a[2])),u=u.replace("ss",t._zPad(a[3])),this.options.lang[this.options.useLang].useArabicIndic===!0?this._digitReplace(u):u):this._formatter(t.options.timeOutput,e)},_makeDate:function(t){t=e.trim(t);var n=this.options,r=this,i=null,s=null,o=null,u=null,f=new Date,l=[!1,!1,!1],c=[f.getFullYear(),f.getMonth(),f.getDate(),f.getHours(),f.getMinutes(),f.getSeconds(),0],h;n.lang[this.options.useLang].useArabicIndic===!0&&(t=this._digitReplace(t,-1));if(n.mode==="durationbox"){i=n.durationFormat,i=i.replace(/ddd/g,".+?"),i=i.replace(/DD|ss|hh|ii/g,"([0-9Dhis]+)"),i=new RegExp("^"+i+"$"),s=i.exec(t),o=i.exec(n.durationFormat);if(s===null||s.length!==o.length)return typeof n.defaultPickerValue=="number"&&n.defaultPickerValue>0?new Date((r.initDate.getEpoch()+parseInt(n.defaultPickerValue,10))*1e3):new Date(r.initDate.getTime());u=r.initDate.getEpoch();for(h=0;h<s.length;h++)o[h].match(/^DD$/i)&&(u+=parseInt(s[h],10)*60*60*24),o[h].match(/^hh$/i)&&(u+=parseInt(s[h],10)*60*60),o[h].match(/^ii$/i)&&(u+=parseInt(s[h],10)*60),o[h].match(/^ss$/i)&&(u+=parseInt(s[h],10));return new Date(u*1e3)}n.mode==="timebox"||n.mode==="timeflipbox"?i=n.timeOutput:i=n.dateOutput;if(i.match(/%/)){i=i.replace(/%(0|-)*([a-z])/gi,function(e,t,n,r,i){switch(n){case"p":case"P":case"b":case"B":return"("+e+"|.+?)";case"H":case"k":case"I":case"l":case"m":case"M":case"S":case"d":return"("+e+"|"+(t==="-"?"[0-9]{1,2}":"[0-9]{2}")+")";case"s":return"("+e+"|[0-9]+)";case"y":return"("+e+"|[0-9]{2})";case"Y":return"("+e+"|[0-9]{1,4})";default:return".+?"}}),i=new RegExp("^"+i+"$"),s=i.exec(t),n.mode==="timebox"||n.mode==="timeflipbox"?o=i.exec(n.timeOutput):o=i.exec(n.dateOutput);if(s===null||s.length!==o.length){if(n.defaultPickerValue!==!1){if(e.isArray(n.defaultPickerValue)&&n.defaultPickerValue.length===3)return n.mode==="timebox"||n.mode==="timeflipbox"?new Date(c[0],c[1],c[2],n.defaultPickerValue[0],n.defaultPickerValue[1],n.defaultPickerValue[2],0):new Date(n.defaultPickerValue[0],n.defaultPickerValue[1],n.defaultPickerValue[2],0,0,0,0);if(typeof n.defaultPickerValue=="number")return new Date(n.defaultPickerValue*1e3);n.mode==="timebox"||n.mode==="timeflipbox"?(u=n.defaultPickerValue.split(":"),u.length===3&&(f=new Date(c[0],c[1],c[2],parseInt(u[0],10),parseInt(u[1],10),parseInt(u[2],10),0),isNaN(f.getDate())&&(f=new Date))):(u=n.defaultPickerValue.split("-"),u.length===3&&(f=new Date(parseInt(u[0],10),parseInt(u[1],10)-1,parseInt(u[2],10),0,0,0,0),isNaN(f.getDate())&&(f=new Date)))}}else for(h=0;h<s.length;h++)o[h]==="%s"&&(c[6]=parseInt(s[h],10)),o[h].match(/^%.*S$/)&&(c[5]=parseInt(s[h],10)),o[h].match(/^%.*M$/)&&(c[4]=parseInt(s[h],10)),o[h].match(/^%.*(H|k|I|l)$/)&&(c[3]=parseInt(s[h],10)),o[h].match(/^%.*d$/)&&(c[2]=parseInt(s[h],10)),o[h].match(/^%.*m$/)&&(c[1]=parseInt(s[h],10)-1),o[h].match(/^%.*Y$/)&&(c[0]=parseInt(s[h],10)),o[h].match(/^%.*y$/)&&(n.afterToday===!0?c[0]=parseInt("20"+s[h],10):parseInt(s[h],10)<38?c[0]=parseInt("20"+s[h],10):c[0]=parseInt("19"+s[h],10)),o[h].match(/^%(0|-)*(p|P)$/)&&(s[h].toLowerCase().charAt(0)==="a"&&c[3]===12?c[3]=0:s[h].toLowerCase().charAt(0)==="p"&&c[3]!==12&&(c[3]=c[3]+12)),o[h]==="%B"&&(u=e.inArray(s[h],n.lang[n.useLang].monthsOfYear),u>-1&&(c[1]=u)),o[h]==="%b"&&(u=e.inArray(s[h],n.lang[n.useLang].monthsOfYearShort),u>-1&&(c[1]=u));return o[0].match(/%s/)?f=new Date(c[6]*1e3):o[0].match(/%(.)*(I|l|H|k|s|M)/)?(f=new Date(c[0],c[1],c[2],c[3],c[4],c[5],0),c[0]<100&&f.setFullYear(c[0])):(f=new Date(c[0],c[1],c[2],0,0,0,0),c[0]<100&&f.setFullYear(c[0])),f}i=i.replace(/dddd|mmmm/g,"(.+?)"),i=i.replace(/ddd|SS/g,".+?"),i=i.replace(/mmm/g,"(.+?)"),i=i.replace(/ *AA/ig," *(.*?)"),i=i.replace(/yyyy|dd|mm|gg|hh|ii/ig,"([0-9yYdDmMgGhHi]+)"),i=i.replace(/ss|UU/g,"([0-9sU]+)"),i=new RegExp("^"+i+"$"),s=i.exec(t),n.mode==="timebox"||n.mode==="timeflipbox"?o=i.exec(n.timeOutput):o=i.exec(n.dateOutput);if(s===null||s.length!==o.length){if(n.defaultPickerValue!==!1){if(e.isArray(n.defaultPickerValue)&&n.defaultPickerValue.length===3)return n.mode==="timebox"||n.mode==="timeflipbox"?new Date(c[0],c[1],c[2],n.defaultPickerValue[0],n.defaultPickerValue[1],n.defaultPickerValue[2],0):new Date(n.defaultPickerValue[0],n.defaultPickerValue[1],n.defaultPickerValue[2],0,0,0,0);if(typeof n.defaultPickerValue=="number")return new Date(n.defaultPickerValue*1e3);n.mode==="timebox"||n.mode==="timeflipbox"?(u=n.defaultPickerValue.split(":"),u.length===3&&(f=new Date(c[0],c[1],c[2],parseInt(u[0],10),parseInt(u[1],10),parseInt(u[2],10),0),isNaN(f.getDate())&&(f=new Date))):(u=n.defaultPickerValue.split("-"),u.length===3&&(f=new Date(parseInt(u[0],10),parseInt(u[1],10)-1,parseInt(u[2],10),0,0,0,0),isNaN(f.getDate())&&(f=new Date)))}}else for(h=0;h<s.length;h++)o[h].match(/^UU$/)&&(c[6]=parseInt(s[h],10)),o[h].match(/^gg$/i)&&(c[3]=parseInt(s[h],10)),o[h].match(/^hh$/i)&&(c[3]=parseInt(s[h],10)),o[h].match(/^ii$/i)&&(c[4]=parseInt(s[h],10)),o[h].match(/^ss$/)&&(c[5]=parseInt(s[h],10)),o[h].match(/^dd$/i)&&(c[2]=parseInt(s[h],10)),o[h].match(/^mm$/i)&&(c[1]=parseInt(s[h],10)-1),o[h].match(/^yyyy$/i)&&(c[0]=parseInt(s[h],10)),o[h].match(/^AA$/i)&&(s[h].toLowerCase().charAt(0)==="a"&&c[3]===12?c[3]=0:s[h].toLowerCase().charAt(0)==="p"&&c[3]!==12&&(c[3]=c[3]+12)),o[h].match(/^mmm$/i)&&(u=e.inArray(s[h],n.lang[n.useLang].monthsOfYear),u>-1&&(c[1]=u)),o[h].match(/^mmmm$/i)&&(u=e.inArray(s[h],n.lang[n.useLang].monthsOfYearShort),u>-1&&(c[1]=u));return o[0].match(/UU/)?new Date(c[6]*1e3):o[0].match(/G|g|i|s|H|h|A/)?new Date(c[0],c[1],c[2],c[3],c[4],c[5],0):new Date(c[0],c[1],c[2],0,0,0,0)},_hoover:function(t){e(t).toggleClass("ui-btn-up-"+e(t).jqmData("theme")+" ui-btn-down-"+e(t).jqmData("theme"))},_offset:function(e,t,n){var r=this,i=this.options,s=!1;typeof n=="undefined"&&(n=!0),r.input.trigger("datebox",{method:"offset",type:e,amount:t});switch(e){case"y":s=!0;break;case"m":if(i.rolloverMode.m||r.theDate.getMonth()+t<12&&r.theDate.getMonth()+t>-1)s=!0;break;case"d":if(i.rolloverMode.d||r.theDate.getDate()+t>0&&r.theDate.getDate()+t<r._getLastDate(r.theDate)+1)s=!0;break;case"h":if(i.rolloverMode.h||r.theDate.getHours()+t>-1&&r.theDate.getHours()+t<24)s=!0;break;case"i":if(i.rolloverMode.i||r.theDate.getMinutes()+t>-1&&r.theDate.getMinutes()+t<60)s=!0;break;case"s":if(i.rolloverMode.s||r.theDate.getSeconds()+t>-1&&r.theDate.getSeconds()+t<60)s=!0;break;case"a":r.pickerMeri.val()===i.meridiemLetters[0]?r._offset("h",12,!1):r._offset("h",-12,!1)}s===!0&&r.theDate.adjust(e,t),n===!0&&r._update()},_updateduration:function(){var e=this,t=e.initDate.getEpoch();e._isInt(e.pickerDay.val())||e.pickerDay.val(0),e._isInt(e.pickerHour.val())||e.pickerHour.val(0),e._isInt(e.pickerMins.val())||e.pickerMins.val(0),e._isInt(e.pickerSecs.val())||e.pickerSecs.val(0),t+=parseInt(e.pickerDay.val(),10)*60*60*24,t+=parseInt(e.pickerHour.val(),10)*60*60,t+=parseInt(e.pickerMins.val(),10)*60,t+=parseInt(e.pickerSecs.val(),10),e.theDate.setTime(t*1e3),e._update()},_checkConstraints:function(){var t=this,n=null,r=this.options;t.dateOK=!0,r.afterToday!==!1&&(n=new Date,t.theDate<n&&(t.theDate=n)),r.beforeToday!==!1&&(n=new Date,t.theDate>n&&(t.theDate=n)),r.maxDays!==!1&&(n=new Date,n.adjust("d",r.maxDays),t.theDate>n&&(t.theDate=n)),r.minDays!==!1&&(n=new Date,n.adjust("d",-1*r.minDays),t.theDate<n&&(t.theDate=n)),r.maxYear!==!1&&(n=new Date(r.maxYear,0,1),n.adjust("d",-1),t.theDate>n&&(t.theDate=n)),r.minYear!==!1&&(n=new Date(r.minYear,0,1),t.theDate<n&&(t.theDate=n)),r.blackDates!==!1&&e.inArray(t.theDate.getISO(),r.blackDates)>-1&&(t.dateOK=!1),r.blackDays!==!1&&e.inArray(t.theDate.getDay(),r.blackDays)>-1&&(t.dateOK=!1),e.inArray(r.mode,["timebox","durationbox","timeflipbox"])>-1&&(t.dateOK=!0)},_orientChange:function(e){var t=e.data.widget,n=e.data.widget.options,r=e.data.widget._getCoords(e.data.widget);e.stopPropagation();if(!t.pickerContent.is(":visible")||n.useDialog===!0)return!1;n.fullScreen==1&&(r.width<400||n.fullScreenForce===!0)?t.pickerContent.css({top:r.fullTop,left:r.fullLeft,height:r.high,width:r.width,maxWidth:r.width}):t.pickerContent.css({top:r.winTop,left:r.winLeft})},_update:function(){var t=this,n=t.options,r=null,i,s,o,u,f,l,c,h,p,d,v,m={d:86400,h:3600,i:60,s:1},g={};t.input.trigger("datebox",{method:"refresh"}),n.mode==="durationbox"&&(i=t.theDate.getEpoch()-t.initDate.getEpoch(),i<0&&(i=0,t.theDate.setTime(t.initDate.getTime())),n.lastDuration=i,l=parseInt(i/m.d,10),i-=l*m.d,t.pickerDay.val(l),l=parseInt(i/m.h,10),i-=l*m.h,t.pickerHour.val(l),l=parseInt(i/m.i,10),i-=l*m.i,t.pickerMins.val(l),t.pickerSecs.val(parseInt(i,10))),n.mode==="timebox"&&(n.minuteStep!==1&&(i=t.theDate.getMinutes()%n.minuteStep,i!==0&&t.theDate.adjust("m",-1*i)),t.pickerMins.val(t._zPad(t.theDate.getMinutes())),n.lang[n.useLang].timeFormat===12||n.timeFormatOverride===12?t.theDate.getHours()>11?(t.pickerMeri.val(n.meridiemLetters[1]),t.theDate.getHours()===12?t.pickerHour.val(12):t.pickerHour.val(t.theDate.getHours()-12)):(t.pickerMeri.val(n.meridiemLetters[0]),t.theDate.getHours()===0?t.pickerHour.val(12):t.pickerHour.val(t.theDate.getHours())):t.pickerHour.val(t.theDate.getHours()));if(n.mode==="flipbox"||n.mode==="timeflipbox"){t._checkConstraints(),h=t._makeDate(t.input.val()),t.controlsHeader.empty().html(t._formatHeader(t.theDate));for(l=0;l<n.fieldsOrder.length;l++){d=!0;switch(n.fieldsOrder[l]){case"y":f=t.pickerYar.find("ul"),f.empty();for(i=-15;i<16;i++)c=h.getFullYear()===t.theDate.getFullYear()+i?n.pickPageHighButtonTheme:n.pickPageFlipButtonTheme,i===0&&(c=n.pickPageButtonTheme),e("<li>",{"class":"ui-body-"+c,style:d===!0?"margin-top: -453px":""}).html("<span>"+(t.theDate.getFullYear()+i)+"</span>").appendTo(f),d=!1;break;case"m":f=t.pickerMon.find("ul"),f.empty();for(i=-12;i<13;i++)r=new Date(t.theDate.getFullYear(),t.theDate.getMonth(),1),r.adjust("m",i),c=h.getMonth()===r.getMonth()&&h.getYear()===r.getYear()?n.pickPageHighButtonTheme:n.pickPageFlipButtonTheme,i===0&&(c=n.pickPageButtonTheme),e("<li>",{"class":"ui-body-"+c,style:d===!0?"margin-top: -357px":""}).html("<span>"+n.lang[n.useLang].monthsOfYearShort[r.getMonth()]+"</span>").appendTo(f),d=!1;break;case"d":f=t.pickerDay.find("ul"),f.empty();for(i=-15;i<16;i++){r=t.theDate.copy(),r.adjust("d",i),v="";if(n.blackDates!==!1&&e.inArray(r.getISO(),n.blackDates)>-1||n.blackDays!==!1&&e.inArray(r.getDay(),n.blackDays)>-1)v=" ui-datebox-griddate-disable";c=h.getDate()===r.getDate()&&h.getMonth()===r.getMonth()&&h.getYear()===r.getYear()?n.pickPageHighButtonTheme:n.pickPageFlipButtonTheme,i===0&&(c=n.pickPageButtonTheme),e("<li>",{"class":"ui-body-"+c+v,style:d===!0?"margin-top: -453px":""}).html("<span>"+r.getDate()+"</span>").appendTo(f),d=!1}break;case"h":f=t.pickerHour.find("ul"),f.empty();for(i=-12;i<13;i++)r=t.theDate.copy(),r.adjust("h",i),c=i===0?n.pickPageButtonTheme:n.pickPageFlipButtonTheme,e("<li>",{"class":"ui-body-"+c,style:d===!0?"margin-top: -357px"
:""}).html("<span>"+(n.lang[n.useLang].timeFormat===12||n.timeFormatOverride===12?r.getHours()===0?"12":r.getHours()<12?r.getHours():r.getHours()===12?"12":r.getHours()-12:r.getHours())+"</span>").appendTo(f),d=!1;break;case"i":f=t.pickerMins.find("ul"),f.empty();for(i=-30;i<31;i++)n.minuteStep>1&&t.theDate.setMinutes(t.theDate.getMinutes()-t.theDate.getMinutes()%n.minuteStep),r=t.theDate.copy(),r.adjust("i",i*n.minuteStep),c=i===0?n.pickPageButtonTheme:n.pickPageFlipButtonTheme,e("<li>",{"class":"ui-body-"+c,style:d===!0?"margin-top: -933px":""}).html("<span>"+t._zPad(r.getMinutes())+"</span>").appendTo(f),d=!1;break;case"a":f=t.pickerMeri.find("ul"),f.empty(),t.theDate.getHours()>11?(d="-65",c=[n.pickPageFlipButtonTheme,n.pickPageButtonTheme]):(d="-33",c=[n.pickPageButtonTheme,n.pickPageFlipButtonTheme]),e("<li>").appendTo(f).clone().appendTo(f),e("<li>",{"class":"ui-body-"+c[0],style:"margin-top: "+d+"px"}).html("<span>"+n.meridiemLetters[0]+"</span>").appendTo(f),e("<li>",{"class":"ui-body-"+c[1]}).html("<span>"+n.meridiemLetters[1]+"</span>").appendTo(f),e("<li>").appendTo(f).clone().appendTo(f)}}}if(n.mode==="slidebox"){t._checkConstraints(),h=t._makeDate(t.input.val()),t.controlsHeader.empty().html(t._formatHeader(t.theDate)),t.controlsInput.empty(),t.controlsInput.delegate(".ui-datebox-sliderow-int>div",n.clickEvent,function(n){n.preventDefault(),t._offset(e(this).parent().jqmData("rowtype"),parseInt(e(this).jqmData("offset"),10))}),t.controlsInput.delegate(".ui-datebox-sliderow-int>div","vmouseover vmouseout",function(){t._hoover(this)}),n.wheelExists&&t.controlsInput.delegate(".ui-datebox-sliderow-int","mousewheel",function(n,r){n.preventDefault(),t._offset(e(this).jqmData("rowtype"),r>0?1:-1)}),n.swipeEnabled&&t.controlsInput.delegate(".ui-datebox-sliderow-int",t.START_DRAG,function(n){t.dragMove||(t.dragMove=!0,t.dragTarget=e(this),t.dragPos=parseInt(t.dragTarget.css("marginLeft").replace(/px/i,""),10),t.dragStart=t.touch?n.originalEvent.changedTouches[0].pageX:n.pageX,t.dragEnd=!1,n.stopPropagation(),n.preventDefault())});for(l=0;l<n.fieldsOrder.length;l++){p=e("<div>").jqmData("rowtype",n.fieldsOrder[l]),f=e("<div>",{"class":"ui-datebox-sliderow-int"}).jqmData("rowtype",n.fieldsOrder[l]).appendTo(p),n.lang[n.useLang].isRTL===!0&&f.css("direction","rtl");switch(n.fieldsOrder[l]){case"y":p.addClass("ui-datebox-sliderow-ym"),f.css("marginLeft","-333px");for(i=-5;i<6;i++)c=h.getFullYear()===t.theDate.getFullYear()+i?n.pickPageHighButtonTheme:n.pickPageSlideButtonTheme,i===0&&(c=n.pickPageButtonTheme),e("<div>",{"class":"ui-datebox-slideyear ui-corner-all ui-btn-up-"+c}).html(t.theDate.getFullYear()+i).jqmData("offset",i).jqmData("theme",c).appendTo(f);break;case"m":p.addClass("ui-datebox-sliderow-ym"),f.css("marginLeft","-204px");for(i=-6;i<7;i++)r=new Date(t.theDate.getFullYear(),t.theDate.getMonth(),1),r.adjust("m",i),c=h.getMonth()===r.getMonth()&&h.getYear()===r.getYear()?n.pickPageHighButtonTheme:n.pickPageSlideButtonTheme,i===0&&(c=n.pickPageButtonTheme),e("<div>",{"class":"ui-datebox-slidemonth ui-corner-all ui-btn-up-"+c}).jqmData("offset",i).jqmData("theme",c).html(n.lang[n.useLang].monthsOfYearShort[r.getMonth()]).appendTo(f);break;case"d":p.addClass("ui-datebox-sliderow-d"),f.css("marginLeft","-386px");for(i=-15;i<16;i++){r=t.theDate.copy(),r.adjust("d",i),v="";if(n.blackDates!==!1&&e.inArray(r.getISO(),n.blackDates)>-1||n.blackDays!==!1&&e.inArray(r.getDay(),n.blackDays)>-1)v=" ui-datebox-griddate-disable";c=h.getDate()===r.getDate()&&h.getMonth()===r.getMonth()&&h.getYear()===r.getYear()?n.pickPageHighButtonTheme:n.pickPageSlideButtonTheme,i===0&&(c=n.pickPageButtonTheme),e("<div>",{"class":"ui-datebox-slideday ui-corner-all ui-btn-up-"+c+v}).jqmData("offset",i).jqmData("theme",c).html(r.getDate()+'<br /><span class="ui-datebox-slidewday">'+n.lang[n.useLang].daysOfWeekShort[r.getDay()]+"</span>").appendTo(f)}break;case"h":p.addClass("ui-datebox-sliderow-hi"),f.css("marginLeft","-284px");for(i=-12;i<13;i++)r=t.theDate.copy(),r.adjust("h",i),c=i===0?n.pickPageButtonTheme:n.pickPageSlideButtonTheme,e("<div>",{"class":"ui-datebox-slidehour ui-corner-all ui-btn-up-"+c}).jqmData("offset",i).jqmData("theme",c).html(n.lang[n.useLang].timeFormat===12||n.timeFormatOverride===12?r.getHours()===0?'12<span class="ui-datebox-slidewday">AM</span>':r.getHours()<12?r.getHours()+'<span class="ui-datebox-slidewday">AM</span>':r.getHours()===12?'12<span class="ui-datebox-slidewday">PM</span>':r.getHours()-12+'<span class="ui-datebox-slidewday">PM</span>':r.getHours()).appendTo(f);break;case"i":p.addClass("ui-datebox-sliderow-hi"),f.css("marginLeft","-896px");for(i=-30;i<31;i++)r=t.theDate.copy(),r.adjust("i",i),c=i===0?n.pickPageButtonTheme:n.pickPageSlideButtonTheme,e("<div>",{"class":"ui-datebox-slidemins ui-corner-all ui-btn-up-"+c}).jqmData("offset",i).jqmData("theme",c).html(t._zPad(r.getMinutes())).appendTo(f)}p.appendTo(t.controlsInput)}}n.mode==="datebox"&&(t._checkConstraints(),t.controlsHeader.empty().html(t._formatHeader(t.theDate)),t.pickerMon.val(t.theDate.getMonth()+1),t.pickerDay.val(t.theDate.getDate()),t.pickerYar.val(t.theDate.getFullYear()),t.dateOK!==!0?t.controlsInput.find("input").addClass("ui-datebox-griddate-disable"):t.controlsInput.find(".ui-datebox-griddate-disable").removeClass("ui-datebox-griddate-disable"));if(n.mode==="calbox"){t.controlsInput.empty().html(n.lang[n.useLang].monthsOfYear[t.theDate.getMonth()]+" "+t.theDate.getFullYear()),t.controlsPlus.empty(),g={today:-1,highlightDay:-1,presetDay:-1,nexttoday:1,thisDate:new Date,maxDate:new Date,minDate:new Date,startDay:!1,currentMonth:!1,weekMode:0,weekDays:null,thisTheme:n.pickPageButtonTheme},g.start=t._getFirstDay(t.theDate),g.end=t._getLastDate(t.theDate),g.lastend=t._getLastDateBefore(t.theDate),g.presetDate=t._makeDate(t.input.val());if(n.calStartDay!==!1||typeof n.lang[n.useLang].calStartDay=="number")n.calStartDay!==!1?(g.start=g.start-n.calStartDay,g.startDay=n.calStartDay):(g.start=g.start-n.lang[n.useLang].calStartDay,g.startDay=n.lang[n.useLang].calStartDay),g.start<0&&(g.start=g.start+7);g.prevtoday=g.lastend-(g.start-1),g.checkDates=n.enableDates===!1&&(n.afterToday!==!1||n.beforeToday!==!1||n.notToday!==!1||n.maxDays!==!1||n.minDays!==!1||n.blackDates!==!1||n.blackDays!==!1),g.thisDate.getMonth()===t.theDate.getMonth()&&g.thisDate.getFullYear()===t.theDate.getFullYear()&&(g.currentMonth=!0,g.highlightDay=g.thisDate.getDate()),g.presetDate.getComp()===t.theDate.getComp()&&(g.presetDay=g.presetDate.getDate()),t.calNoPrev=!1,t.calNoNext=!1,n.afterToday===!0&&(g.currentMonth===!0||g.thisDate.getMonth()>=t.theDate.getMonth()&&t.theDate.getFullYear()===g.thisDate.getFullYear())&&(t.calNoPrev=!0),n.beforeToday===!0&&(g.currentMonth===!0||g.thisDate.getMonth()<=t.theDate.getMonth()&&t.theDate.getFullYear()===g.thisDate.getFullYear())&&(t.calNoNext=!0),n.minDays!==!1&&(g.minDate.adjust("d",-1*n.minDays),t.theDate.getFullYear()===g.minDate.getFullYear()&&t.theDate.getMonth()<=g.minDate.getMonth()&&(t.calNoPrev=!0)),n.maxDays!==!1&&(g.maxDate.adjust("d",n.maxDays),t.theDate.getFullYear()===g.maxDate.getFullYear()&&t.theDate.getMonth()>=g.maxDate.getMonth()&&(t.calNoNext=!0));if(n.calShowDays){n.lang[n.useLang].daysOfWeekShort.length<8&&(n.daysOfWeekShort=n.lang[n.useLang].daysOfWeekShort.concat(n.lang[n.useLang].daysOfWeekShort)),g.weekDays=e("<div>",{"class":"ui-datebox-gridrow"}).appendTo(t.controlsPlus),n.lang[n.useLang].isRTL===!0&&g.weekDays.css("direction","rtl");for(i=0;i<=6;i++)e("<div>"+n.lang[n.useLang].daysOfWeekShort[(i+g.startDay)%7]+"</div>").addClass("ui-datebox-griddate ui-datebox-griddate-empty ui-datebox-griddate-label").appendTo(g.weekDays)}n.fixDateArrays===!0&&(n.blackDates=t._fixArray(n.blackDates),n.highDates=t._fixArray(n.highDates),n.highDatesAlt=t._fixArray(n.highDatesAlt),n.enableDates=t._fixArray(n.enableDates));for(s=0;s<=5;s++){if(s===0||s>0&&g.today>0&&g.today<=g.end){f=e("<div>",{"class":"ui-datebox-gridrow"}),n.lang[n.useLang].isRTL===!0&&f.css("direction","rtl");for(o=0;o<=6;o++)o===0&&(g.weekMode=g.today<1?g.prevtoday-g.lastend+n.calWeekModeFirstDay:g.today+n.calWeekModeFirstDay),o===g.start&&s===0&&(g.today=1),g.today>g.end&&(g.today=-1),g.today<1?n.calShowOnlyMonth?e("<div>",{"class":"ui-datebox-griddate ui-datebox-griddate-empty"}).appendTo(f):(n.enableDates!==!1?e.inArray(t.theDate.copymod([0,-1],[0,0,g.prevtoday]).getISO(),n.enableDates)>-1||e.inArray(t.theDate.copymod([0,1],[0,0,g.nexttoday]).getISO(),n.enableDates)>-1?u=!1:u=!0:n.afterToday!==!1&&s===0&&g.thisDate.getMonth()>=t.theDate.getMonth()-1&&t.theDate.getFullYear()===g.thisDate.getFullYear()&&g.thisDate.getDate()>g.prevtoday||n.beforeToday!==!1&&s!==0&&g.thisDate.getMonth()<=t.theDate.getMonth()+1&&t.theDate.getFullYear()===g.thisDate.getFullYear()&&g.thisDate.getDate()<g.nexttoday||n.blackDays!==!1&&e.inArray(o,n.blackDays)>-1||n.blackDates!==!1&&e.inArray(t.theDate.copymod([0,-1],[0,0,g.prevtoday]).getISO(),n.blackDates)>-1||n.blackDates!==!1&&e.inArray(t.theDate.copymod([0,1],[0,0,g.nexttoday]).getISO(),n.blackDates)>-1?u=!0:u=!1,s===0?(e("<div>"+String(g.prevtoday)+"</div>").addClass("ui-datebox-griddate ui-datebox-griddate-empty").appendTo(f).jqmData("date",n.calWeekMode?g.weekMode+g.lastend:g.prevtoday).jqmData("enabled",!u&&!t.calNoPrev).jqmData("month",-1),g.prevtoday++):(e("<div>"+String(g.nexttoday)+"</div>").addClass("ui-datebox-griddate ui-datebox-griddate-empty").appendTo(f).jqmData("date",n.calWeekMode?g.weekMode:g.nexttoday).jqmData("enabled",!u&&!t.calNoNext).jqmData("month",1),g.nexttoday++)):(u=!1,n.enableDates&&e.inArray(t.theDate.copymod([0],[0,0,g.today]).getISO(),n.enableDates)<0&&(u=!0),g.checkDates&&(n.afterToday&&g.thisDate.getComp()>t.theDate.getComp()+g.today-t.theDate.getDate()&&(u=!0),!u&&n.beforeToday&&g.thisDate.getComp()<t.theDate.getComp()+g.today-t.theDate.getDate()&&(u=!0),!u&&n.notToday&&g.today===g.highlightDay&&(u=!0),!u&&n.maxDays!==!1&&g.maxDate.getComp()<t.theDate.getComp()+g.today-t.theDate.getDate()&&(u=!0),!u&&n.minDays!==!1&&g.minDate.getComp()>t.theDate.getComp()+g.today-t.theDate.getDate()&&(u=!0),!u&&(n.blackDays!==!1||n.blackDates!==!1)&&(e.inArray(o,n.blackDays)>-1||e.inArray(t.theDate.copymod([0],[0,0,g.today]).getISO(),n.blackDates)>-1)&&(u=!0)),n.calHighPicked&&g.today===g.presetDay?g.thisTheme=n.pickPageHighButtonTheme:n.calHighToday&&g.today===g.highlightDay?g.thisTheme=n.pickPageTodayButtonTheme:e.isArray(n.highDatesAlt)&&e.inArray(t.theDate.copymod([0],[0,0,g.today]).getISO(),n.highDatesAlt)>-1?g.thisTheme=n.pickPageOAHighButtonTheme:e.isArray(n.highDates)&&e.inArray(t.theDate.copymod([0],[0,0,g.today]).getISO(),n.highDates)>-1?g.thisTheme=n.pickPageOHighButtonTheme:e.isArray(n.highDays)&&e.inArray(o,n.highDays)>-1?g.thisTheme=n.pickPageODHighButtonTheme:g.thisTheme=n.pickPageButtonTheme,e("<div>"+String(g.today)+"</div>").addClass("ui-datebox-griddate ui-corner-all ui-btn-up-"+g.thisTheme+(u?" ui-datebox-griddate-disable":"")).jqmData("date",n.calWeekMode?g.weekMode:g.today).jqmData("theme",g.thisTheme).jqmData("enabled",!u).jqmData("month",0).appendTo(f),g.today++)}f.appendTo(t.controlsPlus)}t.controlsPlus.delegate("div.ui-datebox-griddate",n.clickEvent+" vmouseover vmouseout",function(r){r.type===n.clickEvent?(r.preventDefault(),e(this).jqmData("enabled")&&(e(this).jqmData("month")<0?(t.theDate.adjust("m",-1),t.theDate.setDate(e(this).jqmData("date"))):e(this).jqmData("month")>0?(t.theDate.setDate(e(this).jqmData("date")),n.calWeekMode||t.theDate.adjust("m",1)):t.theDate.setDate(e(this).jqmData("date")),t.input.trigger("datebox",{method:"set",value:t._formatDate(t.theDate),date:t.theDate}),t.input.trigger("datebox",{method:"close"}))):e(this).jqmData("enabled")&&typeof e(this).jqmData("theme")!="undefined"&&(n.calWeekMode!==!1&&n.calWeekModeHighlight===!0?e(this).parent().find("div").each(function(){t._hoover(this)}):t._hoover(this))})}n.lang[this.options.useLang].useArabicIndic===!0&&t._makeDisplayIndic()},_getLongOptions:function(t){var n,r={},i,s;e.mobile.ns==""?i="datebox":i=e.mobile.ns.substr(0,e.mobile.ns.length-1)+"Datebox";for(n in t.data())n.substr(0,i.length)===i&&n.length>i.length&&(s=n.substr(i.length),s=s.charAt(0).toLowerCase()+s.slice(1),r[s]=t.data(n));return r},_create:function(){e(document).trigger("dateboxcreate");var t=this,n=e.extend(this.options,this.element.jqmData("options")),n=typeof this.element.jqmData("options")=="undefined"?e.extend(n,this._getLongOptions(this.element)):n;input=this.element,thisTheme=n.theme===!1&&typeof e(t).jqmData("theme")=="undefined"?typeof input.parentsUntil(":jqmData(theme)").parent().jqmData("theme")=="undefined"?n.defaultTheme:input.parentsUntil(":jqmData(theme)").parent().jqmData("theme"):n.theme,focusedEl=input.wrap('<div class="ui-input-datebox ui-shadow-inset ui-corner-all ui-body-'+thisTheme+'"></div>').parent(),theDate=new Date,initDate=new Date(theDate.getTime()),openbutton=e('<a href="#" class="ui-input-clear" title="'+(typeof n.lang[n.useLang].tooltip!="undefined"?n.lang[n.useLang].tooltip:n.lang.en.tooltip)+'">'+(typeof n.lang[n.useLang].tooltip!="undefined"?n.lang[n.useLang].tooltip:n.lang.en.tooltip)+"</a>").bind(n.clickEvent,function(r){r.preventDefault(),n.disabled||(t.input.trigger("datebox",{method:"open"}),t.focusedEl.addClass("ui-focus")),setTimeout(function(){e(r.target).closest("a").removeClass(e.mobile.activeBtnClass)},300)}).appendTo(focusedEl).buttonMarkup({icon:"grid",iconpos:"notext",corners:!0,shadow:!0}).css({"vertical-align":"middle",display:"inline-block"}),thisPage=input.closest(".ui-page"),ns=typeof e.mobile.ns!="undefined"?e.mobile.ns:"",pickPage=e("<div data-"+ns+"role='dialog' class='ui-dialog-datebox' data-"+ns+"theme='"+(n.forceInheritTheme===!1?n.pickPageTheme:thisTheme)+"' ><div data-"+ns+"role='header' data-"+ns+"backbtn='false' data-"+ns+"theme='a'><div class='ui-title'>PlaceHolder</div></div><div data-"+ns+"role='content'></div></div>").appendTo(e.mobile.pageContainer).page().css("minHeight","0px").css("zIndex",n.zindex).addClass(n.transition),pickPageTitle=pickPage.find(".ui-title"),pickPageContent=pickPage.find(".ui-content"),touch=typeof window.ontouchstart!="undefined",START_EVENT=touch?"touchstart":"mousedown",MOVE_EVENT=touch?"touchmove":"mousemove",END_EVENT=touch?"touchend":"mouseup",dragMove=!1,dragStart=!1,dragEnd=!1,dragPos=!1,dragTarget=!1,dragThisDelta=0,n.theme=thisTheme,e.extend(t,{input:input,focusedEl:focusedEl}),n.forceInheritTheme&&(n.pickPageTheme=thisTheme,n.pickPageInputTheme=thisTheme,n.pickPageButtonTheme=thisTheme),n.defaultPickerValue===!1&&n.defaultDate!==!1&&(n.defaultPickerValue=n.defaultDate),n.numberInputEnhance===!0&&(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPod/i))&&(n.internalInputType="number"),e("label[for='"+input.attr("id")+"']").addClass("ui-input-text").css("verticalAlign","middle"),n.mode==="timeflipbox"&&(n.lang[n.useLang].headerFormat=" "),(n.noButtonFocusMode||n.useInline||n.noButton)&&openbutton.hide(),t.focusedEl.bind(n.clickEvent,function(){!n.disabled&&(n.noButtonFocusMode||n.focusMode)&&(t.input.trigger("datebox",{method:"open"}),t.focusedEl.addClass("ui-focus"),t.input.removeClass("ui-focus"))}),t.input.removeClass("ui-corner-all ui-shadow-inset").focus(function(){n.disabled||t.focusedEl.addClass("ui-focus"),t.input.removeClass("ui-focus")}).blur(function(){t.focusedEl.removeClass("ui-focus"),t.input.removeClass("ui-focus")}).change(function(){t.theDate=t._makeDate(t.input.val()),t._update()}),t.input.bind("datebox",t._dateboxHandler),pickPage.find(".ui-header a").unbind("click vclick").bind(n.clickEvent,function(e){e.preventDefault(),e.stopImmediatePropagation(),t.input.trigger("datebox",{method:"close",fromCloseButton:!1})}),e.extend(t,{pickPage:pickPage,thisPage:thisPage,pickPageContent:pickPageContent,pickPageTitle:pickPageTitle,theDate:theDate,initDate:initDate,touch:touch,START_DRAG:START_EVENT,MOVE_DRAG:MOVE_EVENT,END_DRAG:END_EVENT,dragMove:dragMove,dragStart:dragStart,dragEnd:dragEnd,dragPos:dragPos}),typeof e.event.special.mousewheel!="undefined"&&(n.wheelExists=!0),t._buildPage(),n.swipeEnabled&&(e(document).bind(t.MOVE_DRAG,function(e){if(t.dragMove){if(n.mode==="slidebox")return t.dragEnd=t.touch?e.originalEvent.changedTouches[0].pageX:e.pageX,t.dragTarget.css("marginLeft",t.dragPos+t.dragEnd-t.dragStart+"px"),e.preventDefault(),e.stopPropagation(),!1;if(n.mode==="flipbox"||n.mode==="timeflipbox")return t.dragEnd=t.touch?e.originalEvent.changedTouches[0].pageY:e.pageY,t.dragTarget.css("marginTop",t.dragPos+t.dragEnd-t.dragStart+"px"),e.preventDefault(),e.stopPropagation(),!1;if(n.mode==="durationbox"||n.mode==="timebox"||n.mode==="datebox")return t.dragEnd=t.touch?e.originalEvent.changedTouches[0].pageY:e.pageY,(t.dragEnd-t.dragStart)%2===0&&(dragThisDelta=(t.dragEnd-t.dragStart)/-2,dragThisDelta<t.dragPos?t._offset(t.dragTarget,-1*(t.dragTarget==="i"?n.minuteStep:1)):dragThisDelta>t.dragPos&&t._offset(t.dragTarget,t.dragTarget==="i"?n.minuteStep:1),t.dragPos=dragThisDelta),e.preventDefault(),e.stopPropagation(),!1}}),e(document).bind(t.END_DRAG,function(e){if(t.dragMove){t.dragMove=!1;if(n.mode==="slidebox"){if(t.dragEnd!==!1&&Math.abs(t.dragStart-t.dragEnd)>25){e.preventDefault(),e.stopPropagation();switch(t.dragTarget.parent().jqmData("rowtype")){case"y":t._offset("y",parseInt((t.dragStart-t.dragEnd)/84,10));break;case"m":t._offset("m",parseInt((t.dragStart-t.dragEnd)/51,10));break;case"d":t._offset("d",parseInt((t.dragStart-t.dragEnd)/32,10));break;case"h":t._offset("h",parseInt((t.dragStart-t.dragEnd)/32,10));break;case"i":t._offset("i",parseInt((t.dragStart-t.dragEnd)/32,10))}}}else if(n.mode==="flipbox"||n.mode==="timeflipbox")if(t.dragEnd!==!1){e.preventDefault(),e.stopPropagation();var r=t.dragTarget.parent().parent().jqmData("field"),i=parseInt((t.dragStart-t.dragEnd)/30,10);t._offset(r,i*(r==="i"?n.minuteStep:1))}t.dragStart=!1,t.dragEnd=!1}})),t.input.is(":disabled")&&t.disable(),n.disableManualInput===!0&&t.input.attr("readonly",!0),e(document).trigger("dateboxaftercreate")},_makeElement:function(e,t){var n=this,r=!1,i=!1;i=e.clone();if(typeof t.attr!="undefined")for(r in t.attr)t.attr.hasOwnProperty(r)&&i.jqmData(r,t.attr[r]);return i},_eventEnterValue:function(e){var t=this,n=t.options,r=!1;if(e.val()!==""&&t._isInt(e.val())){switch(e.jqmData("field")){case"m":t.theDate.setMonth(parseInt(e.val(),10)-1);break;case"d":t.theDate.setDate(parseInt(e.val(),10));break;case"y":t.theDate.setFullYear(parseInt(e.val(),10));break;case"i":t.theDate.setMinutes(parseInt(e.val(),10));break;case"h":r=parseInt(e.val(),10),r===12&&(n.lang[n.useLang].timeFormat===12||n.timeFormatOverride===12)&&t.pickerMeri.val()===n.meridiemLetters[0]&&(r=0),t.theDate.setHours(r)}t._update()}},_buildInternals:function(){var t=this,n=t.options,r,i,s,o,u=e("<div><a href='#'></a></div>"),f=e("<div>",{"class":"ui-datebox-container ui-overlay-shadow ui-corner-all ui-datebox-hidden pop ui-body-"+n.pickPageTheme}).css("zIndex",n.zindex),l=e("<input type='"+n.internalInputType+"' />").addClass("ui-input-text ui-corner-all ui-shadow-inset ui-datebox-input ui-body-"+n.pickPageInputTheme),c=e("<input type='text' />").addClass("ui-input-text ui-corner-all ui-shadow-inset ui-datebox-input ui-body-"+n.pickPageInputTheme),h=e("<div>",{"class":"ui-datebox-controls"}),p=e("<div class='ui-overlay-shadow'><ul></ul></div>"),d,v,m,g,y,b,w,E,S,x,T,N;t.calNoNext=!1,t.calNoPrev=!1,t.setButton=!1,t.clearButton=!1,t.dateOK=!0;if(n.fieldsOrderOverride===!1)switch(n.mode){case"timebox":case"timeflipbox":n.fieldsOrder=n.lang[n.useLang].timeFieldOrder;break;case"slidebox":n.fieldsOrder=n.lang[n.useLang].slideFieldOrder;break;default:n.fieldsOrder=n.lang[n.useLang].dateFieldOrder}else n.fieldsOrder=n.fieldsOrderOverride;n.timeOutputOverride!==!1?n.timeOutput=n.timeOutputOverride:n.timeFormatOverride===!1?n.timeOutput=n.timeFormats[n.lang[n.useLang].timeFormat]:n.timeOutput=n.timeFormats[n.timeFormatOverride],n.dateFormat!==!1?n.dateOutput=n.dateFormat:typeof n.lang[n.useLang].dateFormat!="undefined"?n.dateOutput=n.lang[n.useLang].dateFormat:n.dateOutput=n.defaultDateFormat,t.pickerContent.empty();if(n.mode==="datebox"||n.mode==="timebox"){y=e("<div class='ui-datebox-header'><h4>Unitialized</h4></div>").appendTo(t.pickerContent).find("h4"),d=h.clone().appendTo(t.pickerContent),v=h.clone().appendTo(t.pickerContent),m=h.clone().appendTo(t.pickerContent),g=h.clone().appendTo(t.pickerContent),n.mode==="timebox"&&y.parent().empty(),S=t._makeElement(l,{attr:{field:"m",amount:1}}),x=t._makeElement(l,{attr:{field:"d",amount:1}}),T=t._makeElement(l,{attr:{field:"y",amount:1}}),b=t._makeElement(l,{attr:{field:"h",amount:1}}),w=t._makeElement(l,{attr:{field:"i",amount:1}}),E=t._makeElement(c,{attr:{field:"a",amount:n.minuteStep}}),v.delegate("input","keyup",function(){t._eventEnterValue(e(this))}),n.wheelExists&&v.delegate("input","mousewheel",function(n,r){n.preventDefault(),t._offset(e(this).jqmData("field"),(r<0?-1:1)*e(this).jqmData("amount"))});for(r=0;r<=n.fieldsOrder.length;r++)n.fieldsOrder[r]==="y"&&T.appendTo(v),n.fieldsOrder[r]==="m"&&S.appendTo(v),n.fieldsOrder[r]==="d"&&x.appendTo(v),n.fieldsOrder[r]==="h"&&b.appendTo(v),n.fieldsOrder[r]==="i"&&w.appendTo(v),n.fieldsOrder[r]==="a"&&(n.lang[n.useLang].timeFormat===12||n.timeFormatOverride===12)&&E.appendTo(v);n.swipeEnabled&&v.delegate("input",t.START_DRAG,function(n){t.dragMove||(t.dragMove=!0,t.dragTarget=e(this).jqmData("field"),t.dragPos=0,t.dragStart=t.touch?n.originalEvent.changedTouches[0].pageY:n.pageY,t.dragEnd=!1,n.stopPropagation())}),n.noSetButton===!1&&(t.setButton=e("<a href='#'>PlaceHolder</a>").appendTo(g).buttonMarkup({theme:n.pickPageTheme,icon:"check",iconpos:"left",corners:!0,shadow:!0}).bind(n.clickEvent,function(e){e.preventDefault(),t.dateOK===!0&&(n.mode==="timebox"?t.input.trigger("datebox",{method:"set",value:t._formatTime(t.theDate),date:t.theDate}):t.input.trigger("datebox",{method:"set",value:t._formatDate(t.theDate),date:t.theDate}),t.input.trigger("datebox",{method:"close"}))}));for(r=0;r<t.options.fieldsOrder.length;r++)if(n.fieldsOrder[r]!=="a"||n.lang[n.useLang].timeFormat===12||n.timeFormatOverride===12)for(i=0;i<2;i++)u.clone().appendTo(i===0?d:m).buttonMarkup({theme:n.pickPageButtonTheme,icon:i===0?"plus":"minus",iconpos:"bottom",corners:!0,shadow:!0}).jqmData("field",n.fieldsOrder[r]).jqmData("amount",n.fieldsOrder[r]==="i"?n.minuteStep:1);d.delegate("div",n.clickEvent,function(n){n.preventDefault(),t._offset(e(this).jqmData("field"),e(this).jqmData("amount"))}),m.delegate("div",n.clickEvent,function(n){n.preventDefault(),t._offset(e(this).jqmData("field"),e(this).jqmData("amount")*-1)}),e.extend(t,{controlsHeader:y,pickerDay:x,pickerMon:S,pickerYar:T,pickerHour:b,pickerMins:w,pickerMeri:E,controlsInput:v}),t.pickerContent.appendTo(t.thisPage)}if(n.mode==="durationbox"){d=h.clone().removeClass("ui-datebox-controls").addClass("ui-datebox-scontrols").appendTo(t.pickerContent),v=d.clone().appendTo(t.pickerContent),m=d.clone().appendTo(t.pickerContent),g=h.clone().appendTo(t.pickerContent),x=l.removeClass("ui-datebox-input"),b=x.clone(),w=x.clone(),N=x.clone(),v.delegate("input","keyup",function(){e(this).val()!==""&&t._updateduration()}),n.wheelExists&&v.delegate("input","mousewheel",function(n,r){n.preventDefault(),t._offset(e(this).parent().jqmData("field"),r<0?-1:1)});for(r=0;r<n.durationOrder.length;r++)switch(n.durationOrder[r]){case"d":e("<div>",{"class":"ui-datebox-sinput"}).jqmData("field","d").append(x).appendTo(v).prepend("<label>"+n.lang[n.useLang].durationLabel[0]+"</label>");break;case"h":e("<div>",{"class":"ui-datebox-sinput"}).jqmData("field","h").append(b).appendTo(v).prepend("<label>"+n.lang[n.useLang].durationLabel[1]+"</label>");break;case"i":e("<div>",{"class":"ui-datebox-sinput"}).jqmData("field","i").append(w).appendTo(v).prepend("<label>"+n.lang[n.useLang].durationLabel[2]+"</label>");break;case"s":e("<div>",{"class":"ui-datebox-sinput"}).jqmData("field","s").append(N).appendTo(v).prepend("<label>"+n.lang[n.useLang].durationLabel[3]+"</label>")}n.swipeEnabled&&v.delegate("input",t.START_DRAG,function(n){t.dragMove||(t.dragMove=!0,t.dragTarget=e(this).parent().jqmData("field"),t.dragPos=0,t.dragStart=t.touch?n.originalEvent.changedTouches[0].pageY:n.pageY,t.dragEnd=!1,n.stopPropagation())}),n.noSetButton===!1&&(t.setButton=e("<a href='#'>PlaceHolder</a>").appendTo(g).buttonMarkup({theme:n.pickPageTheme,icon:"check",iconpos:"left",corners:!0,shadow:!0}).bind(n.clickEvent,function(e){e.preventDefault(),t.input.trigger("datebox",{method:"set",value:t._formatTime(t.theDate),date:t.theDate}),t.input.trigger("datebox",{method:"close"})}));for(r=0;r<n.durationOrder.length;r++)for(i=0;i<2;i++)u.clone().appendTo(i===0?d:m).buttonMarkup({theme:n.pickPageButtonTheme,icon:i===0?"plus":"minus",iconpos:"bottom",corners:!0,shadow:!0}).jqmData("field",n.durationOrder[r]);d.delegate("div",n.clickEvent,function(r){r.preventDefault(),t._offset(e(this).jqmData("field"),n.durationSteppers[e(this).jqmData("field")])}),m.delegate("div",n.clickEvent,function(r){r.preventDefault(),t._offset(e(this).jqmData("field"),n.durationSteppers[e(this).jqmData("field")]*-1)}),e.extend(t,{pickerHour:b,pickerMins:w,pickerDay:x,pickerSecs:N}),t.pickerContent.appendTo(t.thisPage)}n.mode==="slidebox"&&(y=e("<div class='ui-datebox-header'><h4>Unitialized</h4></div>").appendTo(t.pickerContent).find("h4"),v=e("<div>").addClass("ui-datebox-slide").appendTo(t.pickerContent),g=e("<div>",{"class":"ui-datebox-controls"}).appendTo(t.pickerContent),n.noSetButton===!1&&(t.setButton=e("<a href='#'>PlaceHolder</a>").appendTo(g).buttonMarkup({theme:n.pickPageTheme,icon:"check",iconpos:"left",corners:!0,shadow:!0}).bind(n.clickEvent,function(e){e.preventDefault(),t.dateOK===!0&&(t.input.trigger("datebox",{method:"set",value:t._formatDate(t.theDate),date:t.theDate}),t.input.trigger("datebox",{method:"close"}))})),e.extend(t,{controlsHeader:y,controlsInput:v}),t.pickerContent.appendTo(t.thisPage));if(n.mode==="flipbox"||n.mode==="timeflipbox"){y=e("<div class='ui-datebox-header'><h4>Unitialized</h4></div>").appendTo(t.pickerContent).find("h4"),v=e("<div>",{"class":"ui-datebox-flipcontent"}).appendTo(t.pickerContent),d=e("<div>",{"class":"ui-datebox-flipcenter ui-overlay-shadow"}).css("pointerEvents","none").appendTo(t.pickerContent),g=h.clone().appendTo(t.pickerContent),x=t._makeElement(p,{attr:{field:"d",amount:1}}),S=t._makeElement(p,{attr:{field:"m",amount:1}}),T=t._makeElement(p,{attr:{field:"y",amount:1}}),b=t._makeElement(p,{attr:{field:"h",amount:1}}),w=t._makeElement(p,{attr:{field:"i",amount:n.minuteStep}}),E=t._makeElement(p,{attr:{field:"a",amount:1}}),n.wheelExists&&v.delegate("div","mousewheel",function(n,r){n.preventDefault(),t._offset(e(this).jqmData("field"),(r<0?-1:1)*e(this).jqmData("amount"))});for(r=0;r<=n.fieldsOrder.length;r++)n.fieldsOrder[r]==="y"&&T.appendTo(v),n.fieldsOrder[r]==="m"&&S.appendTo(v),n.fieldsOrder[r]==="d"&&x.appendTo(v),n.fieldsOrder[r]==="h"&&b.appendTo(v),n.fieldsOrder[r]==="i"&&w.appendTo(v),n.fieldsOrder[r]==="a"&&(n.lang[n.useLang].timeFormat===12||n.timeFormatOverride===12)&&E.appendTo(v);n.swipeEnabled&&(v.delegate("ul",t.START_DRAG,function(n,r){t.dragMove||(typeof r!="undefined"&&(n=r),t.dragMove=!0,t.dragTarget=e(this).find("li").first(),t.dragPos=parseInt(t.dragTarget.css("marginTop").replace(/px/i,""),10),t.dragStart=t.touch?n.originalEvent.changedTouches[0].pageY:n.pageY,t.dragEnd=!1,n.stopPropagation(),n.preventDefault())}),d.bind(t.START_DRAG,function(r){t.dragMove||(t.dragTarget=t.touch?r.originalEvent.changedTouches[0].pageX-e(r.currentTarget).offset().left:r.pageX-e(r.currentTarget).offset().left,n.fieldsOrder.length===3?e(t.controlsInput.find("ul").get(parseInt(t.dragTarget/87,10))).trigger(t.START_DRAG,r):n.fieldsOrder.length===2&&e(t.controlsInput.find("ul").get(parseInt(t.dragTarget/130,10))).trigger(t.START_DRAG,r))})),n.noSetButton===!1&&(t.setButton=e("<a href='#'>PlaceHolder</a>").appendTo(g).buttonMarkup({theme:n.pickPageTheme,icon:"check",iconpos:"left",corners:!0,shadow:!0}).bind(n.clickEvent,function(e){e.preventDefault(),t.dateOK===!0&&(n.mode==="timeflipbox"?t.input.trigger("datebox",{method:"set",value:t._formatTime(t.theDate),date:t.theDate}):t.input.trigger("datebox",{method:"set",value:t._formatDate(t.theDate),date:t.theDate}),t.input.trigger("datebox",{method:"close"}))})),e.extend(t,{controlsHeader:y,controlsInput:v,pickerDay:x,pickerMon:S,pickerYar:T,pickerHour:b,pickerMins:w,pickerMeri:E}),t.pickerContent.appendTo(t.thisPage)}n.mode==="calbox"&&(y=e("<div>",{"class":"ui-datebox-gridheader"}).appendTo(t.pickerContent),d=e("<div>",{"class":"ui-datebox-grid"}).appendTo(t.pickerContent),g=h.clone().appendTo(t.pickerContent),v=e("<div class='ui-datebox-gridlabel'><h4>Uninitialized</h4></div>").appendTo(y).find("h4"),n.swipeEnabled&&t.pickerContent.bind("swipeleft",function(){t.calNoNext||t._offset("m",1)}).bind("swiperight",function(){t.calNoPrev||t._offset("m",-1)}),n.wheelExists&&t.pickerContent.bind("mousewheel",function(e,n){e.preventDefault(),n>0&&!t.calNoNext&&(t.theDate.getDate()>28&&t.theDate.setDate(1),t._offset("m",1)),n<0&&!t.calNoPrev&&(t.theDate.getDate()>28&&t.theDate.setDate(1),t._offset("m",-1))}),e("<div class='ui-datebox-gridplus"+(n.lang[n.useLang].isRTL===!0?"-rtl":"")+"'><a href='#'>"+(typeof n.lang[n.useLang].nextMonth!="undefined"?n.lang[n.useLang].nextMonth:n.lang.en.nextMonth)+"</a></div>").prependTo(y).buttonMarkup({theme:n.pickPageButtonTheme,icon:"plus",inline:!0,iconpos:"notext",corners:!0,shadow:!0}).bind(n.clickEvent,function(e){e.preventDefault(),t.calNoNext||(t.theDate.getDate()>28&&t.theDate.setDate(1),t._offset("m",1))}),e("<div class='ui-datebox-gridminus"+(n.lang[n.useLang].isRTL===!0?"-rtl":"")+"'><a href='#'>"+(typeof n.lang[n.useLang].prevMonth!="undefined"?n.lang[n.useLang].prevMonth:n.lang.en.prevMonth)+"</a></div>").prependTo(y).buttonMarkup({theme:n.pickPageButtonTheme,icon:"minus",inline:!0,iconpos:"notext",corners:!0,shadow:!0}).bind(n.clickEvent,function(e){e.preventDefault(),t.calNoPrev||(t.theDate.getDate()>28&&t.theDate.setDate(1),t._offset("m",-1))}),n.calTodayButton===!0&&(t.setButton=e("<a href='#'>PlaceHolder</a>").appendTo(g).buttonMarkup({theme:n.pickPageTheme,icon:"check",iconpos:"left",corners:!0,shadow:!0}).bind(n.clickEvent,function(e){e.preventDefault(),t.theDate=new Date,t.theDate=new Date(t.theDate.getFullYear(),t.theDate.getMonth(),t.theDate.getDate(),0,0,0,0),t.input.trigger("datebox",{method:"doset"})})),e.extend(t,{controlsInput:v,controlsPlus:d}),t.pickerContent.appendTo(t.thisPage)),n.useClearButton===!0&&(t.clearButton=e("<a href='#'>PlaceHolder</a>").appendTo(g).buttonMarkup({theme:n.pickPageTheme,icon:"delete",iconpos:"left",corners:!0,shadow:!0}).bind(n.clickEvent,function(e){e.preventDefault(),t.input.val(""),t.input.trigger("datebox",{method:"clear"}),t.input.trigger("datebox",{method:"close"})})),n.collapseButtons&&t.clearButton!==!1&&t.setButton!==!1&&g.addClass("ui-datebox-collapse")},_buttonsTitle:function(){var e=this,t=this.options;if(t.titleDialogLabel===!1)if(typeof this.element.attr("title")!="undefined")e.pickPageTitle.html(this.element.attr("title"));else if(this.focusedEl.parent().find("label").text()!=="")e.pickPageTitle.html(this.focusedEl.parent().find("label").text());else switch(t.mode){case"timebox":case"timeflipbox":e.pickPageTitle.html(t.lang[t.useLang].titleTimeDialogLabel);break;default:e.pickPageTitle.html(t.lang[t.useLang].titleDateDialogLabel)}else e.pickPageTitle.html(t.titleDialogLabel);e.clearButton!==!1&&e.clearButton.find(".ui-btn-text").html(t.lang[t.useLang].clearButton);if(e.setButton!==!1)switch(t.mode){case"timebox":case"timeflipbox":e.setButton.find(".ui-btn-text").html(t.lang[t.useLang].setTimeButtonLabel);break;case"durationbox":e.setButton.find(".ui-btn-text").html(t.lang[t.useLang].setDurationButtonLabel);break;case"calbox":e.setButton.find(".ui-btn-text").html(t.lang[t.useLang].calTodayButtonLabel);break;default:e.setButton.find(".ui-btn-text").html(t.lang[t.useLang].setDateButtonLabel)}},_buildPage:function(){var t=this,n=t.options,r=e("<div>",{"class":"ui-datebox-container ui-overlay-shadow ui-corner-all ui-datebox-hidden "+n.transition+" ui-body-"+n.pickPageTheme}).css("zIndex",n.zindex),i=e("<div>",{"class":"ui-datebox-screen ui-datebox-hidden"+(n.useModal?" ui-datebox-screen-modal":"")}).css({"z-index":n.zindex-1}).appendTo(t.thisPage).bind(n.clickEvent,function(e){e.preventDefault(),t.input.trigger("datebox",{method:"close"})});n.noAnimation&&r.removeClass(n.transition),e.extend(t,{pickerContent:r,screen:i}),t._buildInternals(),n.useInline||n.useInlineBlind?(t.input.parent(
).parent().append(t.pickerContent),n.useInlineHideInput&&t.input.parent().hide(),t.input.trigger("change"),t.pickerContent.removeClass("ui-datebox-hidden")):n.centerWindow&&n.useInlineHideInput&&t.input.parent().hide(),n.useInline&&(t.pickerContent.addClass("ui-datebox-inline"),t.open()),n.useInlineBlind&&(t.pickerContent.addClass("ui-datebox-inlineblind"),t.pickerContent.hide())},hardreset:function(){this._buildInternals(),this.refresh(),this._buttonsTitle()},refresh:function(){this.options.useInline===!0&&this.input.trigger("change"),this._update()},open:function(){var t=this,n=this.options,r=!1,i=n.noAnimation?"none":n.transition,s,o;if(n.openCallback!==!1){e.isFunction(this.options.openCallback)||(typeof window[n.openCallback]!="undefined"?n.openCallback=window[n.openCallback]:n.openCallback=new Function(n.openCallback)),s=n.openCallback.apply(t,e.merge([t.theDate],n.openCallbackArgs));if(s==0)return!1}t._buttonsTitle();if(this.options.useInlineBlind)return this.pickerContent.slideDown(),!1;if(this.options.useInline)return!0;if(this.pickPage.is(":visible"))return!1;this.theDate=this._makeDate(this.input.val()),this._update(),this.input.blur();if(e(document).width()>400&&!n.useDialogForceTrue||n.useDialogForceFalse||n.fullScreen){r=this._getCoords(this),n.useDialog=!1,n.nestedBox===!0&&n.fullScreen===!1&&(o=e(".ui-page-active").first(),e(o).append(t.pickerContent),e(o).append(t.screen));if(n.fullScreenAlways===!1||r.width>399)n.useModal===!0?t.screen.fadeIn("slow"):setTimeout(function(){t.screen.removeClass("ui-datebox-hidden")},500);n.fullScreenAlways===!0||n.fullScreen===!0&&r.width<400?t.pickerContent.addClass("in").css({position:"absolute","text-align":"center",top:r.fullTop-5,left:r.fullLeft-5,height:r.high,width:r.width}).removeClass("ui-datebox-hidden"):(t.pickerContent.addClass("ui-overlay-shadow in").css({position:"absolute",top:r.winTop,left:r.winLeft}).removeClass("ui-datebox-hidden"),e(document).bind("orientationchange.datebox",{widget:t},function(e){t._orientChange(e)}),n.resizeListener===!0&&e(window).bind("resize.datebox",{widget:t},function(e){t._orientChange(e)}))}else t.thisPage.unbind("pagehide.remove"),n.useDialog=!0,t.pickPageContent.append(t.pickerContent),t.pickerContent.css({top:"auto",left:"auto",marginLeft:"auto",marginRight:"auto"}).removeClass("ui-overlay-shadow ui-datebox-hidden"),e.mobile.changePage(t.pickPage,{transition:i})},close:function(t){var n=this,r=this.options,i;if(r.useInlineBlind)return n.pickerContent.slideUp(),!1;if(r.useInline)return!0;r.useDialog?(t||e(n.pickPage).dialog("close"),n.thisPage.jqmData("page").options.domCache||n.thisPage.bind("pagehide.remove",function(){e(n).remove()}),n.pickerContent.addClass("ui-datebox-hidden").removeAttr("style").css("zIndex",n.options.zindex),n.thisPage.append(n.pickerContent)):(r.useModal?n.screen.fadeOut("slow"):n.screen.addClass("ui-datebox-hidden"),n.pickerContent.addClass("ui-datebox-hidden").removeAttr("style").css("zIndex",n.options.zindex).removeClass("in")),n.focusedEl.removeClass("ui-focus"),e(document).unbind("orientationchange.datebox"),r.resizeListener===!0&&e(window).unbind("resize.datebox"),r.closeCallback!==!1&&(e.isFunction(r.closeCallback)||(typeof window[r.closeCallback]!="undefined"?r.closeCallback=window[r.closeCallback]:r.closeCallback=new Function(r.closeCallback)),r.closeCallback.apply(n,e.merge([n.theDate],r.closeCallbackArgs)))},disable:function(){this.element.attr("disabled",!0),this.element.parent().addClass("ui-disabled"),this.options.disabled=!0,this.element.blur(),this.input.trigger("datebox",{method:"disable"})},enable:function(){this.element.attr("disabled",!1),this.element.parent().removeClass("ui-disabled"),this.options.disabled=!1,this.input.trigger("datebox",{method:"enable"})},_setOption:function(t,n){var r=["minYear","maxYear","afterToday","beforeToday","maxDays","minDays","highDays","highDates","blackDays","blackDates","enableDates"];e.Widget.prototype._setOption.apply(this,arguments),e.inArray(t,r)>-1?this.refresh():this.hardreset()}}),e(document).bind("pagebeforecreate",function(t){e(":jqmData(role='datebox')",t.target).each(function(){e(this).prop("type","text")})}),e(document).bind("pagecreate create",function(t){e(document).trigger("dateboxbeforecreate"),e(":jqmData(role='datebox')",t.target).each(function(){typeof e(this).data("datebox")=="undefined"&&e(this).datebox()})})}(jQuery),function(e,t){e.widget("mobile.simpledialog2",e.mobile.widget,{options:{version:"1.0.1-2012061300",mode:"blank",themeDialog:"b",themeInput:!1,themeButtonDefault:!1,themeHeader:"a",fullScreen:!1,fullScreenForce:!1,dialogAllow:!1,dialogForce:!1,headerText:!1,headerClose:!1,buttonPrompt:!1,buttonInput:!1,buttonInputDefault:!1,buttonPassword:!1,blankContent:!1,blankContentAdopt:!1,resizeListener:!0,safeNuke:!0,forceInput:!0,showModal:!0,animate:!0,transition:"pop",clickEvent:"click",zindex:"500",width:"280px",left:!1,top:!1,callbackOpen:!1,callbackOpenArgs:[],callbackClose:!1,callbackCloseArgs:[]},_eventHandler:function(e,t){var n=e.data.widget,r=e.data.widget.options;if(!e.isPropagationStopped())switch(t.method){case"close":n.close();break;case"html":n.updateBlank(t.source)}},_create:function(){var t=this,n=e.extend(this.options,this.element.jqmData("options")),r=new Date,i=e("<div class='ui-simpledialog-container ui-overlay-shadow ui-corner-all ui-simpledialog-hidden "+(n.animate===!0?n.transition:"")+" ui-body-"+n.themeDialog+"'></div>");n.themeButtonDefault===!1&&(n.themeButtonDefault=n.themeDialog),n.themeInput===!1&&(n.themeInput=n.themeDialog),e.mobile.sdCurrentDialog=t,typeof e.mobile.sdLastInput!="undefined"&&delete e.mobile.sdLastInput,t.internalID=r.getTime(),t.displayAnchor=e.mobile.activePage.children(".ui-content").first(),t.displayAnchor.length===0&&(t.displayAnchor=e.mobile.activePage),t.dialogPage=e("<div data-role='dialog' data-theme='"+n.themeDialog+"'><div data-role='header'></div><div data-role='content'></div></div>"),t.sdAllContent=t.dialogPage.find("[data-role=content]"),i.appendTo(t.sdAllContent),t.sdIntContent=t.sdAllContent.find(".ui-simpledialog-container"),t.sdIntContent.css("width",n.width);if(n.headerText!==!1||n.headerClose!==!1)t.sdHeader=e('<div style="margin-bottom: 4px;" class="ui-header ui-bar-'+n.themeHeader+'"></div>'),n.headerClose===!0&&e("<a class='ui-btn-left' rel='close' href='#'>Close</a>").appendTo(t.sdHeader).buttonMarkup({theme:n.themeHeader,icon:"delete",iconpos:"notext",corners:!0,shadow:!0}),e('<h1 class="ui-title">'+(n.headerText!==!1?n.headerText:"")+"</h1>").appendTo(t.sdHeader),t.sdHeader.appendTo(t.sdIntContent);n.mode==="blank"?(n.blankContent===!0&&(n.blankContentAdopt===!0?n.blankContent=t.element.children():n.blankContent=t.element.html()),e(n.blankContent).appendTo(t.sdIntContent)):n.mode==="button"&&t._makeButtons().appendTo(t.sdIntContent),t.sdIntContent.appendTo(t.displayAnchor.parent()),t.dialogPage.appendTo(e.mobile.pageContainer).page().css("minHeight","0px").css("zIndex",n.zindex),n.animate===!0&&t.dialogPage.addClass(n.transition),t.screen=e("<div>",{"class":"ui-simpledialog-screen ui-simpledialog-hidden"}).css("z-index",n.zindex-1).appendTo(t.displayAnchor.parent()).bind(n.clickEvent,function(e){n.forceInput||t.close(),e.preventDefault()}),n.showModal&&t.screen.addClass("ui-simpledialog-screen-modal"),e(document).bind("simpledialog."+t.internalID,{widget:t},function(e,n){t._eventHandler(e,n)})},_makeButtons:function(){var t=this,n=t.options,r=e("<div></div>"),i=e("<div class='ui-simpledialog-controls'><input class='ui-simpledialog-input ui-input-text ui-shadow-inset ui-corner-all ui-body-"+n.themeInput+"' type='"+(n.buttonPassword===!0?"password":"text")+"' value='"+(n.buttonInputDefault!==!1?n.buttonInputDefault.replace('"',"&#34;").replace("'","&#39;"):"")+"' name='pickin' /></div>"),s=e("<div>",{"class":"ui-simpledialog-controls"});return n.buttonPrompt!==!1&&(t.buttonPromptText=e("<p class='ui-simpledialog-subtitle'>"+n.buttonPrompt+"</p>").appendTo(r)),n.buttonInput!==!1&&(e.mobile.sdLastInput="",i.appendTo(r),i.find("input").bind("change",function(){e.mobile.sdLastInput=i.find("input").first().val(),t.thisInput=i.find("input").first().val()})),s.appendTo(r),t.butObj=[],e.each(n.buttons,function(r,i){i=e.isFunction(i)?{click:i}:i,i=e.extend({text:r,id:r+t.internalID,theme:n.themeButtonDefault,icon:"check",iconpos:"left",corners:"true",shadow:"true",args:[],close:!0},i),t.butObj.push(e("<a href='#'>"+r+"</a>").appendTo(s).attr("id",i.id).buttonMarkup({theme:i.theme,icon:i.icon,iconpos:i.iconpos,corners:i.corners,shadow:i.shadow}).unbind("vclick click").bind(n.clickEvent,function(){n.buttonInput&&t.sdIntContent.find("input [name=pickin]").trigger("change");var r=i.click.apply(t,e.merge(arguments,i.args));r!==!1&&i.close===!0&&t.close()}))}),r},_getCoords:function(t){var n=t,r=e.mobile.activePage.width(),i=e(window).scrollTop(),s=e(window).height(),o=t.sdIntContent.innerWidth(),u=t.sdIntContent.outerHeight(),f={high:e(window).height(),width:e.mobile.activePage.width(),fullTop:e(window).scrollTop(),fullLeft:e(window).scrollLeft(),winTop:i+(t.options.top!==!1?t.options.top:s/2-u/2),winLeft:t.options.left!==!1?t.options.left:r/2-o/2};return f.winTop<45&&(f.winTop=45),f},_orientChange:function(e){var t=e.data.widget,n=e.data.widget.options,r=e.data.widget._getCoords(e.data.widget);e.stopPropagation();if(t.isDialog===!0)return!0;n.fullScreen===!0&&(r.width<400||n.fullScreenForce===!0)?t.sdIntContent.css({border:"none",position:"absolute",top:r.fullTop,left:r.fullLeft,height:r.high,width:r.width,maxWidth:r.width}).removeClass("ui-simpledialog-hidden"):t.sdIntContent.css({position:"absolute",top:r.winTop,left:r.winLeft}).removeClass("ui-simpledialog-hidden")},repos:function(){var e={data:{widget:this},stopPropagation:function(){return!0}};this._orientChange(e)},open:function(){var t=this,n=this.options,r=this._getCoords(this);t.sdAllContent.find(".ui-btn-active").removeClass("ui-btn-active"),t.sdIntContent.delegate("[rel=close]",n.clickEvent,function(e){e.preventDefault(),t.close()}),n.dialogAllow===!0&&r.width<400||n.dialogForce?(t.isDialog=!0,n.mode==="blank"&&t.sdIntContent.find("select").each(function(){e(this).jqmData("nativeMenu",!0)}),t.displayAnchor.parent().unbind("pagehide.remove"),t.sdAllContent.append(t.sdIntContent),t.sdAllContent.trigger("create"),n.headerText!==!1&&(t.sdHeader.find("h1").appendTo(t.dialogPage.find("[data-role=header]")),t.sdIntContent.find(".ui-header").empty().removeClass()),n.headerClose===!0?t.dialogPage.find(".ui-header a").bind("click",function(){setTimeout("$.mobile.sdCurrentDialog.destroy();",1e3)}):t.dialogPage.find(".ui-header a").remove(),t.sdIntContent.removeClass().css({top:"auto",width:"auto",left:"auto",marginLeft:"auto",marginRight:"auto",zIndex:n.zindex}),e.mobile.changePage(t.dialogPage,{transition:n.animate===!0?n.transition:"none"})):(t.isDialog=!1,t.selects=[],n.fullScreen===!1&&(n.showModal===!0&&n.animate===!0?t.screen.fadeIn("slow"):t.screen.removeClass("ui-simpledialog-hidden")),t.sdIntContent.addClass("ui-overlay-shadow in").css("zIndex",n.zindex).trigger("create"),n.fullScreen===!0&&(r.width<400||n.fullScreenForce===!0)?t.sdIntContent.removeClass("ui-simpledialog-container").css({border:"none",position:"absolute",top:r.fullTop,left:r.fullLeft,height:r.high,width:r.width,maxWidth:r.width}).removeClass("ui-simpledialog-hidden"):t.sdIntContent.css({position:"absolute",top:r.winTop,left:r.winLeft}).removeClass("ui-simpledialog-hidden"),e(document).bind("orientationchange.simpledialog",{widget:t},function(e){t._orientChange(e)}),n.resizeListener===!0&&e(window).bind("resize.simpledialog",{widget:t},function(e){t._orientChange(e)})),e.isFunction(n.callbackOpen)&&n.callbackOpen.apply(t,n.callbackOpenArgs)},close:function(){var t=this,n=this.options,r;if(e.isFunction(t.options.callbackClose)){r=t.options.callbackClose.apply(t,t.options.callbackCloseArgs);if(r===!1)return!1}t.isDialog?(e(t.dialogPage).dialog("close"),t.sdIntContent.addClass("ui-simpledialog-hidden"),t.sdIntContent.appendTo(t.displayAnchor.parent()),e.mobile.activePage.jqmData("page").options.domCache!=1&&e.mobile.activePage.is(":jqmData(external-page='true')")&&e.mobile.activePage.bind("pagehide.remove",function(){e(this).remove()})):(t.options.showModal===!0&&t.options.animate===!0?t.screen.fadeOut("slow"):t.screen.addClass("ui-simpledialog-hidden"),t.sdIntContent.addClass("ui-simpledialog-hidden").removeClass("in"),e(document).unbind("orientationchange.simpledialog"),t.options.resizeListener===!0&&e(window).unbind("resize.simpledialog")),n.mode==="blank"&&n.blankContent!==!1&&n.blankContentAdopt===!0&&(t.element.append(n.blankContent),n.blankContent=!0),t.isDialog===!0||t.options.animate===!0?setTimeout(function(e){return function(){e.destroy()}}(t),1e3):t.destroy()},destroy:function(){var t=this,n=t.element;t.options.mode==="blank"&&e.mobile.sdCurrentDialog.sdIntContent.find("select").each(function(){e(this).data("nativeMenu")==0&&(e(this).data("selectmenu").menuPage.remove(),e(this).data("selectmenu").screen.remove(),e(this).data("selectmenu").listbox.remove())}),e(t.sdIntContent).remove(),e(t.dialogPage).remove(),e(t.screen).remove(),e(document).unbind("simpledialog."+t.internalID),delete e.mobile.sdCurrentDialog,e.Widget.prototype.destroy.call(t),t.options.safeNuke===!0&&e(n).parents().length===0&&e(n).contents().length===0&&n.remove()},updateBlank:function(t){var n=this,r=this.options;n.sdIntContent.empty();if(r.headerText!==!1||r.headerClose!==!1)n.sdHeader=e('<div class="ui-header ui-bar-'+r.themeHeader+'"></div>'),r.headerClose===!0&&e("<a class='ui-btn-left' rel='close' href='#'>Close</a>").appendTo(n.sdHeader).buttonMarkup({theme:r.themeHeader,icon:"delete",iconpos:"notext",corners:!0,shadow:!0}),e('<h1 class="ui-title">'+(r.headerText!==!1?r.headerText:"")+"</h1>").appendTo(n.sdHeader),n.sdHeader.appendTo(n.sdIntContent);e(t).appendTo(n.sdIntContent),n.sdIntContent.trigger("create"),e(document).trigger("orientationchange.simpledialog")},_init:function(){this.open()}})}(jQuery);